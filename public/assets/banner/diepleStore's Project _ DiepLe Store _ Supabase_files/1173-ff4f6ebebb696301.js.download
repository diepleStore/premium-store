!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=(new e.Error).stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="026ff113-ab05-4bfa-a839-a6c5513d47ff",e._sentryDebugIdIdentifier="sentry-dbid-026ff113-ab05-4bfa-a839-a6c5513d47ff")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1173],{35875:(e,i,r)=>{r.d(i,{Gc:()=>m,Zj:()=>u});var o=r(56947),t=r(53434),l=r.n(t),a=r(53239),c=r(3807),n=r(96688),_=r(32429);async function d(e,i){let{projectRef:r}=e;if(!r)throw Error("Project ref is required");let{data:o,error:t}=await (0,c.Jt)("/platform/projects/{ref}/disk",{params:{path:{ref:r}},signal:i});return t&&(0,c.H4)(t),o}let m=function(e){let{projectRef:i}=e,{enabled:r=!0,...t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.I)(_.n.diskAttributes(i),e=>{let{signal:r}=e;return d({projectRef:i},r)},{enabled:r&&void 0!==i,...t})},u=e=>{var i;let{projectRef:r,enabled:o=!0}=e,{data:t,isLoading:c,isError:_,isSuccess:d,error:u}=m({projectRef:r},{enabled:o}),g=l()(null!=(i=null==t?void 0:t.last_modified_at)?i:"").utc(),p=Math.max(0,l()().utc().diff(l()(g).utc(),"second")),s=(0,a.useMemo)(()=>void 0===g||n.Xz-p<0?0:n.Xz-p,[g,p]);return(null==t?void 0:t.last_modified_at)===void 0?{remainingDuration:0,isWithinCooldownWindow:!1,isLoading:c,isError:_,error:u,isSuccess:d}:{remainingDuration:s,isWithinCooldownWindow:s>0,isLoading:c,isError:_,error:u,isSuccess:d}}},49495:(e,i,r)=>{r.d(i,{$6:()=>h,$C:()=>_,CQ:()=>m,Fu:()=>u,HE:()=>d,QV:()=>z,T2:()=>s,Uk:()=>a,WC:()=>l,ZV:()=>y,a6:()=>p,it:()=>g,ku:()=>f,ou:()=>n,t5:()=>c,u1:()=>x});var o=r(58897),t=r(60937);let l=e=>{var i,r,o,l;let{planId:a,oldSize:c,oldStorageType:n,newSize:_,newStorageType:d,numReplicas:m=0}=e,u=null!=(o=null==(i=t.zN[n])?void 0:i.storage)?o:0,g=null!=(l=null==(r=t.zN[d])?void 0:r.storage)?l:0,{includedDiskGB:p}=null===t.Jh||void 0===t.Jh?void 0:t.Jh[a],s=Math.max(c-p[n],0)*u,x=Math.max(_-p[d],0)*g;return{oldPrice:(s+1.25*c*u*m).toFixed(2),newPrice:(x+1.25*_*g*m).toFixed(2)}},a=e=>{var i,r,o,t;let{availableOptions:l,oldComputeSize:a,newComputeSize:c,plan:n}=e,_=a;"free"!==n&&"ci_nano"===a&&(_="ci_micro");let d=null!=(o=null==l||null==(i=l.find(e=>e.identifier===_))?void 0:i.price)?o:0,m=null!=(t=null==l||null==(r=l.find(e=>e.identifier===c))?void 0:r.price)?t:0;return{oldPrice:(720*d).toFixed(2),newPrice:(720*m).toFixed(2)}},c=e=>{var i,r,o,l,a,c,n,_;let{oldStorageType:d,oldProvisionedIOPS:m,newStorageType:u,newProvisionedIOPS:g,numReplicas:p=0}=e;if(u===t.y6.GP3){let e=Math.max(0,m-t.No[t.y6.GP3].includedIops),a=Math.max(0,g-t.No[t.y6.GP3].includedIops),c=e*(null!=(o=null==(i=t.zN[d])?void 0:i.iops)?o:0),n=a*(null!=(l=null==(r=t.zN[u])?void 0:r.iops)?l:0);return{oldPrice:(c*(1+p)).toFixed(2),newPrice:(n*(1+p)).toFixed(2)}}{let e="gp3"===d?(m-t.No[d].includedIops)*t.zN[d].iops:m*(null!=(n=null==(a=t.zN[d])?void 0:a.iops)?n:0),i=g*(null!=(_=null==(c=t.zN[u])?void 0:c.iops)?_:0);return{oldPrice:(e*(1+p)).toFixed(2),newPrice:(i*(1+p)).toFixed(2)}}},n=e=>{let{storageType:i,newThroughput:r,oldThroughput:o,numReplicas:l=0}=e;if(i===t.y6.GP3&&r){let e=Math.max(0,o-t.No[t.y6.GP3].includedThroughput),i=Math.max(0,r-t.No[t.y6.GP3].includedThroughput),a=e*t.zN[t.y6.GP3].throughput,c=i*t.zN[t.y6.GP3].throughput;return{oldPrice:(a*(1+l)).toFixed(2),newPrice:(c*(1+l)).toFixed(2)}}return{oldPrice:"0.00",newPrice:"0.00"}};function _(e,i){var r,t;let l=null!=(t=null==(r=e.find(e=>"compute_instance"===e.type))?void 0:r.variants.filter(e=>{if(!i)return!0;let r=e.meta;return!r.supported_cloud_providers||r.supported_cloud_providers.includes(i)}))?t:[];return l.unshift({identifier:"ci_nano",name:"Nano",price_description:"$0/hour (~$0/month)",price:0,price_interval:"hourly",price_type:"usage",meta:{cpu_cores:o.kC.cpu_cores,cpu_dedicated:o.kC.cpu_dedicated,memory_gb:o.kC.memory_gb,baseline_disk_io_mbs:o.kC.baseline_disk_io_mbs,max_disk_io_mbs:o.kC.max_disk_io_mbs,connections_direct:o.kC.connections_direct,connections_pooler:o.kC.connections_pooler}}),l}let d=e=>Math.min(3e3*e,16e3),m=e=>Math.max(1,Math.ceil(e/500)),u=e=>Math.min(500*e,256e3),g=e=>Math.max(4,Math.ceil(e/1e3)),p=e=>Math.max(125,Math.ceil(e/.256)),s=e=>t.QL[e]||0,x=e=>{let i=Object.entries(t.QL).sort((e,i)=>e[1]-i[1]);for(let[r,o]of i)if(e<=o)return r;return i[i.length-1][0]},h=e=>({pico:"ci_pico",nano:"ci_nano",micro:"ci_micro",small:"ci_small",medium:"ci_medium",large:"ci_large",xlarge:"ci_xlarge","2xlarge":"ci_2xlarge","4xlarge":"ci_4xlarge","8xlarge":"ci_8xlarge","12xlarge":"ci_12xlarge","16xlarge":"ci_16xlarge","24xlarge":"ci_24xlarge","24xlarge_optimized_memory":"ci_24xlarge_optimized_memory","24xlarge_optimized_cpu":"ci_24xlarge_optimized_cpu","24xlarge_high_memory":"ci_24xlarge_high_memory","48xlarge":"ci_48xlarge","48xlarge_optimized_memory":"ci_48xlarge_optimized_memory","48xlarge_optimized_cpu":"ci_48xlarge_optimized_cpu","48xlarge_high_memory":"ci_48xlarge_high_memory"})[null!=e?e:"nano"],f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ci_nano";return({ci_nano:"Nano",ci_micro:"Micro",ci_small:"Small",ci_medium:"Medium",ci_large:"Large",ci_xlarge:"XL",ci_2xlarge:"2XL",ci_4xlarge:"4XL",ci_8xlarge:"8XL",ci_12xlarge:"12XL",ci_16xlarge:"16XL",ci_24xlarge:"24XL",ci_24xlarge_optimized_memory:"24XL - Optimized Memory",ci_24xlarge_optimized_cpu:"24XL - Optimized CPU",ci_24xlarge_high_memory:"24XL - High Memory",ci_48xlarge:"48XL",ci_48xlarge_optimized_memory:"48XL - Optimized Memory",ci_48xlarge_optimized_cpu:"48XL - Optimized CPU",ci_48xlarge_high_memory:"48XL - High Memory"})[e]},y=e=>e.toLocaleString("en-US"),z=(e,i)=>"free"!==e&&"nano"===i},60937:(e,i,r)=>{r.d(i,{EH:()=>g,JM:()=>m,Jh:()=>n,No:()=>c,QL:()=>_,SZ:()=>l,eQ:()=>u,nU:()=>o,tt:()=>d,y6:()=>t,zN:()=>a});let o=.9;var t=function(e){return e.GP3="gp3",e.IO2="io2",e}({});let l={growthPercent:50,minIncrementSize:4,maxSizeGb:6e4},a={gp3:{storage:.125,iops:.024,throughput:.095},io2:{storage:.195,iops:.119}},c={gp3:{minStorage:1,maxStorage:16384,minIops:3e3,maxIops:16e3,minThroughput:125,maxThroughput:1e3,includedIops:3e3,includedThroughput:125},io2:{minStorage:4,maxStorage:61440,minIops:1500,maxIops:256e3,includedIops:0,includedThroughput:0}},n={free:{includedDiskGB:{gp3:1,io2:0}},pro:{includedDiskGB:{gp3:8,io2:0}},team:{includedDiskGB:{gp3:8,io2:0}},enterprise:{includedDiskGB:{gp3:8,io2:0}}},_={ci_nano:250,ci_micro:500,ci_small:1e3,ci_medium:2e3,ci_large:3600,ci_xlarge:6e3,ci_2xlarge:12e3,ci_4xlarge:2e4,ci_8xlarge:4e4,ci_12xlarge:5e4,ci_16xlarge:8e4,ci_24xlarge:12e4,ci_24xlarge_optimized_cpu:12e4,ci_24xlarge_optimized_memory:12e4,ci_24xlarge_high_memory:12e4,ci_48xlarge:24e4,ci_48xlarge_optimized_cpu:24e4,ci_48xlarge_optimized_memory:24e4,ci_48xlarge_high_memory:24e4},d={ci_nano:43,ci_micro:87,ci_small:174,ci_medium:347,ci_large:630,ci_xlarge:1188,ci_2xlarge:2375,ci_4xlarge:4750,ci_8xlarge:9500,ci_12xlarge:14250,ci_16xlarge:19e3,ci_24xlarge:3e4,ci_24xlarge_optimized_cpu:3e4,ci_24xlarge_optimized_memory:3e4,ci_24xlarge_high_memory:3e4,ci_48xlarge:4e4,ci_48xlarge_optimized_cpu:4e4,ci_48xlarge_optimized_memory:4e4,ci_48xlarge_high_memory:4e4},m=["ci_nano","ci_micro","ci_small","ci_medium"],u=["ci_nano","ci_micro","ci_small","ci_medium"],g=[{type:"gp3",name:"General Purpose SSD",description:"Balance between price and performance"},{type:"io2",name:"High Performance SSD",description:"High performance for mission critical applications"}]},96688:(e,i,r)=>{r.d(i,{Xz:()=>n,_J:()=>d});var o=r(32144),t=r(80251),l=r(73969),a=r(3807),c=r(32429);let n=21600;async function _(e){if(!e.ref)throw Error("ref is required");let i="gp3"===e.storageType?{iops:e.provisionedIOPS,throughput_mbps:e.throughput,size_gb:e.totalSize,type:e.storageType}:{iops:e.provisionedIOPS,size_gb:e.totalSize,type:e.storageType},{data:r,error:o}=await (0,a.bE)("/platform/projects/{ref}/disk",{params:{path:{ref:e.ref}},body:{attributes:i}});return o&&(0,a.H4)(o),r}let d=function(){let{onSuccess:e,onError:i,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,o.jE)();return(0,t.n)(e=>_(e),{async onSuccess(i,r,o){let{ref:t}=r;await a.invalidateQueries(c.n.diskAttributes(t)),await (null==e?void 0:e(i,r,o))},async onError(e,r,o){void 0===i?l.oR.error("Failed to update disk attributes: ".concat(e.message)):i(e,r,o)},...r})}}}]);