!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d499e33e-ca31-47a3-8709-3266dfef1f31",e._sentryDebugIdIdentifier="sentry-dbid-d499e33e-ca31-47a3-8709-3266dfef1f31")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8996],{206:(e,t,s)=>{s.d(t,{CU:()=>d,Dv:()=>c,z6:()=>i});var r=s(80263),a=s(72342),n=s(24922),l=s(53239),o=s(2);let i=l.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(a.bL,{className:(0,o.cn)("grid gap-2",s),...n,ref:t})});i.displayName=a.bL.displayName;let d=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,r.jsx)(a.q7,{ref:t,className:(0,o.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:(0,r.jsx)(a.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=a.q7.displayName;let c=l.forwardRef((e,t)=>{let{image:s,label:n,showIndicator:l=!0,...i}=e;return(0,r.jsxs)(a.q7,{ref:t,...i,className:(0,o.cn)("flex flex-col gap-2","w-48","bg-surface-200","rounded-md border border-strong","p-2","shadow-sm","hover:border-stronger hover:bg-surface-300","data-[state=checked]:border-primary","data-[state=checked]:ring-1 data-[state=checked]:ring-border","data-[state=checked]:bg-selection data-[state=checked]:border-foreground","transition-colors","group",i.className),children:[i.children,(0,r.jsxs)("div",{className:"flex gap-2 w-full",children:[l&&(0,r.jsxs)("div",{className:"relative w-3 h-3 min-w-3 mt-0.5",children:[(0,r.jsx)(a.C1,{className:(0,o.cn)("absolute","w-[10px] h-[10px]","left-[1px] top-[1px]","border border-background-surface-300","rounded-full","data-[state=checked]:border-background-surface-300","data-[state=checked]:ring-foreground","data-[state=checked]:bg-foreground")}),(0,r.jsx)("div",{className:(0,o.cn)("absolute","w-3 h-3","border border-stronger","rounded-full","group-hover:border-foreground-light","group-data-[state=checked]:border-foreground","transition-colors")})]}),(0,r.jsx)("label",{htmlFor:i.value,className:(0,o.cn)("text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",i.disabled?"cursor-not-allowed":"cursor-pointer"),children:n})]})]})});c.displayName=a.q7.displayName},2081:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(80263),a=s(64238),n=s(81372),l=s(53239),o=s(90206),i=s(16601),d=s(2);let c=e=>{var t;let{text:s,asyncText:c,iconOnly:u=!1,children:m,onClick:x,copyLabel:f="Copy",copiedLabel:p="Copied",...g}=e,[y,h]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!y)return;let e=setTimeout(()=>h(!1),2e3);return()=>clearTimeout(e)},[y]),(0,r.jsx)(i.$,{onClick:async e=>{let t=c?await c():s;h(!0),await (0,o.lW)(t),null==x||x(e)},...g,className:(0,d.cn)({"px-1":u},g.className),icon:y?(0,r.jsx)(a.A,{strokeWidth:2,className:"text-brand"}):null!=(t=g.icon)?t:(0,r.jsx)(n.A,{}),"data-sentry-element":"Button","data-sentry-component":"CopyButton","data-sentry-source-file":"CopyButton.tsx",children:!u&&(0,r.jsx)(r.Fragment,{children:null!=m?m:y?p:f})})}},2902:(e,t,s)=>{s.d(t,{T5:()=>o,YN:()=>c,_2:()=>u,gl:()=>i,vm:()=>d});var r=s(80263);s(2081),s(53239),s(92589);var a=s(65325),n=s(89714);s(53434);var l=s(2);let o=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"flex h-full w-full items-center gap-4","data-sentry-component":"RowLayout","data-sentry-source-file":"LogsFormatters.tsx",children:t})},i=e=>{let{value:t,className:s}=e;return(0,r.jsx)("span",{className:"font-mono text-xs truncate "+s,"data-sentry-component":"TextFormatter","data-sentry-source-file":"LogsFormatters.tsx",children:t})},d=e=>{let{value:t}=e;if(!t)return(0,r.jsx)("div",{children:(0,r.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let s=e=>{let{children:t,className:s}=e;return(0,r.jsx)("div",{className:"flex h-full items-center","data-sentry-component":"ResponseCodeItem","data-sentry-source-file":"LogsFormatters.tsx",children:(0,r.jsx)("div",{className:(0,l.cn)("relative flex h-6 items-center rounded-md justify-center px-2 py-1 text-center",s),children:(0,r.jsx)("label",{className:"block font-mono text-sm",children:t})})})};switch(t.toString().split("")[0]){case"1":return(0,r.jsx)(s,{children:t});case"2":return(0,r.jsx)(s,{className:"bg-surface-100 text-brand",children:t});case"5":return(0,r.jsx)(s,{className:"bg-red-300 text-red-1100",children:t});case"4":case"3":return(0,r.jsx)(s,{className:"bg-amber-300 text-amber-1100",children:t});default:return(0,r.jsx)(s,{className:"bg-surface-100 text-foreground-lighter",children:t})}},c=e=>{let{value:t,uppercase:s=!0}=e;if(!t)return(0,r.jsx)("div",{children:(0,r.jsx)("label",{className:"text-xs text-border-stronger",children:"No data"})});let l=t.toUpperCase(),o=s?l:t,i=e=>{let{className:t,children:s}=e;return(0,r.jsx)("div",{className:"w-24 flex items-center h-full ".concat(t),"data-sentry-component":"Layout","data-sentry-source-file":"LogsFormatters.tsx",children:s})};switch(l){case"UNCAUGHTEXCEPTION":case"PANIC":case"FATAL":case"ERROR":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-red-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-red-900 !block titlecase",children:o})]});case"INFO":case"DEBUG":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"LOG":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-blue-900",children:(0,r.jsx)(n.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-blue-900 !block titlecase",children:o})]});case"WARNING":return(0,r.jsxs)(i,{className:"gap-1",children:[(0,r.jsx)("div",{className:" p-0.5 rounded !text-amber-900",children:(0,r.jsx)(a.A,{size:14,strokeWidth:2})}),(0,r.jsx)("span",{className:"!text-amber-900 !block titlecase",children:o})]});default:return(0,r.jsx)(i,{children:(0,r.jsx)("div",{className:"relative rounded px-2 py-1 text-center h-6 flex justify-center items-center bg-surface-100",children:(0,r.jsx)("label",{className:"block font-mono text-sm text-foreground-lighter",children:o})})})}};function u(e){let t=JSON.stringify(e,null,2);return(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number text-tomato-900";return/^"/.test(e)?t=/:$/.test(e)?"key text-foreground":"string text-brand-600":/true|false/.test(e)?t="boolean text-blue-900":/null/.test(e)&&(t="null text-amber-1100"),'<span class="'+t+'">'+e+"</span>"}).split("\n").map(e=>'<span class="line text-xs">'.concat(e,"</span>")).join("\n")}},31301:(e,t,s)=>{s.d(t,{t:()=>a});var r=s(34164);function a(){return(0,r.ZA)("log")}},38784:(e,t,s)=>{s.d(t,{O:()=>w});var r=s(80263),a=s(53434),n=s.n(a),l=s(96708),o=s(23278),i=s(48277),d=s(28894),c=s(53239),u=s(38887),m=s.n(u),x=s(27863),f=s(206),p=s(95720),g=s(10738),y=s(16601),h=s(2),j=s(66933),v=s(90206);let w=e=>{let{onSubmit:t,helpers:s,value:a}=e,[u,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!u){N(a.from?new Date(a.from):null),k(a.to?new Date(a.to):new Date);let e=a.from?new Date(a.from):null,t=a.to?new Date(a.to):null;D({HH:(null==e?void 0:e.getHours().toString().padStart(2,"0"))||"00",mm:(null==e?void 0:e.getMinutes().toString().padStart(2,"0"))||"00",ss:(null==e?void 0:e.getSeconds().toString().padStart(2,"0"))||"00"});let s=new Date,r=s.getHours().toString().padStart(2,"0"),n=s.getMinutes().toString().padStart(2,"0"),l=s.getSeconds().toString().padStart(2,"0");R({HH:(null==t?void 0:t.getHours().toString().padStart(2,"0"))||r,mm:(null==t?void 0:t.getMinutes().toString().padStart(2,"0"))||n,ss:(null==t?void 0:t.getSeconds().toString().padStart(2,"0"))||l})}},[u,a]);let[b,N]=(0,c.useState)(a.from?new Date(a.from):null),[S,k]=(0,c.useState)(a.to?new Date(a.to):new Date),[T,D]=(0,c.useState)({HH:(null==b?void 0:b.getHours().toString())||"00",mm:(null==b?void 0:b.getMinutes().toString())||"00",ss:(null==b?void 0:b.getSeconds().toString())||"00"}),[C,R]=(0,c.useState)({HH:(null==S?void 0:S.getHours().toString())||"23",mm:(null==S?void 0:S.getMinutes().toString())||"59",ss:(null==S?void 0:S.getSeconds().toString())||"59"}),[L,E]=(0,c.useState)(!1),[A,_]=(0,c.useState)(!1);function H(){navigator.clipboard.readText().then(e=>{try{let t=JSON.parse(e);if(!t.from||!t.to)return void console.warn("Invalid date range format in clipboard");let s=new Date(t.from),r=new Date(t.to);if(isNaN(s.getTime())||isNaN(r.getTime()))return void console.warn("Invalid date values in clipboard");N(s),k(r),D({HH:s.getHours().toString(),mm:s.getMinutes().toString(),ss:s.getSeconds().toString()}),R({HH:r.getHours().toString(),mm:r.getMinutes().toString(),ss:r.getSeconds().toString()}),_(!0)}catch(e){console.warn("Failed to parse clipboard content as date range:",e)}}).catch(e=>{console.warn("Failed to read clipboard:",e)})}function M(){if(!b||!S)return;let e=new Date(b),t=new Date(S);e.setHours(+T.HH,+T.mm,+T.ss),t.setHours(+C.HH,+C.mm,+C.ss),(0,v.lW)(JSON.stringify({from:e.toISOString(),to:t.toISOString()})),E(!0)}(0,c.useEffect)(()=>{L&&setTimeout(()=>{E(!1)},2e3)},[L]),(0,c.useEffect)(()=>{A&&setTimeout(()=>{_(!1)},2e3)},[A]),(0,c.useEffect)(()=>(u&&(document.addEventListener("paste",H),document.addEventListener("copy",M)),()=>{document.removeEventListener("paste",H),document.removeEventListener("copy",M)}),[u,b,S]);let P=Math.abs(n()(b).diff(n()(S),"days"))>j.VM-1;return(0,r.jsxs)(g.AM,{open:u,onOpenChange:w,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"LogsDatePicker","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,r.jsx)(g.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:(0,r.jsx)(y.$,{type:"default",icon:(0,r.jsx)(l.A,{size:12}),"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:a.isHelper?a.text:"".concat(n()(a.from).format("DD MMM, HH:mm")," - ").concat(n()(a.to||new Date).format("DD MMM, HH:mm"))})}),(0,r.jsxs)(g.hl,{className:"flex w-full p-0",side:"bottom",align:"center",portal:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"Logs.DatePickers.tsx",children:[(0,r.jsx)(f.z6,{onValueChange:e=>{let r=s.find(t=>t.text===e);t&&r&&t({to:r.calcTo(),from:r.calcFrom(),isHelper:!0,text:r.text}),w(!1)},value:a.isHelper?a.text:"",className:"border-r p-2 flex flex-col gap-px","data-sentry-element":"RadioGroup","data-sentry-source-file":"Logs.DatePickers.tsx",children:s.map(e=>(0,r.jsxs)(x.J,{className:(0,h.cn)("[&:has([data-state=checked])]:bg-background-overlay-hover [&:has([data-state=checked])]:text-foreground px-4 py-1.5 text-foreground-light flex items-center gap-2 hover:bg-background-overlay-hover hover:text-foreground transition-all rounded-sm text-xs",{"cursor-not-allowed pointer-events-none opacity-50":e.disabled}),children:[(0,r.jsx)(f.CU,{hidden:!0,value:e.text,disabled:e.disabled,"aria-disabled":e.disabled},e.text),e.text]},e.text))}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex p-2 gap-2 items-center",children:[(0,r.jsxs)("div",{className:"flex flex-grow *:flex-grow gap-2 font-mono",children:[(0,r.jsx)(p.A,{type:"start",startTime:T,endTime:C,time:T,setTime:D,setStartTime:D,setEndTime:R,startDate:b,endDate:S,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"}),(0,r.jsx)(p.A,{type:"end",startTime:T,endTime:C,time:C,setTime:R,setStartTime:D,setEndTime:R,startDate:b,endDate:S,"data-sentry-element":"TimeSplitInput","data-sentry-source-file":"Logs.DatePickers.tsx"})]}),(0,r.jsx)("div",{className:"flex-shrink",children:(0,r.jsx)(y.$,{icon:(0,r.jsx)(o.A,{size:14}),type:"text",size:"tiny",className:"px-1.5",onClick:()=>{D({HH:"00",mm:"00",ss:"00"}),R({HH:"00",mm:"00",ss:"00"})},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx"})})]}),(0,r.jsx)("div",{className:"p-2 border-t",children:(0,r.jsx)(m(),{inline:!0,selectsRange:!0,onChange:e=>{!function(e){let[t,s]=e;N(t),k(s)}(e)},dateFormat:"MMMM d, yyyy h:mm aa",dayClassName:()=>"cursor-pointer",startDate:b,endDate:S,renderCustomHeader:e=>{let{date:t,decreaseMonth:s,increaseMonth:a,prevMonthButtonDisabled:l,nextMonthButtonDisabled:o}=e;return(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsx)(y.$,{onClick:s,disabled:l,icon:(0,r.jsx)(i.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"}),(0,r.jsx)("span",{className:"text-sm text-foreground-light",children:n()(t).format("MMMM YYYY")}),(0,r.jsx)(y.$,{onClick:a,disabled:o,icon:(0,r.jsx)(d.A,{size:14,strokeWidth:2}),type:"text",size:"tiny",className:"px-1.5"})]})})},"data-sentry-element":"DatePicker","data-sentry-source-file":"Logs.DatePickers.tsx"})}),P&&(0,r.jsxs)("div",{className:"text-xs px-3 py-1.5 border-y bg-warning-300 text-warning-foreground border-warning-500 text-warning-600",children:["Large ranges may result in memory errors for ",(0,r.jsx)("br",{})," big projects."]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2 p-2 border-t",children:[b&&S?(0,r.jsx)(y.$,{type:"text",size:"tiny",onClick:M,className:(0,h.cn)({"text-brand-600":L||A}),children:L?"Copied!":A?"Pasted!":"Copy range"}):null,(0,r.jsx)(y.$,{type:"default",onClick:()=>{N(new Date),k(new Date)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Today"}),(0,r.jsx)(y.$,{onClick:function(){let e=b||new Date,s=S||new Date,r=new Date(e.setHours(+T.HH,+T.mm,+T.ss)),a=new Date(s.setHours(+C.HH,+C.mm,+C.ss));t({from:r.toISOString(),to:a.toISOString(),isHelper:!1}),w(!1)},"data-sentry-element":"Button","data-sentry-source-file":"Logs.DatePickers.tsx",children:"Apply"})]})]})]})]})}},41003:(e,t,s)=>{s.d(t,{y:()=>l});var r=s(80263),a=s(65842);let n=()=>(0,r.jsx)("div",{className:"relative flex h-4 w-32 items-center rounded border border-dashed border-stronger px-2","data-sentry-component":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"});function l(e){let{title:t="No results found",description:s="Try another search or adjust the filters"}=e;return(0,r.jsxs)("div",{className:"flex scale-100 flex-col items-center justify-center gap-6 text-center opacity-100 h-full","data-sentry-component":"LogsTableEmptyState","data-sentry-source-file":"LogsTableEmptyState.tsx",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 relative",children:[(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(n,{"data-sentry-element":"EmptyStateRow","data-sentry-source-file":"LogsTableEmptyState.tsx"}),(0,r.jsx)(a.A,{size:30,className:"absolute right-3 -bottom-2 text-foreground-lighter","data-sentry-element":"Search","data-sentry-source-file":"LogsTableEmptyState.tsx"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 px-5",children:[(0,r.jsx)("h3",{className:"text-lg text-foreground",children:t}),(0,r.jsx)("p",{className:"text-sm max-w-xs text-foreground-lighter",children:s})]})]})}},47781:(e,t,s)=>{s.d(t,{K:()=>p,T:()=>h});var r=s(80263),a=s(53239),n=s(3732),l=s(2),o=s(53434),i=s.n(o),d=s(27344),c=s.n(d),u=s(37361),m=s.n(u);i().extend(c()),i().extend(m());let x=e=>i().unix(Number(e)/1e3/1e3).toISOString(),f=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},p=e=>{let{utcTimestamp:t,format:s}=e,r=f(t)?x(t):t;return i().utc(r).local().format(s)},g=e=>{let{utcTimestamp:t,format:s}=e,r=f(t)?x(t):t;return i().utc(r).format(s)},y=e=>{let{utcTimestamp:t}=e,s=f(t)?x(t):t;return i().utc(s).fromNow()},h=e=>{let{utcTimestamp:t,className:s,displayAs:o="local",format:i="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,c=p({utcTimestamp:t,format:i}),u=g({utcTimestamp:t,format:i}),m=y({utcTimestamp:t}),[x,f]=(0,a.useState)("start"),h=(0,a.useRef)(null),j=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,a.useEffect)(()=>{let e=()=>{if(h.current){let e=h.current.getBoundingClientRect(),t=window.innerHeight;f(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let v=e=>{let{label:t,value:s}=e,[n,o]=(0,a.useState)(!1);return(0,r.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),navigator.clipboard.writeText(s),o(!0),setTimeout(()=>{o(!1)},1e3)},className:(0,l.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":n}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,r.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,r.jsx)("div",{className:"border-t w-full border-dashed z-10"}),n&&(0,r.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,r.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,r.jsxs)(n.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(n.k$,{asChild:!0,ref:h,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,r.jsx)("span",{children:"local"===o?p({utcTimestamp:t,format:d}):g({utcTimestamp:t,format:d})})}),(0,r.jsxs)(n.ZI,{align:x,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(v,{label:"UTC",value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(v,{label:j,value:c,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(v,{label:"Relative",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(v,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},50447:(e,t,s)=>{s.d(t,{A:()=>ei});var r=s(80263),a=s(60045),n=s(84305),l=s.n(n),o=s(40435),i=s(71547),d=s(39200),c=s(81372),u=s(53239),m=s(9711),x=s(24560),f=s(37034),p=s(89044),g=s(79319),y=s(90720),h=s(31301),j=s(65904),v=s(90206),w=s(11649),b=s(2),N=s(16601),S=s(79210),k=s(2902),T=s(47781);let D=e=>(0,r.jsxs)(k.T5,{"data-sentry-element":"RowLayout","data-sentry-component":"defaultRenderCell","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx",children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp,"data-sentry-element":"TimestampInfo","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx"}),(0,r.jsx)(k.gl,{className:"w-full",value:e.row.event_message,"data-sentry-element":"TextFormatter","data-sentry-source-file":"DefaultPreviewColumnRenderer.tsx"})]}),C=[{name:"default-preview-first-column",key:"default-preview-first-column",renderCell:D}],R=[{name:"auth-first-column",key:"auth-first-column",renderCell:e=>{var t;return e.row.level?(0,r.jsxs)(k.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),e.row.level&&(0,r.jsx)(k.YN,{value:e.row.level}),(0,r.jsx)(k.gl,{className:"w-full",value:"".concat(e.row.path?e.row.path+" | ":"").concat((null==(t=e.row.msg)?void 0:t.trim())||e.row.event_message)})]}):D(e)}}],L=[{name:"database-api-first-column",key:"database-api-first-column",renderCell:e=>e.row.status_code||e.row.method||e.row.path?(0,r.jsxs)(k.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(k.vm,{value:String(e.row.status_code)}),(0,r.jsx)(k.gl,{value:String(e.row.method)}),(0,r.jsx)(k.gl,{value:String(e.row.path)})]}):D(e)}],E=[{name:"database-postgres-first-column",key:"database-postgres-first-column",renderCell:e=>e.row.error_severity?(0,r.jsxs)(k.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(k.YN,{value:e.row.error_severity}),(0,r.jsx)(k.gl,{className:"w-full",value:e.row.event_message}),e.row.detail?(0,r.jsx)(k.gl,{value:e.row.detail}):null,e.row.hint?(0,r.jsx)(k.gl,{value:e.row.hint}):null]}):D(e)}],A=[{name:"functions-edge-first-column",key:"functions-edge-first-column",renderCell:e=>e.row.status_code||e.row.method?(0,r.jsxs)(k.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),(0,r.jsx)(k.vm,{value:String(e.row.status_code)}),(0,r.jsx)(k.gl,{value:String(e.row.method)}),(0,r.jsx)(k.gl,{value:String(e.row.id)})]}):D(e)}],_=[{name:"functions-logs-first-column",key:"functions-logs-first-column",renderCell:e=>e.row.event_type||e.row.level?(0,r.jsxs)(k.T5,{children:[(0,r.jsx)(T.T,{utcTimestamp:e.row.timestamp}),"uncaughtException"===e.row.event_type?(0,r.jsx)(k.YN,{value:e.row.event_type,uppercase:!1}):(0,r.jsx)(k.YN,{value:e.row.level}),(0,r.jsx)(k.gl,{className:"w-full",value:e.row.event_message})]}):D(e)}];var H=s(64238),M=s(23278),P=s(77096),z=s(93479),O=s(10002),I=s(78873),B=s(62719),F=s(66001),J=s(73969),W=s(16580),q=s(33656);let $=e=>{let{value:t,className:s}=e;return(0,r.jsx)("pre",{className:(0,b.cn)("px-1 bg-surface-300 w-full pt-1 max-w-full border-none text-xs prose-sm transition-all overflow-auto rounded-md",s),"data-sentry-component":"LogRowCodeBlock","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:JSON.stringify(t,null,2)})},G=()=>(0,r.jsx)(W.w,{className:"bg-border my-1","data-sentry-element":"Separator","data-sentry-component":"LogRowSeparator","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx"}),U=e=>{let{keyName:t,value:s,dataTestId:a}=e,{setSearch:n}=(0,F.B)(),l=async(e,t)=>{let{query:s}=t;n(s||"")},o="timestamp"===t||"created_at"===t||"updated_at"===t,i="object"==typeof s&&null!==s,d="status"===t||"status_code"===t,c="method"===t,m="path"===t,x="user_agent"===t,f="log-viewer-expanded-".concat(t),[p,g]=(0,u.useState)(()=>{try{var e;return JSON.parse(null!=(e=localStorage.getItem(f))?e:"false")}catch(e){return!1}}),[y,h]=(0,u.useState)(!1);return((0,u.useEffect)(()=>{localStorage.setItem(f,JSON.stringify(p))},[p,f]),i)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-foreground-lighter text-sm pl-3 py-2",children:t}),(0,r.jsxs)("div",{children:[(0,r.jsx)($,{className:(0,b.cn)("px-2.5",{"max-h-[80px]":!p,"max-h-[400px]":p}),value:s}),(0,r.jsx)(N.$,{className:"mt-1 w-full",size:"tiny",type:"outline",onClick:()=>g(!p),children:p?"Collapse":"Expand"})]})]}),(0,r.jsx)(G,{})]}):(0,r.jsxs)(q.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"PropertyRow","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:[(0,r.jsx)(q.ty,{className:"group w-full","data-testid":a,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:(0,r.jsx)("div",{className:"rounded-md w-full overflow-hidden",children:(0,r.jsxs)("div",{className:(0,b.cn)("flex h-10 w-full",{"flex-col gap-1.5 h-auto":p,"items-center group-hover:bg-surface-300 gap-4":!p}),children:[(0,r.jsx)("h3",{className:(0,b.cn)("pl-3 text-foreground-lighter text-sm text-left",{"h-10 flex items-center":p}),children:t}),(0,r.jsx)("div",{className:(0,b.cn)("text-xs flex-1 font-mono text-foreground pr-3",{"max-w-full text-left rounded-md p-2 bg-surface-300 text-xs w-full":p,"truncate text-right":!p,"text-brand-600":y}),children:p?(0,r.jsx)($,{value:s}):o?(0,r.jsx)(T.T,{className:"text-sm",utcTimestamp:s}):d||c?(0,r.jsx)("div",{className:"flex items-center gap-1 justify-end",children:(0,r.jsx)(k.vm,{value:s})}):(0,r.jsx)("div",{className:"truncate",children:JSON.stringify(s)})})]})})}),(0,r.jsxs)(q.SQ,{align:"start","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:[(0,r.jsxs)(q._2,{onClick:()=>{(0,O.l)(String(s),()=>{h(!0),J.oR.success("Copied to clipboard")}),setTimeout(()=>{h(!1)},1e3)},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:["Copy ",t]}),!i&&(0,r.jsxs)(q._2,{onClick:()=>{g(!p)},children:[p?"Collapse":"Expand"," value"]}),(m||c||x||d)&&(0,r.jsxs)(q._2,{onClick:()=>{l("search-input-change",{query:s})},children:["Search by ",t]})]}),(0,r.jsx)(G,{"data-sentry-element":"LogRowSeparator","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx"})]})},Y=e=>{var t,s;let{log:a}=e,{timestamp:n,event_message:l,metadata:o,id:i,status:d,...c}=a,u=null==a||null==(s=a.metadata)||null==(t=s[0])?void 0:t.log_file;return(0,r.jsxs)("div",{"data-testid":"log-selection",className:"p-2 flex flex-col","data-sentry-component":"DefaultPreviewSelectionRenderer","data-sentry-source-file":"DefaultPreviewSelectionRenderer.tsx",children:[(null==a?void 0:a.id)&&(0,r.jsx)(U,{keyName:"id",value:a.id},"id"),(null==a?void 0:a.status)&&(0,r.jsx)(U,{keyName:"status",value:a.status},"status"),(null==a?void 0:a.timestamp)&&(0,r.jsx)(U,{dataTestId:"log-selection-timestamp",keyName:"timestamp",value:a.timestamp},"timestamp"),Object.entries(c).map(e=>{let[t,s]=e;return(0,r.jsx)(U,{keyName:t,value:s},t)}),(null==a?void 0:a.event_message)&&(0,r.jsx)(U,{keyName:"event_message",value:a.event_message},"event_message"),!!u&&(0,r.jsx)(U,{keyName:"log_file",value:u},"log_file"),(null==a?void 0:a.metadata)&&(0,r.jsx)(U,{keyName:"metadata",value:a.metadata},"metadata")]})},V=e=>{let{log:t,onClose:s,queryType:a,isLoading:n,error:l}=e,[o,i]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>i(!1),2e3);return()=>clearTimeout(e)},[o]),(0,r.jsx)("div",{className:"relative flex h-full flex-grow flex-col overflow-y-scroll bg-surface-100 border-t","data-sentry-component":"LogSelection","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsx)("div",{className:"relative flex-grow flex flex-col h-full",children:(0,r.jsxs)(z.tU,{defaultValue:"details",className:"flex flex-col h-full","data-sentry-element":"Tabs_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:[(0,r.jsxs)(z.j7,{className:"px-2 pt-2 relative","data-sentry-element":"TabsList_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:[(0,r.jsx)(z.Xi,{className:"px-3",value:"details","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:"Details"}),(0,r.jsx)(z.Xi,{disabled:!t,className:"px-3",value:"raw","data-sentry-element":"TabsTrigger_Shadcn_","data-sentry-source-file":"LogSelection.tsx",children:"Raw"}),(0,r.jsxs)("div",{className:"*:px-1.5 *:text-foreground-lighter ml-auto flex gap-1 absolute right-2 top-2",children:[(0,r.jsx)(g.G,{disabled:!t||n,type:"text",tooltip:{content:{text:n?"Loading log...":"Copy as JSON"}},onClick:()=>{i(!0),(0,O.l)(JSON.stringify(t,null,2))},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"LogSelection.tsx",children:o?(0,r.jsx)(H.A,{size:14,strokeWidth:2}):(0,r.jsx)(c.A,{size:14,strokeWidth:2})}),(0,r.jsx)(N.$,{type:"text",onClick:s,"data-sentry-element":"Button","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsx)(M.A,{size:14,strokeWidth:2,"data-sentry-element":"X","data-sentry-source-file":"LogSelection.tsx"})})]})]}),(0,r.jsx)("div",{className:"flex-1 h-full",children:n?(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)(B.y,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.av,{className:"space-y-6 h-full",value:"details",children:(0,r.jsx)(()=>{var e,s,n,o,i,d,c,u,m,x,f,p,g,y,h,j,v,w,b,N,S,k,T,D,C,R,L,E,A,_,H,M,P,z;if(l)return(0,r.jsx)(Q,{error:l});if(!t)return(0,r.jsx)(Z,{});switch(a){case"api":let O=null==t||null==(o=t.metadata)||null==(n=o[0])||null==(s=n.response)||null==(e=s[0])?void 0:e.status_code,I=null==t||null==(u=t.metadata)||null==(c=u[0])||null==(d=c.request)||null==(i=d[0])?void 0:i.method,B=null==t||null==(p=t.metadata)||null==(f=p[0])||null==(x=f.request)||null==(m=x[0])?void 0:m.path,F=null==t||null==(j=t.metadata)||null==(h=j[0])||null==(y=h.request)||null==(g=y[0])?void 0:g.headers[0].user_agent,J=null==t||null==(k=t.metadata)||null==(S=k[0])||null==(N=S.response)||null==(b=N[0])||null==(w=b.headers)||null==(v=w[0])?void 0:v.x_sb_error_code,{id:W,metadata:q,timestamp:$,event_message:G,...U}=t,V={id:W,status:O,method:I,path:B,user_agent:F,timestamp:$,event_message:G,metadata:q,...J?{error_code:J}:null,...U};return(0,r.jsx)(Y,{log:V});case"database":let X=null==t||null==(R=t.metadata)||null==(C=R[0])||null==(D=C.parsed)||null==(T=D[0])?void 0:T.hint,K=null==t||null==(_=t.metadata)||null==(A=_[0])||null==(E=A.parsed)||null==(L=E[0])?void 0:L.detail,ee=null==t||null==(z=t.metadata)||null==(P=z[0])||null==(M=P.parsed)||null==(H=M[0])?void 0:H.query,et={...X&&{hint:X},...K&&{detail:K},...ee&&{query:ee},...t};return(0,r.jsx)(Y,{log:et});default:return(0,r.jsx)(Y,{log:t})}},{})}),(0,r.jsx)(z.av,{value:"raw",children:(0,r.jsx)(I.N,{hideLineNumbers:!0,language:"json",className:"prose w-full pt-0 max-w-full border-none",children:JSON.stringify(t,null,2)})})]})})]})})})};function Z(e){let{title:t="Select an Event",message:s="Select an Event to view the complete JSON payload"}=e;return(0,r.jsx)("div",{className:(0,b.cn)("flex h-full w-full flex-col items-center justify-center gap-2 overflow-y-scroll text-center transition-all px-4"),"data-sentry-component":"LogDetailEmptyState","data-sentry-source-file":"LogSelection.tsx",children:(0,r.jsxs)("div",{className:(0,b.cn)("flex w-full max-w-sm flex-col items-center justify-center gap-6 text-center transition-all delay-300 duration-500"),children:[(0,r.jsxs)("div",{className:"relative flex h-4 w-32 items-center rounded border border-control px-2",children:[(0,r.jsx)("div",{className:"h-0.5 w-2/3 rounded-full bg-surface-300"}),(0,r.jsx)("div",{className:"absolute right-1 -bottom-4",children:(0,r.jsx)(P.A,{size:"24",strokeWidth:1,"data-sentry-element":"MousePointerClick","data-sentry-source-file":"LogSelection.tsx"})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-sm text-foreground",children:t}),(0,r.jsx)("p",{className:"text-xs text-foreground-lighter",children:s})]})]})})}function Q(e){let{error:t}=e;return(0,r.jsx)("pre",{"data-sentry-component":"LogErrorState","data-sentry-source-file":"LogSelection.tsx",children:JSON.stringify(t,null,2)})}var X=s(92589);let K=e=>{let{error:t}=e;return(0,r.jsx)("div",{className:"w-full prose min-w-full text-foreground text-sm","data-sentry-component":"DefaultErrorRenderer","data-sentry-source-file":"DefaultErrorRenderer.tsx",children:(0,r.jsx)(I.N,{title:"Error fetching logs",language:"json",hideLineNumbers:!0,value:"string"==typeof t?t:JSON.stringify(t,null,2),className:"w-full font-mono","data-sentry-element":"CodeBlock","data-sentry-source-file":"DefaultErrorRenderer.tsx"})})};var ee=s(69751),et=s(68656),es=s(77690);let er=(0,u.createContext)({chevronAlign:"left",justified:!0,type:"default"});function ea(e){let{children:t,className:s,onChange:a,openBehaviour:n="multiple",type:l="default",defaultValue:o,justified:i=!1,chevronAlign:d="left"}=e,c=[(0,es.A)("accordion").variants[l].base];return s&&c.push(s),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(ee.bL,{type:n,onValueChange:function(e){a&&a(e),e==typeof String&&e.split(" ")},defaultValue:o,className:c.join(" "),"data-sentry-element":"unknown","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)(er.Provider,{value:{chevronAlign:d,justified:i,type:l,defaultValue:o},"data-sentry-element":"unknown","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)("div",{children:t})})})})}ea.Item=function(e){let{children:t,className:s,header:a,id:n,disabled:l}=e,o=(0,es.A)("accordion"),[i,d]=(0,u.useState)(!1),{type:c,justified:m,chevronAlign:x}=(0,u.useContext)(er),f=[o.variants[c].trigger];m&&f.push(o.justified),s&&f.push(s);let p=[o.chevron.base,o.chevron.align[x]];return i&&!l&&p.unshift("!rotate-180"),(0,r.jsxs)(ee.q7,{value:n,className:o.variants[c].container,disabled:l,onClick:()=>{d(!i)},"data-sentry-element":"unknown","data-sentry-component":"Item","data-sentry-source-file":"Accordion.tsx",children:[(0,r.jsxs)(ee.l9,{className:f.join(" "),"data-sentry-element":"unknown","data-sentry-source-file":"Accordion.tsx",children:[a,!l&&(0,r.jsx)(et.A,{"aria-hidden":!0,className:p.join(" "),strokeWidth:2})]}),(0,r.jsx)(ee.UC,{className:o.variants[c].content,"data-sentry-element":"unknown","data-sentry-source-file":"Accordion.tsx",children:(0,r.jsx)("div",{className:o.variants[c].panel,children:t})})]})};var en=s(71171);let el=e=>{let{error:t,isCustomQuery:s}=e;return(0,r.jsxs)("div",{className:"flex flex-col gap-2 text-foreground-light","data-sentry-component":"ResourcesExceededErrorRenderer","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 text-sm",children:[(0,r.jsx)("p",{children:"This query requires too much memory to be executed."}),(0,r.jsx)("p",{children:s?"Avoid selecting entire objects and instead select specific keys using dot notation.":"Avoid querying across a large datetime range."}),!s&&(0,r.jsx)("p",{children:"Please contact support if this error persists."})]}),(0,r.jsx)(ea,{className:"text-sm",justified:!1,openBehaviour:"multiple",type:"default",chevronAlign:"left",size:"small",iconPosition:"left","data-sentry-element":"Accordion","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:(0,r.jsx)(ea.Item,{id:"1",header:"Full error message","data-sentry-element":"unknown","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx",children:(0,r.jsx)(en.A.TextArea,{size:"tiny",value:JSON.stringify(t,null,2),borderless:!0,className:"mt-4 w-full font-mono",copy:!0,rows:5,"data-sentry-element":"unknown","data-sentry-source-file":"ResourcesExceededErrorRenderer.tsx"})})})]})};var eo=s(41003);let ei=e=>{let{data:t=[],queryType:s,onHistogramToggle:n,isHistogramShowing:k,isLoading:T,isSaving:D,error:H,projectRef:M,onRun:P,onSave:z,hasEditorValue:O,className:I,collectionName:B,EmptyState:F,showHeader:J=!0,showHistogramToggle:W=!0,selectedLog:q,isSelectedLogLoading:$,selectedLogError:G,onSelectedLogChange:U}=e,{ref:Y}=(0,p.g)(),{profile:Z}=(0,w.xc)(),[Q]=(0,h.t)(),{show:ee}=(0,m.EF)(),[et,es]=(0,u.useState)(),[er,ea]=(0,u.useState)(!1),[en,ei]=(0,u.useState)(null),ed=(0,j.SE)(a.aG.CREATE,"user_content",{resource:{type:"log_sql",owner_id:null==Z?void 0:Z.id},subject:{id:null==Z?void 0:Z.id}}),ec=t[0],eu=Object.keys(function(){if(!ec)return{};let{timestamp:e,...t}=ec;return e?{timestamp:e,...t}:ec}()||{}),em=eu.includes("id"),ex=eu.includes("timestamp"),ef="logs-explorer-context-menu",ep=eu.map((e,t)=>({key:"logs-column-".concat(t),name:e,resizable:!0,renderCell:t=>{let{row:s}=t;return(0,r.jsx)("span",{onContextMenu:e=>ee(e,{id:ef}),children:ew(null==s?void 0:s[e])})},renderHeaderCell:t=>(0,r.jsx)("div",{className:"flex items-center",children:e}),minWidth:128})),eg=ep;if(s)switch(s){case"warehouse":eg=ep;break;case"api":eg=L;break;case"database":case"pg_cron":eg=E;break;case"fn_edge":eg=A;break;case"functions":eg=_;break;case"auth":eg=R;break;default:eg=ec&&(0,X.Nd)(ec)?C:ep}let[ey,eh]=(0,u.useMemo)(()=>{let e=[...new Set(t)];if(!em)return[e,{}];let s=e.reduce((e,t)=>(e[t.id]=t,e),{});return[e,s]},[t,em]),ej=(0,u.useMemo)(()=>em&&ex?Object.values(eh).sort((e,t)=>t.timestamp-e.timestamp):ey,[ey,em,ex,eh]),ev=(0,u.useCallback)((e,t)=>(0,r.jsx)(x.fI,{...t,isRowSelected:!1,selectedCellIdx:void 0},e),[]),ew=e=>e&&"object"==typeof e?JSON.stringify(e):null===e?"NULL":String(e);function eb(e){ei(e),null==U||U(e)}let eN=(0,u.useCallback)(e=>{if(!ej.length||!en)return;let t=ej.findIndex(e=>l()(e,en));-1!==t&&("ArrowUp"===e.key&&t>0?eb(ej[t-1]):"ArrowDown"===e.key&&t<ej.length-1&&eb(ej[t+1]))},[ej,en,eb]);return((0,u.useEffect)(()=>{(q||$)&&ea(!0),$||q||ei(null)},[q,$]),(0,u.useEffect)(()=>(window.addEventListener("keydown",eN),()=>{window.removeEventListener("keydown",eN)}),[eN]),(0,u.useEffect)(()=>{if(!T&&!en){let e=t.find(e=>e.id===Q);e&&ei(e)}},[T]),t)?(0,r.jsxs)("section",{className:"h-full flex w-full flex-col flex-1","data-sentry-component":"LogTable","data-sentry-source-file":"LogTable.tsx",children:[!s&&(0,r.jsx)(()=>(0,r.jsxs)("div",{className:(0,b.cn)("flex w-full items-center justify-between border-t bg-surface-100 px-5 py-2",I,{hidden:!J}),"data-sentry-component":"LogsExplorerTableHeader","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(y.b,{type:"text",text:"Results ".concat(t&&t.length?"(".concat(t.length,")"):""),results:t,fileName:"supabase-logs-".concat(Y,".csv"),"data-sentry-element":"DownloadResultsButton","data-sentry-source-file":"LogTable.tsx"})}),W&&(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(N.$,{type:"default",icon:k?(0,r.jsx)(o.A,{}):(0,r.jsx)(i.A,{}),onClick:n,children:"Histogram"})}),(0,r.jsxs)("div",{className:"space-x-2",children:[p.pe&&(0,r.jsx)(g.G,{type:"default",onClick:z,loading:D,disabled:!ed||!O,tooltip:{content:{side:"bottom",text:ed?void 0:"You need additional permissions to save your query"}},children:"Save query"}),(0,r.jsx)(N.$,{title:"run-logs-query",type:O?"primary":"alternative",disabled:!O,onClick:P,iconRight:(0,r.jsx)(d.A,{size:12}),loading:T,"data-sentry-element":"Button","data-sentry-source-file":"LogTable.tsx",children:"Run"})]})]}),{}),(0,r.jsxs)(S.HK,{direction:"horizontal","data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsxs)(S.wV,{defaultSize:q?60:100,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"LogTable.tsx",children:[(0,r.jsx)(x.Ay,{role:"table",style:{height:"100%"},className:(0,b.cn)("flex-1 flex-grow h-full border-0",{"data-grid--simple-logs":s,"data-grid--logs-explorer":!s}),rowHeight:40,headerRowHeight:28*!s,onSelectedCellChange:e=>{es(e)},onCellClick:e=>{eb(e.row)},columns:eg,rowClass:e=>(0,b.cn)("font-mono tracking-tight !bg-studio hover:!bg-surface-100 cursor-pointer",{"!bg-surface-200 rdg-row--focused":l()(e,en)}),rows:ej,rowKeyGetter:e=>em?e.id:JSON.stringify(e),renderers:{renderRow:ev,noRowsFallback:T?null:(0,r.jsxs)(r.Fragment,{children:[0===ej.length&&!H&&(0,r.jsx)(()=>F||(0,r.jsx)(eo.y,{}),{}),H&&(0,r.jsx)(()=>{var e;if(!H)return null;let t={isCustomQuery:!s,error:H};return"object"==typeof H&&(null==(e=H.error)?void 0:e.errors.find(e=>"resourcesExceeded"===e.reason))?(0,r.jsx)(el,{...t}):(0,r.jsx)("div",{className:"text-foreground flex gap-2 font-mono p-4","data-sentry-component":"RenderErrorAlert","data-sentry-source-file":"LogTable.tsx",children:(0,r.jsx)(K,{...t,"data-sentry-element":"DefaultErrorRenderer","data-sentry-source-file":"LogTable.tsx"})})},{})]})},"data-sentry-element":"DataGrid","data-sentry-source-file":"LogTable.tsx"}),(0,f.createPortal)((0,r.jsx)(m.W1,{id:ef,animation:!1,children:(0,r.jsxs)(m.q7,{onClick:()=>{if(et){var e;let{row:t,column:s}=et,r=ew(null!=(e=null==t?void 0:t[s.name])?e:"");(0,v.lW)(r)}},children:[(0,r.jsx)(c.A,{size:14}),(0,r.jsx)("span",{className:"ml-2 text-xs",children:"Copy cell content"})]})}),document.body)]}),(0,r.jsx)(S.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"LogTable.tsx"}),er&&(0,r.jsx)(S.wV,{minSize:40,defaultSize:50,children:(0,r.jsx)(V,{isLoading:$||!1,projectRef:M,onClose:()=>{null==U||U(null),ea(!1)},log:q,error:G,queryType:s,collectionName:B})})]})]}):null}},62761:(e,t,s)=>{s.d(t,{A:()=>a});var r=s(80263);let a=e=>{let{children:t,active:s,className:a}=e;return(0,r.jsx)("div",{className:[a,"flex h-full flex-grow transition-opacity ",s?"opacity-30":"opacity-100"].join(" "),"data-sentry-component":"LoadingOpacity","data-sentry-source-file":"LoadingOpacity.tsx",children:t})}},66001:(e,t,s)=>{s.d(t,{B:()=>o});var r=s(34164);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,r.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),l=e=>(0,r.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function o(){let[e,t]=(0,r.ZA)("s",n(a.search)),[s,o]=(0,r.ZA)("its",n(a.timestampStart)),[i,d]=(0,r.ZA)("ite",n(a.timestampEnd)),[c,u]=(0,r.ZA)("log",n("")),[m,x]=(0,r.ZA)("f",l(a.filters)),f=e||a.search,p=s||a.timestampStart,g=i||a.timestampEnd,y=m||a.filters,h=e=>{t(e||a.search)},j=e=>{x(e||a.filters)};return{search:f,timestampStart:p,timestampEnd:g,selectedLogId:c||null,filters:y,setSearch:h,setTimeRange:(e,t)=>{o(e||a.timestampStart),d(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:j,updateFilter:(e,t)=>{j({...y,[e]:t})},reset:()=>{h(a.search),o(a.timestampStart),d(a.timestampEnd),u(""),x(a.filters)}}}},90720:(e,t,s)=>{s.d(t,{b:()=>y});var r=s(80263),a=s(95137),n=s.n(a),l=s(10822),o=s(68656),i=s(81372),d=s(77406),c=s(77191),u=s.n(c),m=s(53239),x=s(73969),f=s(90206),p=s(33656),g=s(16601);let y=e=>{let{iconOnly:t=!1,type:s="default",text:a="Export",align:c="start",results:y,fileName:h,onDownloadAsCSV:j,onCopyAsMarkdown:v,onCopyAsJSON:w}=e,b=y.map(e=>{let t={...e};return Object.keys(e).forEach(s=>{"object"==typeof e[s]&&(t[s]=JSON.stringify(e[s]))}),t}),N=(0,m.useMemo)(()=>{if(y){let e=Array.from(y)[0];if(e)return Object.keys(e)}},[y]),S=()=>{let e=new Blob([u().unparse(b,{columns:N})],{type:"text/csv;charset=utf-8;"});n()(e,"".concat(h,".csv")),x.oR.success("Downloading results as CSV"),null==j||j()};return(0,r.jsxs)(p.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"DownloadResultsButton","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(p.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DownloadResultsButton.tsx",children:(0,r.jsx)(g.$,{type:s,icon:t?(0,r.jsx)(l.A,{}):void 0,iconRight:t?void 0:(0,r.jsx)(o.A,{}),disabled:0===y.length,className:t?"w-7":"","data-sentry-element":"Button","data-sentry-source-file":"DownloadResultsButton.tsx",children:!t&&a})}),(0,r.jsxs)(p.SQ,{align:c,className:"w-44","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsxs)(p._2,{className:"gap-x-2",onClick:()=>S(),"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(l.A,{size:14,"data-sentry-element":"Download","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Download CSV"})]}),(0,r.jsxs)(p._2,{onClick:()=>{if(navigator){0==b.length&&(0,x.oR)("Results are empty");let e=Object.keys(b[0]),t=b.map(t=>{let s=[];return e.forEach(e=>s.push(t[e])),s}),s=[e].concat(t),r=(0,d.Q)(s);(0,f.lW)(r,()=>{x.oR.success("Copied results to clipboard"),null==v||v()})}},className:"gap-x-2","data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(i.A,{size:14,"data-sentry-element":"Clipboard","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Copy as markdown"})]}),(0,r.jsxs)(p._2,{onClick:()=>{if(navigator){if(0===y.length)return(0,x.oR)("Results are empty");(0,f.lW)(JSON.stringify(y,null,2),()=>{x.oR.success("Copied results to clipboard"),null==w||w()})}},className:"gap-x-2","data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"DownloadResultsButton.tsx",children:[(0,r.jsx)(i.A,{size:14,"data-sentry-element":"Clipboard","data-sentry-source-file":"DownloadResultsButton.tsx"}),(0,r.jsx)("p",{children:"Copy as JSON"})]})]})]})}}}]);