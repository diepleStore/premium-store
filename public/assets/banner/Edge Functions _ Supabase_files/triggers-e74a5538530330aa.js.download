!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="12d66a9a-da91-48fe-92f8-7dee25ce51b4",e._sentryDebugIdIdentifier="sentry-dbid-12d66a9a-da91-48fe-92f8-7dee25ce51b4")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4253,6106],{245:(e,t,n)=>{"use strict";n.d(t,{e:()=>function e(){let t=[],n={addEventListener:(e,t,r,s)=>(e.addEventListener(t,r,s),n.add(()=>e.removeEventListener(t,r,s))),requestAnimationFrame(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=requestAnimationFrame(...t);return n.add(()=>cancelAnimationFrame(s))},nextFrame(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.requestAnimationFrame(()=>n.requestAnimationFrame(...t))},setTimeout(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let s=setTimeout(...t);return n.add(()=>clearTimeout(s))},microTask(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];let a={current:!0};return(0,r._)(()=>{a.current&&t[0]()}),n.add(()=>{a.current=!1})},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add(()=>{Object.assign(e.style,{[t]:r})})},group(t){let n=e();return t(n),this.add(()=>n.dispose())},add:e=>(t.push(e),()=>{let n=t.indexOf(e);if(n>=0)for(let e of t.splice(n,1))e()}),dispose(){for(let e of t.splice(0))e()}};return n}});var r=n(91132)},2468:(e,t,n)=>{"use strict";n.d(t,{e:()=>c});var r=n(63719),s=n(56947),a=n(68324),i=n(77570);let l=r.A.functions.list();async function o(e,t,n){let{projectRef:r,connectionString:s}=e,a=new Headers(n),{result:o}=await (0,i.E)({projectRef:r,connectionString:s,sql:l.sql,queryKey:["database-functions"]},t,a);return o}let c=function(e){let{projectRef:t,connectionString:n}=e,{enabled:r=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,s.I)(a.c.databaseFunctions(t),e=>{let{signal:r}=e;return o({projectRef:t,connectionString:n},r)},{enabled:r&&void 0!==t,...i})}},3548:(e,t,n)=>{"use strict";n.d(t,{fl:()=>l,oR:()=>o});var r=n(56947),s=n(3807),a=n(71516);async function i(e,t){let{projectRef:n,connectionString:r}=e;if(!n)throw Error("projectRef is required");let a=new Headers;r&&a.set("x-connection-encrypted",r);let{data:i,error:l}=await (0,s.Jt)("/platform/pg-meta/{ref}/triggers",{params:{header:{"x-connection-encrypted":r},path:{ref:n},query:void 0},headers:a,signal:t});return l&&(0,s.H4)(l),i}let l=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)(a.U.list(t),e=>{let{signal:r}=e;return i({projectRef:t,connectionString:n},r)},{select:e=>e.filter(e=>"supabase_functions"===e.function_schema&&("net"!==e.schema||0===e.function_args.length)),enabled:s&&void 0!==t,...l})},o=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.I)(a.U.list(t),e=>{let{signal:r}=e;return i({projectRef:t,connectionString:n},r)},{enabled:s&&void 0!==t,...l})}},6358:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/triggers",function(){return n(7712)}])},6506:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(80263),s=n(52385),a=n(22775),i=n(67144),l=n(73900),o=n(55307),c=n(83634),d=n(29730),u=n(88601),m=n(59304),f=n(24726);let h=()=>{let e=(0,c.KT)(),t=(0,s.useRouter)().pathname.split("/")[4],{data:n}=(0,l.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,o.Q)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=n?n:[]).find(e=>"pg_net"===e.name),h=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,g=(0,a.p4)(),x=(0,f._)("enablePgReplicate");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.l,{page:t,menu:(0,m.k)(e,{pgNetExtensionExists:u,pitrEnabled:h,columnLevelPrivileges:g,enablePgReplicate:x}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},g=(0,d.r)(e=>{let{children:t}=e;return(0,r.jsx)(u.A,{product:"Database",productMenu:(0,r.jsx)(h,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:t})})},7298:(e,t,n)=>{"use strict";n.d(t,{k:()=>l});var r=n(34164),s=n(53239),a=n(89044);let i=e=>(0,r.ZA)("schema",r.tU.withDefault(e)),l=()=>{let{ref:e}=(0,a.g)(),t=e&&e.length>0&&window.localStorage.getItem(a.rS.LAST_SELECTED_SCHEMA(e))||"public",[n,r]=i((0,s.useMemo)(()=>t,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(a.rS.LAST_SELECTED_SCHEMA(e),n)},[n,e]),{selectedSchema:n,setSelectedSchema:r}}},7708:(e,t,n)=>{"use strict";n.d(t,{R:()=>d});var r=n(32144),s=n(80251),a=n(73969),i=n(63719),l=n(71516),o=n(77570);async function c(e){let{trigger:t,projectRef:n,connectionString:r}=e,{sql:s}=i.A.triggers.remove(t),{result:a}=await (0,o.E)({projectRef:n,connectionString:r,sql:s,queryKey:["trigger","delete",t.id]});return a}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,r.jE)();return(0,s.n)(e=>c(e),{async onSuccess(t,n,r){let{projectRef:s}=n;await i.invalidateQueries(l.U.list(s)),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?a.oR.error("Failed to delete database trigger: ".concat(e.message)):t(e,n,r)},...n})}},7712:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e2});var r=n(80263),s=n(60045),a=n(53239),i=n(22775),l=n(73969),o=n(45969),c=n(7708),d=n(56784);let u=e=>{let{trigger:t,visible:n,setVisible:s}=e,{project:a}=(0,o.Om)(),{name:i,schema:u}=null!=t?t:{},{mutate:m,isLoading:f}=(0,c.R)();async function h(){return a?t?void m({projectRef:a.ref,connectionString:a.connectionString,trigger:t},{onSuccess:()=>{l.oR.success("Successfully removed ".concat(i)),s(!1)}}):console.error("Trigger ID is required"):console.error("Project is required")}return(0,r.jsx)(d.A,{variant:"warning",visible:n,onCancel:()=>s(!n),onConfirm:h,title:"Delete this trigger",loading:f,confirmLabel:"Delete trigger ".concat(i),confirmPlaceholder:"Type in name of trigger",confirmString:null!=i?i:"",text:(0,r.jsxs)(r.Fragment,{children:["This will delete your trigger called"," ",(0,r.jsx)("span",{className:"text-bold text-foreground",children:i})," of schema"," ",(0,r.jsx)("span",{className:"text-bold text-foreground",children:u})]}),alert:{title:"You cannot recover this trigger once deleted."},"data-sentry-element":"TextConfirmModal","data-sentry-component":"DeleteTrigger","data-sentry-source-file":"DeleteTrigger.tsx"})};var m=n(32981),f=n(84238),h=n(87494),g=n(39353);let x=e=>{let{icon:t,text:n}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-center flex-row py-4 space-x-2","data-sentry-component":"FormBoxEmpty","data-sentry-source-file":"FormBoxEmpty.tsx",children:[(0,r.jsx)("div",{className:"relative bg-surface-100 text-foreground-lighter w-6 h-6 rounded-full flex items-center justify-center",children:t}),(0,r.jsx)("p",{className:"text-foreground-light",children:n})]})};var p=n(86645),v=n(32144),j=n(80251),y=n(63719),b=n(71516),N=n(77570);async function w(e){let{originalTrigger:t,projectRef:n,connectionString:r,payload:s}=e,{sql:a}=y.A.triggers.update(t,s),{result:i}=await (0,N.E)({projectRef:n,connectionString:r,sql:a,queryKey:["trigger","update",t.id]});return i}let S=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,v.jE)();return(0,j.n)(e=>w(e),{async onSuccess(t,n,s){let{projectRef:a}=n;await r.invalidateQueries(b.U.list(a)),await (null==e?void 0:e(t,n,s))},async onError(e,n,r){void 0===t?l.oR.error("Failed to update database trigger: ".concat(e.message)):t(e,n,r)},...n})};var _=n(45276),A=n(83634),E=n(36365),C=n(76828),T=n(85669),k=n(49189),F=n(79295),q=n(16580),R=n(44728),L=n(2),P=n(16601),M=n(27787),I=n(20613),O=n(89044),D=n(76803),z=n.n(D),$=n(86727),W=n.n($),Y=n(63320),B=n.n(Y),U=n(52385),H=n(35091),V=n(20829),G=n(24059),X=n(62445),K=n(2468),Q=n(9678),J=n(68656);let Z=e=>{let{visible:t,onChange:n,setVisible:s}=e,a=(0,A.KT)(),{data:i=[]}=(0,K.e)({projectRef:null==a?void 0:a.ref,connectionString:null==a?void 0:a.connectionString}),l=i.filter(e=>"trigger"===e.return_type),o=l.length>=1,c=z()(W()(l,"schema"),"schema"),d=e=>{let r=l.find(t=>t.id===e);r&&n(r),s(!t)};return(0,r.jsx)(H.Ay,{size:"large",header:"Pick a function",visible:t,onCancel:()=>s(!t),className:"hooks-sidepanel","data-sentry-element":"SidePanel","data-sentry-component":"ChooseFunctionForm","data-sentry-source-file":"ChooseFunctionForm.tsx",children:(0,r.jsx)("div",{className:"py-6",children:o?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(ee,{}),c.map(e=>(0,r.jsx)(en,{schema:e,functions:l.filter(t=>t.schema==e),selectFunction:d},e))]}):(0,r.jsx)(et,{})})})},ee=()=>{let{ref:e}=(0,O.g)();return(0,r.jsx)("div",{className:"px-6","data-sentry-component":"NoticeBox","data-sentry-source-file":"ChooseFunctionForm.tsx",children:(0,r.jsx)(G.A,{icon:(0,r.jsx)(Q.A,{size:"20",strokeWidth:1.5}),title:"Only functions that return a trigger will be displayed below",description:"You can make functions by using the Database Functions",button:(0,r.jsx)(P.$,{asChild:!0,type:"default",children:(0,r.jsx)(B(),{href:"/project/".concat(e,"/database/functions"),children:"Go to Functions"})}),"data-sentry-element":"InformationBox","data-sentry-source-file":"ChooseFunctionForm.tsx"})})},et=()=>{let e=(0,U.useRouter)(),{ref:t}=e.query;return(0,r.jsx)(V.A,{title:"No Trigger Functions found in database",ctaButtonLabel:"Create a trigger function",onClickCta:()=>{e.push("/project/".concat(t,"/database/functions"))},"data-sentry-element":"ProductEmptyState","data-sentry-component":"NoFunctionsState","data-sentry-source-file":"ChooseFunctionForm.tsx",children:(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"You will need to create a trigger based function before you can add it to your trigger."})})},en=e=>{let{schema:t,functions:n,selectFunction:s}=e;return(0,r.jsxs)("div",{className:"space-y-4","data-sentry-component":"SchemaFunctionGroup","data-sentry-source-file":"ChooseFunctionForm.tsx",children:[(0,r.jsxs)("div",{className:"sticky top-0 flex items-center space-x-1 px-6 backdrop-blur backdrop-filter",children:[(0,r.jsx)("h5",{className:"text-foreground-light",children:"schema"}),(0,r.jsx)("h5",{children:t})]}),(0,r.jsx)("div",{className:"space-y-0 divide-y border-t border-b border-default",children:n.map(e=>(0,r.jsx)(er,{id:e.id,completeStatement:e.complete_statement,name:e.name,onClick:s},e.id))})]})},er=e=>{let{id:t,completeStatement:n,name:s,onClick:i}=e,[l,o]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"cursor-pointer rounded p-3 px-6 hover:bg-studio",onClick:()=>i(t),"data-sentry-component":"Function","data-sentry-source-file":"ChooseFunctionForm.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex items-center justify-center rounded bg-foreground p-1 text-background",children:(0,r.jsx)(f.A,{strokeWidth:2,size:14,"data-sentry-element":"Terminal","data-sentry-source-file":"ChooseFunctionForm.tsx"})}),(0,r.jsx)("p",{className:"mb-0 text-sm",children:s})]}),(0,r.jsx)(P.$,{type:"text",onClick:e=>{e.stopPropagation(),o(!l)},icon:(0,r.jsx)(J.A,{className:l?"rotate-180 transform":"rotate-0 transform"}),"data-sentry-element":"Button","data-sentry-source-file":"ChooseFunctionForm.tsx",children:l?"Hide definition":"View definition"})]}),(0,r.jsx)(I.e,{show:l,enter:"transition ease-out duration-300",enterFrom:"transform opacity-0",enterTo:"transform opacity-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100",leaveTo:"transform opacity-0","data-sentry-element":"Transition","data-sentry-source-file":"ChooseFunctionForm.tsx",children:(0,r.jsx)("div",{className:"mt-4 h-64 border border-default",children:(0,r.jsx)(X.A,{defaultValue:n,readOnly:!0,contextmenu:!1,"data-sentry-element":"SqlEditor","data-sentry-source-file":"ChooseFunctionForm.tsx"})})})]})},es=[{value:"INSERT",label:"Insert",description:"Any insert operation on the table"},{value:"UPDATE",label:"Update",description:"Any update operation of any column on the table"},{value:"DELETE",label:"Delete",description:"Any delete operation of a record"}],ea=[{value:"BEFORE",label:"Before the event",description:"Trigger fires before the operation is attempted"},{value:"AFTER",label:"After the event",description:"Trigger fires before the operation has completed"}],ei=[{value:"ROW",label:"Row",description:"Fires once for each processed row"},{value:"STATEMENT",label:"Statement",description:"Fires once for each statement"}],el=[{value:"ORIGIN",label:"Origin",description:"This is the default behaviour"},{value:"REPLICA",label:"Replica",description:'Will only fire if the session is in "replica" mode'},{value:"ALWAYS",label:"Always",description:"Will fire regardless of the replication role"},{value:"DISABLED",label:"Disabled",description:"Will not fire"}],eo="create-trigger",ec=g.Ik({name:g.Yj().min(1,"Please provide a name for your trigger").regex(/^\S+$/,"Name should not contain spaces or whitespaces"),schema:g.Yj(),table:g.Yj(),activation:g.k5(["BEFORE","AFTER","INSTEAD OF"]),enabled_mode:g.k5(["ORIGIN","REPLICA","ALWAYS","DISABLED"]),orientation:g.k5(["ROW","STATEMENT"]),function_name:g.Yj().min(1,"Please select a database function for your trigger to call"),function_schema:g.Yj(),events:g.YO(g.Yj()).min(1,"Please select at least one event"),tableId:g.Yj().optional()}),ed={name:"",schema:"",table:"",activation:"AFTER",orientation:"ROW",function_name:"",function_schema:"",enabled_mode:"ORIGIN",events:[]},eu=e=>{let{selectedTrigger:t,open:n,setOpen:s}=e,i=(0,A.KT)(),[o,c]=(0,a.useState)(!1),{mutate:d,isLoading:u}=(0,p.Y)({onSuccess:e=>{l.oR.success("Successfully created trigger ".concat(e.name)),s(!1)},onError:e=>{l.oR.error("Failed to create trigger: ".concat(e.message))}}),{mutate:g,isLoading:v}=S({onSuccess:e=>{l.oR.success("Successfully updated trigger ".concat(e.name)),s(!1)},onError:e=>{l.oR.error("Failed to update trigger: ".concat(e.message))}}),{data:j=[],isSuccess:y}=(0,_.LW)({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString}),b=j.sort((e,t)=>e.schema.localeCompare(t.schema)).filter(e=>!E.i.includes(e.schema)),N=!!t,w=(0,h.mN)({mode:"onSubmit",reValidateMode:"onSubmit",resolver:(0,m.u)(ec),defaultValues:ed}),{function_name:I,function_schema:O}=w.watch(),D=async e=>{if(!i)return console.error("Project is required");let{tableId:n,...r}=e;N?g({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString,originalTrigger:t,payload:{name:r.name,enabled_mode:r.enabled_mode}}):d({projectRef:null==i?void 0:i.ref,connectionString:null==i?void 0:i.connectionString,payload:r})};return(0,a.useEffect)(()=>{n&&y&&(w.clearErrors(),N?w.reset(t):b.length>0&&w.reset({...ed,tableId:b[0].id.toString(),table:b[0].name,schema:b[0].schema}))},[n,y]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.cj,{open:n,onOpenChange:s,"data-sentry-element":"Sheet","data-sentry-source-file":"TriggerSheet.tsx",children:(0,r.jsxs)(C.h,{size:"lg",className:"flex flex-col gap-0","data-sentry-element":"SheetContent","data-sentry-source-file":"TriggerSheet.tsx",children:[(0,r.jsx)(C.Fm,{"data-sentry-element":"SheetHeader","data-sentry-source-file":"TriggerSheet.tsx",children:(0,r.jsx)(C.qp,{"data-sentry-element":"SheetTitle","data-sentry-source-file":"TriggerSheet.tsx",children:N?"Edit database trigger: ".concat(t.name):"Create a new database trigger"})}),(0,r.jsx)(T.lV,{...w,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"TriggerSheet.tsx",children:(0,r.jsxs)("form",{id:eo,className:"flex-1 flex flex-col gap-y-6 overflow-auto py-6",onSubmit:w.handleSubmit(D),children:[(0,r.jsx)(T.zB,{name:"name",control:w.control,render:e=>{let{field:t}=e;return(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Name of trigger",description:"Do not use spaces/whitespace.",children:(0,r.jsx)(T.MJ,{children:(0,r.jsx)(k.p,{...t,placeholder:"Name of trigger"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"TriggerSheet.tsx"}),N?(0,r.jsx)(T.zB,{name:"enabled_mode",control:w.control,render:e=>{var t;let{field:n}=e;return(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Enabled mode",description:"Determines if a trigger should or should not fire. Can also be used to disable a trigger, but not delete it.",children:(0,r.jsx)(T.MJ,{children:(0,r.jsxs)(F.l6,{defaultValue:n.value,onValueChange:n.onChange,children:[(0,r.jsx)(F.bq,{className:"col-span-8",children:null==(t=el.find(e=>e.value===n.value))?void 0:t.label}),(0,r.jsx)(F.gC,{children:el.map(e=>(0,r.jsxs)(F.eb,{value:e.value,children:[(0,r.jsx)("p",{className:"text-foreground",children:e.label}),(0,r.jsx)("p",{className:"text-foreground-lighter",children:e.description})]},e.value))})]})})})}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.w,{}),(0,r.jsx)(T.zB,{name:"tableId",control:w.control,render:e=>{let{field:t}=e;return(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Table",description:"Trigger will watch for changes on this table",children:(0,r.jsx)(T.MJ,{children:(0,r.jsxs)(F.l6,{defaultValue:t.value,onValueChange:e=>{let t=b.find(t=>t.id.toString()===e);t&&(w.setValue("table",t.name),w.setValue("schema",t.schema))},children:[(0,r.jsx)(F.bq,{className:"col-span-8",children:(0,r.jsx)(F.yv,{})}),(0,r.jsx)(F.gC,{children:b.map(e=>(0,r.jsxs)(F.eb,{value:e.id.toString(),children:[(0,r.jsxs)("span",{className:"text-foreground-light",children:[e.schema,"."]}),(0,r.jsx)("span",{className:"text-foreground",children:e.name})]},e.id))})]})})})}}),(0,r.jsx)(T.zB,{name:"events",control:w.control,render:()=>(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Events",description:"These are the events that are watched by the trigger, only the events selected above will fire the trigger on the table you've selected.",children:es.map(e=>(0,r.jsx)(T.zB,{control:w.control,name:"events",render:t=>{var n;let{field:s}=t;return(0,r.jsx)(M.M,{hideMessage:!0,layout:"flex",label:e.label,description:e.description,children:(0,r.jsx)(T.MJ,{children:(0,r.jsx)(R.S,{className:"translate-y-[2px]",checked:null==(n=s.value)?void 0:n.includes(e.value),onCheckedChange:t=>{var n;return t?s.onChange([...s.value,e.value]):s.onChange(null==(n=s.value)?void 0:n.filter(t=>t!==e.value))}})})})}},e.value))})}),(0,r.jsx)(T.zB,{name:"activation",control:w.control,render:e=>{var t;let{field:n}=e;return(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Trigger type",description:"Determines when your trigger fires",children:(0,r.jsx)(T.MJ,{children:(0,r.jsxs)(F.l6,{defaultValue:n.value,onValueChange:n.onChange,children:[(0,r.jsx)(F.bq,{className:"col-span-8",children:null==(t=ea.find(e=>e.value===n.value))?void 0:t.label}),(0,r.jsx)(F.gC,{children:ea.map(e=>(0,r.jsxs)(F.eb,{value:e.value,children:[(0,r.jsx)("p",{className:"text-foreground",children:e.label}),(0,r.jsx)("p",{className:"text-foreground-lighter",children:e.description})]},e.value))})]})})})}}),(0,r.jsx)(T.zB,{name:"orientation",control:w.control,render:e=>{var t;let{field:n}=e;return(0,r.jsx)(M.M,{className:"px-5",layout:"horizontal",label:"Orientation",description:"Identifies whether the trigger fires once for each processed row or once for each statement",children:(0,r.jsx)(T.MJ,{children:(0,r.jsxs)(F.l6,{defaultValue:n.value,onValueChange:n.onChange,children:[(0,r.jsx)(F.bq,{className:"col-span-8",children:null==(t=ei.find(e=>e.value===n.value))?void 0:t.label}),(0,r.jsx)(F.gC,{children:ei.map(e=>(0,r.jsxs)(F.eb,{value:e.value,children:[(0,r.jsx)("p",{className:"text-foreground",children:e.label}),(0,r.jsx)("p",{className:"text-foreground-lighter",children:e.description})]},e.value))})]})})})}}),(0,r.jsx)(q.w,{}),(0,r.jsx)(T.zB,{name:"function_name",control:w.control,render:()=>(0,r.jsx)(M.M,{layout:"vertical",className:"px-5",children:(0,r.jsx)(T.MJ,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-y-2",children:[(0,r.jsx)("p",{className:"text-smn",children:"Function to trigger"}),0===I.length?(0,r.jsx)("button",{type:"button",className:(0,L.cn)("relative w-full rounded border border-default","bg-surface-200 px-5 py-1 shadow-sm transition-all","hover:border-strong hover:bg-overlay-hover"),onClick:()=>c(!0),children:(0,r.jsx)(x,{icon:(0,r.jsx)(f.A,{size:14,strokeWidth:2}),text:"Choose a function to trigger"})}):(0,r.jsxs)("div",{className:(0,L.cn)("relative w-full flex items-center justify-between","space-x-3 px-5 py-4 border border-default","rounded shadow-sm transition-shadow"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded bg-foreground text-background focus-within:bg-opacity-10",children:(0,r.jsx)(f.A,{size:"18",strokeWidth:2,width:14})}),(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-sm text-foreground-light",children:O}),".",(0,r.jsx)("span",{className:"text-sm text-foreground",children:I})]})]}),(0,r.jsx)(P.$,{type:"default",onClick:()=>c(!0),children:"Change function"})]})]})})})})]})]})}),(0,r.jsxs)(C.XW,{className:"shrink-0","data-sentry-element":"SheetFooter","data-sentry-source-file":"TriggerSheet.tsx",children:[(0,r.jsx)(P.$,{type:"default",htmlType:"reset",disabled:u||v,onClick:()=>s(!1),"data-sentry-element":"Button","data-sentry-source-file":"TriggerSheet.tsx",children:"Cancel"}),(0,r.jsx)(P.$,{form:eo,htmlType:"submit",loading:u||v,"data-sentry-element":"Button","data-sentry-source-file":"TriggerSheet.tsx",children:"Create trigger"})]})]})}),(0,r.jsx)(Z,{visible:o,setVisible:c,onChange:e=>{w.setValue("function_name",e.name),w.setValue("function_schema",e.schema)},"data-sentry-element":"ChooseFunctionForm","data-sentry-source-file":"TriggerSheet.tsx"})]})},em=e=>{let t=e.events.join(" OR "),n=e.function_args.length>0?"(".concat(e.function_args.join(", "),")"):"()",r='\nDROP TRIGGER IF EXISTS "'.concat(e.name,'" ON "').concat(e.schema,'"."').concat(e.table,'";\n\nCREATE TRIGGER "').concat(e.name,'"\n').concat(e.activation," ").concat(t,'\nON "').concat(e.schema,'"."').concat(e.table,'"\nFOR EACH ').concat(e.orientation,"\n");return e.condition&&(r+="WHEN (".concat(e.condition,")\n")),(r+='EXECUTE FUNCTION "'.concat(e.function_schema,'"."').concat(e.function_name,'"').concat(n,";")).trim()};var ef=n(83927),eh=n.n(ef),eg=n(53667),ex=n.n(eg),ep=n(65842),ev=n(97318),ej=n(69763);let ey=()=>(0,r.jsx)(ej.F,{title:"Alpha preview",withIcon:!0,variant:"warning","data-sentry-element":"Alert","data-sentry-component":"AlphaPreview","data-sentry-source-file":"AlphaPreview.tsx",children:"This is not suitable for production"});var eb=n(33794),eN=n(98474),ew=n(79319),eS=n(21292),e_=n(17234),eA=n(3548),eE=n(15665),eC=n(65904),eT=n(7298),ek=n(58289),eF=n(71171),eq=n(19061),eR=n(98303),eL=n(86926),eP=n.n(eL),eM=n(14506),eI=n.n(eM),eO=n(64238),eD=n(23278),ez=n(78086),e$=n(99985),eW=n(12015),eY=n(94328),eB=n(3732),eU=n(38952),eH=n(33656);let eV=e=>{let{schema:t,filterString:n,isLocked:a,editTrigger:i,deleteTrigger:l}=e,{project:c}=(0,o.Om)(),d=(0,ek.xd)(),{data:u}=(0,eA.oR)({projectRef:null==c?void 0:c.ref,connectionString:null==c?void 0:c.connectionString}),m=(null!=u?u:[]).filter(e=>eP()(e.name.toLowerCase(),n.toLowerCase())),f=eI()(m.filter(e=>e.schema==t),e=>e.name.toLocaleLowerCase()),h=(0,eC.SE)(s.aG.TENANT_SQL_ADMIN_WRITE,"triggers");return 0===f.length&&0===n.length?(0,r.jsx)(eb.A.tr,{children:(0,r.jsxs)(eb.A.td,{colSpan:7,children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No triggers created yet"}),(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no triggers found in the schema "',t,'"']})]})},t):0===f.length&&n.length>0?(0,r.jsx)(eb.A.tr,{children:(0,r.jsxs)(eb.A.td,{colSpan:7,children:[(0,r.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,r.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',n,'" did not return any results']})]})},t):(0,r.jsx)(r.Fragment,{children:f.map(e=>(0,r.jsxs)(eb.A.tr,{children:[(0,r.jsx)(eb.A.td,{className:"space-x-2",children:(0,r.jsxs)(eB.m_,{children:[(0,r.jsx)(eB.k$,{onClick:()=>i(e),className:"cursor-pointer text-foreground truncate max-w-48 inline-block",children:e.name}),(0,r.jsx)(eB.ZI,{side:"bottom",align:"center",children:e.name})]})}),(0,r.jsx)(eb.A.td,{className:"break-all",children:(0,r.jsx)("p",{title:e.table,className:"truncate",children:e.table})}),(0,r.jsx)(eb.A.td,{className:"space-x-2",children:(0,r.jsx)("p",{title:e.function_name,className:"truncate",children:e.function_name})}),(0,r.jsx)(eb.A.td,{children:(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:e.events.map(t=>(0,r.jsx)(eU.E,{children:"".concat(e.activation," ").concat(t)},t))})}),(0,r.jsx)(eb.A.td,{className:"space-x-2",children:(0,r.jsx)("p",{title:e.orientation,className:"truncate",children:e.orientation})}),(0,r.jsx)(eb.A.td,{children:(0,r.jsx)("div",{className:"flex items-center justify-center",children:"DISABLED"!==e.enabled_mode?(0,r.jsx)(eO.A,{strokeWidth:2,className:"text-brand"}):(0,r.jsx)(eD.A,{strokeWidth:2})})}),(0,r.jsx)(eb.A.td,{className:"text-right",children:!a&&(0,r.jsx)("div",{className:"flex items-center justify-end",children:h?(0,r.jsxs)(eH.rI,{children:[(0,r.jsx)(eH.ty,{asChild:!0,children:(0,r.jsx)(P.$,{type:"default",className:"px-1",icon:(0,r.jsx)(ez.A,{})})}),(0,r.jsxs)(eH.SQ,{side:"bottom",align:"end",className:"w-52",children:[(0,r.jsxs)(eH._2,{className:"space-x-2",onClick:()=>{em(e),i(e)},children:[(0,r.jsx)(e$.A,{size:14}),(0,r.jsx)("p",{children:"Edit trigger"})]}),(0,r.jsxs)(eH._2,{className:"space-x-2",onClick:()=>{let t=em(e);d.newChat({name:"Update trigger ".concat(eD.A.name),open:!0,initialInput:"Update this trigger which exists on the ".concat(e.schema,".").concat(e.table," table to..."),suggestions:{title:"I can help you make a change to this trigger, here are a few example prompts to get you started:",prompts:["Rename this trigger to ...","Change the events this trigger responds to ...","Modify this trigger to run after instead of before ..."]},sqlSnippets:[t]})},children:[(0,r.jsx)(eW.A,{size:14}),(0,r.jsx)("p",{children:"Edit with Assistant"})]}),(0,r.jsxs)(eH._2,{className:"space-x-2",onClick:()=>l(e),children:[(0,r.jsx)(eY.A,{stroke:"red",size:14}),(0,r.jsx)("p",{children:"Delete trigger"})]})]})]}):(0,r.jsx)(ew.G,{disabled:!0,type:"default",className:"px-1",icon:(0,r.jsx)(ez.A,{}),tooltip:{content:{side:"bottom",text:"You need additional permissions to update triggers"}}})})})]},e.id))})},eG=e=>{let{createTrigger:t=eh(),editTrigger:n=eh(),deleteTrigger:i=eh()}=e,{project:l}=(0,o.Om)(),c=(0,ek.xd)(),{selectedSchema:d,setSelectedSchema:u}=(0,eT.k)(),[m,f]=(0,a.useState)(""),{data:h}=(0,eE.w$)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),[g]=ex()(null!=h?h:[],e=>{var t;return E.i.includes(null!=(t=null==e?void 0:e.name)?t:"")}),x=null==h?void 0:h.find(e=>e.name===d),p=g.some(e=>e.id===(null==x?void 0:x.id)),{data:v=[],isSuccess:j}=(0,_.LW)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),y=v.filter(e=>!E.i.includes(e.schema)).length>0,{data:b,error:N,isLoading:w,isError:S}=(0,eA.oR)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),A=(0,eC.SE)(s.aG.TENANT_SQL_ADMIN_WRITE,"triggers");return w?(0,r.jsx)(e_.y,{}):S?(0,r.jsx)(eN.A,{error:N,subject:"Failed to retrieve database triggers"}):(0,r.jsx)(r.Fragment,{children:0===(null!=b?b:[]).length?(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsxs)(V.A,{title:"Triggers",ctaButtonLabel:"Create a new trigger",onClickCta:()=>t(),children:[(0,r.jsx)(ey,{}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"A PostgreSQL trigger is a function invoked automatically whenever an event associated with a table occurs."}),(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"An event could be any of the following: INSERT, UPDATE, DELETE. A trigger is a special user-defined function associated with a table."})]})}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-2 flex-wrap",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center gap-2",children:[(0,r.jsx)(eS.A,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:d,onSelectSchema:u}),(0,r.jsx)(eF.A,{placeholder:"Search for a trigger",size:"tiny",icon:(0,r.jsx)(ep.A,{size:"14"}),value:m,className:"w-full lg:w-52",onChange:e=>f(e.target.value)})]}),!p&&(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsx)(ew.G,{disabled:!y||!A,icon:(0,r.jsx)(ev.A,{}),onClick:()=>t(),className:"flex-grow",tooltip:{content:{side:"bottom",text:y?A?void 0:"You need additional permissions to create triggers":"Create a table first before creating triggers"}},children:"New trigger"}),y&&(0,r.jsx)(ew.G,{type:"default",disabled:!y||!A,className:"px-1 pointer-events-auto",icon:(0,r.jsx)(eq.M,{size:16}),onClick:()=>c.newChat({name:"Create new trigger",open:!0,initialInput:"Create a new trigger for the schema ".concat(d," that does ..."),suggestions:{title:"I can help you create a new trigger, here are a few example prompts to get you started:",prompts:["Create a trigger that logs changes to the users table","Create a trigger that updates updated_at timestamp","Create a trigger that validates email format before insert"]}}),tooltip:{content:{side:"bottom",text:A?"Create with Supabase Assistant":"You need additional permissions to create triggers"}}})]})]}),p&&(0,r.jsx)(eR.A,{schema:d,entity:"triggers"}),(0,r.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,r.jsx)(eb.A,{head:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eb.A.th,{children:"Name"},"name"),(0,r.jsx)(eb.A.th,{children:"Table"},"table"),(0,r.jsx)(eb.A.th,{children:"Function"},"function"),(0,r.jsx)(eb.A.th,{children:"Events"},"events"),(0,r.jsx)(eb.A.th,{children:"Orientation"},"orientation"),(0,r.jsx)(eb.A.th,{className:"w-20",children:"Enabled"},"enabled"),(0,r.jsx)(eb.A.th,{className:"w-1/12"},"buttons")]}),body:(0,r.jsx)(eV,{schema:d,filterString:m,isLocked:p,editTrigger:n,deleteTrigger:i})})})]})})};var eX=n(6506),eK=n(6408),eQ=n(95207),eJ=n(93463),eZ=n(93274),e0=n(10170);let e1=()=>{let{setEditorPanel:e}=(0,e0.qM)(),t=(0,i.h4)(),[n,l]=(0,a.useState)(),[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),f=(0,eC.SE)(s.aG.TENANT_SQL_ADMIN_READ,"triggers");return(0,eC.Lh)()&&!f?(0,r.jsx)(eZ.A,{isFullPage:!0,resourceText:"view database triggers"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eQ.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"triggers.tsx",children:(0,r.jsx)(eQ.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"triggers.tsx",children:(0,r.jsxs)("div",{className:"col-span-12",children:[(0,r.jsx)(eJ.M,{title:"Database Triggers",description:"Execute a set of actions automatically on specified table events",docsUrl:"https://supabase.com/docs/guides/database/postgres/triggers","data-sentry-element":"FormHeader","data-sentry-source-file":"triggers.tsx"}),(0,r.jsx)(eG,{createTrigger:()=>{t?e({open:!0,initialValue:"create trigger trigger_name\nafter insert or update or delete on table_name\nfor each row\nexecute function function_name();",label:"Create new database trigger",saveLabel:"Create trigger",initialPrompt:"Create a new database trigger that..."}):(l(void 0),c(!0))},editTrigger:n=>{t?e({open:!0,initialValue:em(n),label:'Edit trigger "'.concat(n.name,'"'),saveLabel:"Update trigger",initialPrompt:'Update the database trigger "'.concat(n.name,'" to...')}):(l(n),c(!0))},deleteTrigger:e=>{l(e),m(!0)},"data-sentry-element":"TriggersList","data-sentry-source-file":"triggers.tsx"})]})})}),(0,r.jsx)(eu,{selectedTrigger:n,open:o,setOpen:c,"data-sentry-element":"TriggerSheet","data-sentry-source-file":"triggers.tsx"}),(0,r.jsx)(u,{trigger:n,visible:d,setVisible:m,"data-sentry-element":"DeleteTrigger","data-sentry-source-file":"triggers.tsx"})]})};e1.getLayout=e=>(0,r.jsx)(eK.A,{children:(0,r.jsx)(eX.A,{title:"Database",children:e})});let e2=e1},11578:(e,t,n)=>{"use strict";n.d(t,{a:()=>a});var r=n(53239),s=n(19491);function a(){let e=(0,r.useRef)(!1);return(0,s.s)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},17049:(e,t,n)=>{"use strict";n.d(t,{_:()=>l});var r=Object.defineProperty,s=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>(s(e,"symbol"!=typeof t?t+"":t,n),n);class i{set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}constructor(){a(this,"current",this.detect()),a(this,"handoffState","pending"),a(this,"currentId",0)}}let l=new i},18115:(e,t,n)=>{"use strict";function r(e,t){for(var n=arguments.length,s=Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];if(e in t){let n=t[e];return"function"==typeof n?n(...s):n}let i=Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map(e=>'"'.concat(e,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(i,r),i}n.d(t,{Y:()=>r})},19491:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(53239),s=n(17049);let a=(e,t)=>{s._.isServer?(0,r.useEffect)(e,t):(0,r.useLayoutEffect)(e,t)}},20382:(e,t,n)=>{"use strict";n.d(t,{L:()=>a});var r=n(53239),s=n(245);function a(){let[e]=(0,r.useState)(s.e);return(0,r.useEffect)(()=>()=>e.dispose(),[e]),e}},20613:(e,t,n)=>{"use strict";n.d(t,{e:()=>F});var r=n(53239),s=n(80562),a=n(72586),i=n(18115),l=n(11578),o=n(19491),c=n(29639),d=n(88605),u=n(81865),m=n(245);function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.add(...n)}function h(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e&&n.length>0&&e.classList.remove(...n)}var g=n(20382),x=n(96565),p=n(77495);function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.split(" ").filter(e=>e.trim().length>1)}let j=(0,r.createContext)(null);j.displayName="TransitionContext";var y=(e=>(e.Visible="visible",e.Hidden="hidden",e))(y||{});let b=(0,r.createContext)(null);function N(e){return"children"in e?N(e.children):e.current.filter(e=>{let{el:t}=e;return null!==t.current}).filter(e=>{let{state:t}=e;return"visible"===t}).length>0}function w(e,t){let n=(0,c.Y)(e),a=(0,r.useRef)([]),o=(0,l.a)(),d=(0,g.L)(),u=(0,x._)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.mK.Hidden,r=a.current.findIndex(t=>{let{el:n}=t;return n===e});-1!==r&&((0,i.Y)(t,{[s.mK.Unmount](){a.current.splice(r,1)},[s.mK.Hidden](){a.current[r].state="hidden"}}),d.microTask(()=>{var e;!N(a)&&o.current&&(null==(e=n.current)||e.call(n))}))}),m=(0,x._)(e=>{let t=a.current.find(t=>{let{el:n}=t;return n===e});return t?"visible"!==t.state&&(t.state="visible"):a.current.push({el:e,state:"visible"}),()=>u(e,s.mK.Unmount)}),f=(0,r.useRef)([]),h=(0,r.useRef)(Promise.resolve()),p=(0,r.useRef)({enter:[],leave:[],idle:[]}),v=(0,x._)((e,n,r)=>{f.current.splice(0),t&&(t.chains.current[n]=t.chains.current[n].filter(t=>{let[n]=t;return n!==e})),null==t||t.chains.current[n].push([e,new Promise(e=>{f.current.push(e)})]),null==t||t.chains.current[n].push([e,new Promise(e=>{Promise.all(p.current[n].map(e=>{let[t,n]=e;return n})).then(()=>e())})]),"enter"===n?h.current=h.current.then(()=>null==t?void 0:t.wait.current).then(()=>r(n)):r(n)}),j=(0,x._)((e,t,n)=>{Promise.all(p.current[t].splice(0).map(e=>{let[t,n]=e;return n})).then(()=>{var e;null==(e=f.current.shift())||e()}).then(()=>n(t))});return(0,r.useMemo)(()=>({children:a,register:m,unregister:u,onStart:v,onStop:j,wait:h,chains:p}),[m,u,a,v,j,p,h])}function S(){}b.displayName="NestingContext";let _=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function A(e){var t;let n={};for(let r of _)n[r]=null!=(t=e[r])?t:S;return n}let E=s.O5.RenderStrategy,C=(0,s.FX)(function(e,t){let{show:n,appear:i=!1,unmount:l=!0,...c}=e,m=(0,r.useRef)(null),f=(0,u.P)(m,t);(0,d.g)();let h=(0,a.O_)();if(void 0===n&&null!==h&&(n=(h&a.Uw.Open)===a.Uw.Open),![!0,!1].includes(n))throw Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[g,p]=(0,r.useState)(n?"visible":"hidden"),v=w(()=>{p("hidden")}),[y,S]=(0,r.useState)(!0),_=(0,r.useRef)([n]);(0,o.s)(()=>{!1!==y&&_.current[_.current.length-1]!==n&&(_.current.push(n),S(!1))},[_,n]);let A=(0,r.useMemo)(()=>({show:n,appear:i,initial:y}),[n,i,y]);(0,r.useEffect)(()=>{if(n)p("visible");else if(N(v)){let e=m.current;if(!e)return;let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&p("hidden")}else p("hidden")},[n,v]);let C={unmount:l},k=(0,x._)(()=>{var t;y&&S(!1),null==(t=e.beforeEnter)||t.call(e)}),F=(0,x._)(()=>{var t;y&&S(!1),null==(t=e.beforeLeave)||t.call(e)});return r.createElement(b.Provider,{value:v},r.createElement(j.Provider,{value:A},(0,s.XX)({ourProps:{...C,as:r.Fragment,children:r.createElement(T,{ref:f,...C,...c,beforeEnter:k,beforeLeave:F})},theirProps:{},defaultTag:r.Fragment,features:E,visible:"visible"===g,name:"Transition"})))}),T=(0,s.FX)(function(e,t){var n,y,S;let _,{beforeEnter:C,afterEnter:T,beforeLeave:k,afterLeave:F,enter:q,enterFrom:R,enterTo:L,entered:P,leave:M,leaveFrom:I,leaveTo:O,...D}=e,z=(0,r.useRef)(null),$=(0,u.P)(z,t),W=null==(n=D.unmount)||n?s.mK.Unmount:s.mK.Hidden,{show:Y,appear:B,initial:U}=function(){let e=(0,r.useContext)(j);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[H,V]=(0,r.useState)(Y?"visible":"hidden"),G=function(){let e=(0,r.useContext)(b);if(null===e)throw Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:X,unregister:K}=G;(0,r.useEffect)(()=>X(z),[X,z]),(0,r.useEffect)(()=>{if(W===s.mK.Hidden&&z.current)return Y&&"visible"!==H?void V("visible"):(0,i.Y)(H,{hidden:()=>K(z),visible:()=>X(z)})},[H,z,X,K,Y,W]);let Q=(0,c.Y)({base:v(D.className),enter:v(q),enterFrom:v(R),enterTo:v(L),entered:v(P),leave:v(M),leaveFrom:v(I),leaveTo:v(O)}),J=(S={beforeEnter:C,afterEnter:T,beforeLeave:k,afterLeave:F},_=(0,r.useRef)(A(S)),(0,r.useEffect)(()=>{_.current=A(S)},[S]),_),Z=(0,d.g)();(0,r.useEffect)(()=>{if(Z&&"visible"===H&&null===z.current)throw Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[z,H,Z]);let ee=B&&Y&&U,et=Z&&(!U||B)?Y?"enter":"leave":"idle",en=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[t,n]=(0,r.useState)(e),s=(0,l.a)(),a=(0,r.useCallback)(e=>{s.current&&n(t=>t|e)},[t,s]),i=(0,r.useCallback)(e=>!!(t&e),[t]);return{flags:t,addFlag:a,hasFlag:i,removeFlag:(0,r.useCallback)(e=>{s.current&&n(t=>t&~e)},[n,s]),toggleFlag:(0,r.useCallback)(e=>{s.current&&n(t=>t^e)},[n])}}(0),er=(0,x._)(e=>(0,i.Y)(e,{enter:()=>{en.addFlag(a.Uw.Opening),J.current.beforeEnter()},leave:()=>{en.addFlag(a.Uw.Closing),J.current.beforeLeave()},idle:()=>{}})),es=(0,x._)(e=>(0,i.Y)(e,{enter:()=>{en.removeFlag(a.Uw.Opening),J.current.afterEnter()},leave:()=>{en.removeFlag(a.Uw.Closing),J.current.afterLeave()},idle:()=>{}})),ea=w(()=>{V("hidden"),K(z)},G);!function(e){let{immediate:t,container:n,direction:r,classes:s,onStart:a,onStop:d}=e,u=(0,l.a)(),x=(0,g.L)(),p=(0,c.Y)(r);(0,o.s)(()=>{t&&(p.current="enter")},[t]),(0,o.s)(()=>{let e=(0,m.e)();x.add(e.dispose);let t=n.current;if(t&&"idle"!==p.current&&u.current){var r,l,o;let n,c,u,g,x,v,j;return e.dispose(),a.current(p.current),e.add((r=s.current,l="enter"===p.current,o=()=>{e.dispose(),d.current(p.current)},c=l?"enter":"leave",u=(0,m.e)(),g=void 0!==o?(n={called:!1},function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!n.called)return n.called=!0,o(...t)}):()=>{},"enter"===c&&(t.removeAttribute("hidden"),t.style.display=""),x=(0,i.Y)(c,{enter:()=>r.enter,leave:()=>r.leave}),v=(0,i.Y)(c,{enter:()=>r.enterTo,leave:()=>r.leaveTo}),j=(0,i.Y)(c,{enter:()=>r.enterFrom,leave:()=>r.leaveFrom}),h(t,...r.base,...r.enter,...r.enterTo,...r.enterFrom,...r.leave,...r.leaveFrom,...r.leaveTo,...r.entered),f(t,...r.base,...x,...j),u.nextFrame(()=>{h(t,...r.base,...x,...j),f(t,...r.base,...x,...v),function(e,t){let n=(0,m.e)();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[a,i]=[r,s].map(e=>{let[t=0]=e.split(",").filter(Boolean).map(e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e)).sort((e,t)=>t-e);return t}),l=a+i;if(0!==l){n.group(n=>{n.setTimeout(()=>{t(),n.dispose()},l),n.addEventListener(e,"transitionrun",e=>{e.target===e.currentTarget&&n.dispose()})});let r=n.addEventListener(e,"transitionend",e=>{e.target===e.currentTarget&&(t(),r())})}else t();n.add(()=>t()),n.dispose}(t,()=>(h(t,...r.base,...x),f(t,...r.base,...r.entered),g()))}),u.dispose)),e.dispose}},[r])}({immediate:ee,container:z,classes:Q,direction:et,onStart:(0,c.Y)(e=>{ea.onStart(z,e,er)}),onStop:(0,c.Y)(e=>{ea.onStop(z,e,es),"leave"!==e||N(ea)||(V("hidden"),K(z))})});let ei=D;return ee?ei={...ei,className:(0,p.x)(D.className,...Q.current.enter,...Q.current.enterFrom)}:(ei.className=(0,p.x)(D.className,null==(y=z.current)?void 0:y.className),""===ei.className&&delete ei.className),r.createElement(b.Provider,{value:ea},r.createElement(a.El,{value:(0,i.Y)(H,{visible:a.Uw.Open,hidden:a.Uw.Closed})|en.flags},(0,s.XX)({ourProps:{ref:$},theirProps:ei,defaultTag:"div",features:E,visible:"visible"===H,name:"Transition.Child"})))}),k=(0,s.FX)(function(e,t){let n=null!==(0,r.useContext)(j),s=null!==(0,a.O_)();return r.createElement(r.Fragment,null,!n&&s?r.createElement(C,{ref:t,...e}):r.createElement(T,{ref:t,...e}))}),F=Object.assign(C,{Child:k,Root:C})},20829:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(80263),s=n(66452),a=n(79319),i=n(63320),l=n.n(i),o=n(16601);let c=e=>{let{title:t="",size:n="medium",children:i,ctaButtonLabel:c="",infoButtonLabel:d="",infoButtonUrl:u="",onClickCta:m=()=>{},loading:f=!1,disabled:h=!1,disabledMessage:g="",ctaUrl:x}=e,p=c&&m||u&&d;return(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center","data-sentry-component":"ProductEmptyState","data-sentry-source-file":"ProductEmptyState.tsx",children:(0,r.jsx)("div",{className:"flex space-x-4 rounded border bg-surface-100 p-6 shadow-md",children:(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsxs)("div",{className:"".concat("medium"===n?"w-80":"w-[400px]"," space-y-4"),children:[(0,r.jsx)("h5",{className:"text-foreground",children:t}),(0,r.jsx)("div",{className:"flex flex-col space-y-2 text-foreground-light",children:i}),p&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[c&&x?(0,r.jsx)(o.$,{asChild:!0,type:"primary",children:(0,r.jsx)(l(),{href:x,children:c})}):c&&m?(0,r.jsx)(a.G,{type:"primary",onClick:m,loading:f,disabled:f||h,tooltip:{content:{side:"bottom",text:h&&g.length>0?g:void 0}},children:c}):null,u&&d?(0,r.jsx)(o.$,{type:"default",icon:(0,r.jsx)(s.A,{strokeWidth:1.5}),children:(0,r.jsx)("a",{target:"_blank",rel:"noreferrer",href:u,children:d})}):null]})]})})})})}},21292:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(80263),s=n(60045),a=n(98667),i=n(64238),l=n(97318),o=n(53239),c=n(45969),d=n(15665),u=n(65904),m=n(16601),f=n(81250),h=n(98883),g=n(10738),x=n(50854),p=n(83405);let v=e=>{let{className:t,disabled:n=!1,size:v="tiny",showError:j=!0,selectedSchemaName:y,supportSelectAll:b=!1,excludedSchemas:N=[],onSelectSchema:w,onSelectCreateSchema:S}=e,[_,A]=(0,o.useState)(!1),E=(0,u.SE)(s.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:C}=(0,c.Om)(),{data:T,isLoading:k,isSuccess:F,isError:q,error:R,refetch:L}=(0,d.w$)({projectRef:null==C?void 0:C.ref,connectionString:null==C?void 0:C.connectionString}),P=(T||[]).filter(e=>!N.includes(e.name)).sort((e,t)=>e.name.localeCompare(t.name));return(0,r.jsxs)("div",{className:t,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[k&&(0,r.jsx)(m.$,{type:"default",className:"w-full [&>span]:w-full",size:v,disabled:!0,children:(0,r.jsx)(f.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&q&&(0,r.jsxs)(h.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,r.jsx)(h.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,r.jsxs)(h.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==R?void 0:R.message]}),(0,r.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>L(),children:"Reload schemas"})]}),F&&(0,r.jsxs)(g.AM,{open:_,onOpenChange:A,modal:!1,children:[(0,r.jsx)(g.Wv,{asChild:!0,children:(0,r.jsx)(m.$,{size:v,disabled:n,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,r.jsx)(a.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:y?(0,r.jsxs)("div",{className:"w-full flex gap-1",children:[(0,r.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,r.jsx)("p",{className:"text-foreground",children:"*"===y?"All schemas":y})]}):(0,r.jsx)("div",{className:"w-full flex gap-1",children:(0,r.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schema…"})})})}),(0,r.jsx)(g.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:"start",portal:!0,sameWidthAsTrigger:!0,children:(0,r.jsxs)(x.uB,{children:[(0,r.jsx)(x.G7,{placeholder:"Find schema..."}),(0,r.jsxs)(x.oI,{children:[(0,r.jsx)(x.xL,{children:"No schemas found"}),(0,r.jsx)(x.L$,{children:(0,r.jsxs)(p.FK,{className:(P||[]).length>7?"h-[210px]":"",children:[b&&(0,r.jsxs)(x.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w("*"),A(!1)},onClick:()=>{w("*"),A(!1)},children:[(0,r.jsx)("span",{children:"All schemas"}),"*"===y&&(0,r.jsx)(i.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==P?void 0:P.map(e=>(0,r.jsxs)(x.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{w(e.name),A(!1)},onClick:()=>{w(e.name),A(!1)},children:[(0,r.jsx)("span",{children:e.name}),y===e.name&&(0,r.jsx)(i.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==S&&E&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.fx,{}),(0,r.jsx)(x.L$,{children:(0,r.jsxs)(x.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{S(),A(!1)},onClick:()=>{S(),A(!1)},children:[(0,r.jsx)(l.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},21512:(e,t,n)=>{"use strict";n.d(t,{Lh:()=>u,T_:()=>g});var r=n(32144),s=n(80251),a=n(73969),i=n(26616),l=n.n(i),o=n(77570),c=n(22096),d=n(68324);let u="pgmq_public",m=l()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),f=l()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function h(e){let{projectRef:t,connectionString:n,enable:r}=e,{result:s}=await (0,o.E)({projectRef:t,connectionString:n,sql:r?m:f,queryKey:["toggle-queues-exposure"]});return s}let g=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,r.jE)();return(0,s.n)(e=>h(e),{async onSuccess(t,n,r){let{projectRef:s}=n;await i.invalidateQueries(c.m.exposePostgrestStatus(s)),i.invalidateQueries(d.c.schemas(s)),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?a.oR.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):t(e,n,r)},...n})}},22096:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});let r={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,t,n)=>["projects",e,"queue-messages",t,n].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,t)=>["projects",e,"queue-metrics",t],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},24059:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(80263),s=n(16477),a=n(99923),i=n(66452),l=n(63320),o=n.n(l),c=n(53239),d=n(16601);let u=(0,c.forwardRef)((e,t)=>{let{icon:n,title:l,description:u,url:m,urlLabel:f="Read more",defaultVisibility:h=!1,hideCollapse:g=!1,button:x,className:p="",block:v=!1}=e,[j,y]=(0,c.useState)(h);return(0,r.jsx)("div",{ref:t,role:"alert",className:"".concat(v?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(p),children:(0,r.jsxs)("div",{className:"flex flex-col px-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[n&&(0,r.jsx)("span",{className:"text-foreground-lighter",children:n}),(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsx)("h5",{className:"text-sm text-foreground",children:l})})]}),u&&!g?(0,r.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>y(!j),children:j?(0,r.jsx)(s.A,{size:14,strokeWidth:1.5}):(0,r.jsx)(a.A,{size:14,strokeWidth:1.5})}):null]}),(u||m||x)&&(0,r.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:500*!!j},children:[(0,r.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,r.jsx)("div",{children:(0,r.jsx)(d.$,{asChild:!0,type:"default",icon:(0,r.jsx)(i.A,{}),children:(0,r.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:f})})}),x&&(0,r.jsx)("div",{children:x})]})]})})});u.displayName="InformationBox";let m=u},29639:(e,t,n)=>{"use strict";n.d(t,{Y:()=>a});var r=n(53239),s=n(19491);function a(e){let t=(0,r.useRef)(e);return(0,s.s)(()=>{t.current=e},[e]),t}},36365:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s,i:()=>r});let r=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",n(21512).Lh],s=r.filter(e=>"extensions"!==e)},42190:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(80263),s=n(63320),a=n.n(s),i=n(42677),l=n(38952),o=n(16601);let c=e=>{let{name:t="",isActive:n,isExternal:s,icon:c,rightIcon:d,url:u="",target:m="_self",onClick:f,textClassName:h="",hoverText:g="",label:x}=e,p=(0,r.jsx)(i.Ay.Item,{icon:c,rounded:!0,active:n,onClick:f,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:g||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,r.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==x&&(0,r.jsx)(l.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:x})]}),d&&(0,r.jsx)("div",{children:d})]})});return u?s?(0,r.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:c,children:(0,r.jsx)(a(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(a(),{href:u,className:"block",target:m,children:p}):p}},42677:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m});var r=n(80263),s=n(53239),a=n(77690),i=n(2);function l(e){let{children:t,className:n,tag:s="div",style:a}=e;return(0,r.jsx)("".concat(s),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}l.Title=function(e){let{className:t,level:n=1,children:s,style:a}=e;return(0,r.jsx)("h".concat(n),{style:a,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},l.Text=function(e){let{className:t,children:n,style:s,type:a,disabled:i,mark:l,code:o,keyboard:c,underline:d,strikethrough:u,strong:m,small:f}=e;return o?(0,r.jsx)("code",{style:s,children:n}):l?(0,r.jsx)("mark",{style:s,children:n}):c?(0,r.jsx)("kbd",{style:s,children:n}):m?(0,r.jsx)("strong",{style:s,children:n}):(0,r.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:n})},l.Link=function(e){let{children:t,target:n="_blank",href:s,className:a,onClick:i,style:l}=e;return(0,r.jsx)("a",{onClick:i,href:s,target:n,rel:"noopener noreferrer",style:l,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,s.createContext)({type:"text"}),c=e=>{let{type:t}=e;return(0,r.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:n,ulClassName:s,style:a,type:i="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:n,style:a,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(c,{type:i,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:s,children:t})})})}u.Item=function(e){let{children:t,icon:n,active:s,rounded:l,onClick:o,doNotCloseOverlay:c=!1,showActiveBar:u=!1,style:m}=e,f=(0,a.A)("menu"),{type:h}=d(),g=[f.item.base];g.push(f.item.variants[h].base),s?g.push(f.item.variants[h].active):g.push(f.item.variants[h].normal);let x=[f.item.content.base];s?x.push(f.item.content.active):x.push(f.item.content.normal);let p=[f.item.icon.base];return s?p.push(f.item.icon.active):p.push(f.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,i.cn)("outline-none",g),style:m,onClick:o,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("div",{className:"".concat(p.join(" ")," min-w-fit"),children:n}),(0,r.jsx)("span",{className:x.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:n,title:s}=e,i=(0,a.A)("menu"),{type:l}=d();return(0,r.jsxs)("div",{className:[i.group.base,i.group.variants[l]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[n&&(0,r.jsx)("span",{className:i.group.icon,children:n}),(0,r.jsx)("span",{className:i.group.content,children:s}),t]})},u.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(l.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=u},55315:(e,t,n)=>{var r=n(71057);e.exports=function(e,t){return r(t,function(t){return e[t]})}},61741:(e,t,n)=>{var r=n(55315),s=n(24967);e.exports=function(e){return null==e?[]:r(e,s(e))}},62445:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(80263),s=n(14360),a=n(83927),i=n.n(a),l=n(53239),o=n(45969),c=n(34586);let d=e=>{let{queryId:t,language:n="pgsql",defaultValue:a="",readOnly:d=!1,contextmenu:u=!0,onInputChange:m=i()}=e,f=(0,s.useMonaco)(),{project:h}=(0,o.Om)(),g=(0,l.useRef)();return(0,l.useEffect)(()=>{if(f){let e=f.languages.registerDocumentFormattingEditProvider("pgsql",{async provideDocumentFormattingEdits(e){let t=e.getValue(),n=(0,c.A)(t);return[{range:e.getFullModelRange(),text:n}]}});return()=>{e.dispose()}}},[f]),(0,l.useEffect)(()=>{if(g.current){var e;null==(e=g.current)||e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})}},[t]),(0,r.jsx)(s.default,{className:"monaco-editor",theme:"supabase",defaultLanguage:n,defaultValue:a,path:t,loading:(0,r.jsx)(()=>(0,r.jsx)("h4",{className:"text-lg","data-sentry-component":"Loading","data-sentry-source-file":"SqlEditor.tsx",children:"Loading"}),{}),options:{readOnly:d,tabSize:2,fontSize:13,minimap:{enabled:!1},wordWrap:"on",fixedOverflowWidgets:!0,contextmenu:u},onMount:(e,t)=>{g.current=e,e.changeViewZones(e=>{e.addZone({afterLineNumber:0,heightInPx:4,domNode:document.createElement("div")})})},onChange:m,"data-sentry-element":"Editor","data-sentry-component":"SqlEditor","data-sentry-source-file":"SqlEditor.tsx"})}},67144:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var r=n(80263),s=n(42677),a=n(38952),i=n(42190);let l=e=>{let{page:t,menu:n}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,r.jsx)(s.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:n.map((e,l)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(s.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(a.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let n=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(i.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:n,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),l!==n.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},69763:(e,t,n)=>{"use strict";n.d(t,{F:()=>m});var r=n(80263),s=n(53239),a=n(77690),i=n(89977),l=n(10860),o=n(61645),c=n(89714),d=n(23278);let u={danger:(0,r.jsx)(i.A,{strokeWidth:1.5,size:18}),success:(0,r.jsx)(l.A,{strokeWidth:1.5,size:18}),warning:(0,r.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,r.jsx)(c.A,{strokeWidth:1.5,size:18}),neutral:(0,r.jsx)(r.Fragment,{})};function m(e){let{variant:t="neutral",className:n,title:i,withIcon:l,closable:o,children:c,icon:m,actions:f}=e,h=(0,a.A)("alert"),[g,x]=(0,s.useState)(!0),p=[h.base];p.push(h.variant[t].base),n&&p.push(n);let v=[h.description,h.variant[t].description],j=[h.close];return(0,r.jsx)(r.Fragment,{children:g&&(0,r.jsxs)("div",{className:p.join(" "),children:[l?(0,r.jsx)("div",{className:h.variant[t].icon,children:l&&u[t]}):null,m&&m,(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:[h.variant[t].header,h.header].join(" "),children:i}),(0,r.jsx)("div",{className:v.join(" "),children:c})]}),f]}),o&&(0,r.jsx)("button",{"aria-label":"Close alert",onClick:()=>x(!1),className:j.join(" "),children:(0,r.jsx)(d.A,{strokeWidth:2,size:16})})]})})}},72586:(e,t,n)=>{"use strict";n.d(t,{El:()=>l,O_:()=>i,Uw:()=>a});var r=n(53239);let s=(0,r.createContext)(null);s.displayName="OpenClosedContext";var a=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(a||{});function i(){return(0,r.useContext)(s)}function l(e){let{value:t,children:n}=e;return r.createElement(s.Provider,{value:t},n)}},73900:(e,t,n)=>{"use strict";n.d(t,{z:()=>c});var r=n(56947),s=n(3807),a=n(32405),i=n(83634),l=n(58897);async function o(e,t){let{projectRef:n,connectionString:r}=e;if(!n)throw Error("projectRef is required");let a=new Headers;r&&a.set("x-connection-encrypted",r);let{data:i,error:l}=await (0,s.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":r},path:{ref:n}},headers:a,signal:t});return l&&(0,s.H4)(l),i}let c=function(e){let{projectRef:t,connectionString:n}=e,{enabled:s=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,i.KT)(),u=(null==d?void 0:d.status)===l.BU.ACTIVE_HEALTHY;return(0,r.I)(a.I.list(t),e=>{let{signal:r}=e;return o({projectRef:t,connectionString:n},r)},{enabled:s&&void 0!==t&&u,...c})}},77495:(e,t,n)=>{"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap(e=>"string"==typeof e?e.split(" "):[]))).filter(Boolean).join(" ")}n.d(t,{x:()=>r})},80562:(e,t,n)=>{"use strict";n.d(t,{FX:()=>u,O5:()=>i,XX:()=>o,mK:()=>l,oE:()=>m});var r=n(53239),s=n(77495),a=n(18115),i=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(i||{}),l=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(l||{});function o(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:s,features:i,visible:l=!0,name:o}=e,u=d(n,t);if(l)return c(u,r,s,o);let m=null!=i?i:0;if(2&m){let{static:e=!1,...t}=u;if(e)return c(t,r,s,o)}if(1&m){let{unmount:e=!0,...t}=u;return(0,a.Y)(+!e,{0:()=>null,1:()=>c({...t,hidden:!0,style:{display:"none"}},r,s,o)})}return c(u,r,s,o)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,{as:i=n,children:l,refName:o="ref",...c}=f(e,["unmount","static"]),u=void 0!==e.ref?{[o]:e.ref}:{},h="function"==typeof l?l(t):l;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t));let g={};if(t){let e=!1,n=[];for(let[r,s]of Object.entries(t))"boolean"==typeof s&&(e=!0),!0===s&&n.push(r);e&&(g["data-headlessui-state"]=n.join(" "))}if(i===r.Fragment&&Object.keys(m(c)).length>0){if(!(0,r.isValidElement)(h)||Array.isArray(h)&&h.length>1)throw Error(['Passing props on "Fragment"!',"","The current component <".concat(a,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(c).map(e=>"  - ".concat(e)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>"  - ".concat(e)).join("\n")].join("\n"));let e=h.props,t="function"==typeof(null==e?void 0:e.className)?function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(0,s.x)(null==e?void 0:e.className(...n),c.className)}:(0,s.x)(null==e?void 0:e.className,c.className);return(0,r.cloneElement)(h,Object.assign({},d(h.props,m(f(c,["ref"]))),g,u,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every(e=>null==e)?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}(h.ref,u.ref),t?{className:t}:{}))}return(0,r.createElement)(i,Object.assign({},f(c,["ref"]),i!==r.Fragment&&u,i!==r.Fragment&&g),h)}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},s={};for(let e of t)for(let t in e)t.startsWith("on")&&"function"==typeof e[t]?(null!=s[t]||(s[t]=[]),s[t].push(e[t])):r[t]=e[t];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(s).map(e=>[e,void 0])));for(let e in s)Object.assign(r,{[e](t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(let n of s[e]){if((t instanceof Event||(null==t?void 0:t.nativeEvent)instanceof Event)&&t.defaultPrevented)return;n(t,...r)}}});return r}function u(e){var t;return Object.assign((0,r.forwardRef)(e),{displayName:null!=(t=e.displayName)?t:e.name})}function m(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}},81865:(e,t,n)=>{"use strict";n.d(t,{P:()=>i});var r=n(53239),s=n(96565);let a=Symbol();function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let i=(0,r.useRef)(t);(0,r.useEffect)(()=>{i.current=t},[t]);let l=(0,s._)(e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)});return t.every(e=>null==e||(null==e?void 0:e[a]))?void 0:l}},86645:(e,t,n)=>{"use strict";n.d(t,{Y:()=>d});var r=n(32144),s=n(80251),a=n(73969),i=n(63719),l=n(71516),o=n(77570);async function c(e){let{projectRef:t,connectionString:n,payload:r}=e,{sql:s}=i.A.triggers.create(r),{result:a}=await (0,o.E)({projectRef:t,connectionString:n,sql:s,queryKey:["trigger","create"]});return a}let d=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,r.jE)();return(0,s.n)(e=>c(e),{async onSuccess(t,n,r){let{projectRef:s}=n;await i.invalidateQueries(l.U.list(s)),await (null==e?void 0:e(t,n,r))},async onError(e,n,r){void 0===t?a.oR.error("Failed to create database trigger: ".concat(e.message)):t(e,n,r)},...n})}},86926:(e,t,n)=>{var r=n(35902),s=n(89527),a=n(22442),i=n(80544),l=n(61741),o=Math.max;e.exports=function(e,t,n,c){e=s(e)?e:l(e),n=n&&!c?i(n):0;var d=e.length;return n<0&&(n=o(d+n,0)),a(e)?n<=d&&e.indexOf(t,n)>-1:!!d&&r(e,t,n)>-1}},88605:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r,s=n(53239),a=n(17049);function i(){let e,t=(e="undefined"==typeof document,(0,(r||(r=n.t(s,2))).useSyncExternalStore)(()=>()=>{},()=>!1,()=>!e)),[i,l]=s.useState(a._.isHandoffComplete);return i&&!1===a._.isHandoffComplete&&l(!1),s.useEffect(()=>{!0!==i&&l(!0)},[i]),s.useEffect(()=>a._.handoff(),[]),!t&&i}},89977:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(47370).A)("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]])},91132:(e,t,n)=>{"use strict";function r(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch(e=>setTimeout(()=>{throw e}))}n.d(t,{_:()=>r})},93274:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(80263),s=n(65325);let a=e=>{let{resourceText:t,isFullPage:n=!1}=e,a=()=>(0,r.jsx)("div",{className:"block w-full rounded border border-opacity-20 py-4 px-6 border-overlay bg-surface-200","data-sentry-component":"NoPermissionMessage","data-sentry-source-file":"NoPermission.tsx",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)(s.A,{size:20,"data-sentry-element":"AlertCircle","data-sentry-source-file":"NoPermission.tsx"})}),(0,r.jsx)("div",{className:"flex w-full items-center justify-between",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("p",{className:"text-sm",children:["You need additional permissions to ",t]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:"Contact your organization owner or administrator for assistance."})})]})})]})});return n?(0,r.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,r.jsx)("div",{className:"w-[550px]",children:(0,r.jsx)(a,{})})}):(0,r.jsx)(a,{})}},93463:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var r=n(80263),s=n(2),a=n(67007);let i=e=>{let{title:t,description:n,docsUrl:i,actions:l,className:o}=e;return(0,r.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),n&&(0,r.jsx)("div",{className:"prose text-sm max-w-full",children:n})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==i&&(0,r.jsx)(a.A,{href:i}),l]})]})}},95207:(e,t,n)=>{"use strict";n.d(t,{BS:()=>l,Dm:()=>d,HJ:()=>j,Rf:()=>p,Uw:()=>c,Vw:()=>N,Xr:()=>b,aw:()=>g,bV:()=>i,cJ:()=>f,dX:()=>u,eh:()=>o,fh:()=>y,gu:()=>m,sZ:()=>h,tn:()=>v,xp:()=>x});var r=n(80263),s=n(53239),a=n(2);let i="mx-auto w-full max-w-[1200px]",l="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,s.forwardRef)((e,t)=>{let{className:n,bottomPadding:s,size:i="default",...o}=e;return(0,r.jsx)("div",{ref:t,...o,className:(0,a.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[i],l,s&&"pb-16",n)})}),c=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("header",{...s,ref:t,className:(0,a.cn)("w-full","flex-col gap-3 py-6",n)})}),d=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("h1",{ref:t,...s,className:(0,a.cn)("text-2xl",n)})}),u=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("p",{ref:t,...s,className:(0,a.cn)("text-sm text-foreground-light",n)})}),m=(0,s.forwardRef)((e,t)=>{let{className:n,isFullWidth:s,topPadding:i,...l}=e;return(0,r.jsx)("div",{ref:t,...l,className:(0,a.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",n)})}),f=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("w-full h-px bg-border",n)})}),h=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("h3",{ref:t,...s,className:(0,a.cn)("text-foreground text-xl",n)})}),g=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("p",{ref:t,...s,className:(0,a.cn)("text-sm text-foreground-light",n)})}),x=(0,s.forwardRef)((e,t)=>{let{className:n,children:s,title:i,...l}=e;return(0,r.jsxs)("div",{ref:t,...l,className:(0,a.cn)("col-span-4 xl:col-span-5 prose text-sm",n),children:[i&&(0,r.jsx)("h2",{children:i}),s]})}),p=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",n)})}),v=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("flex flex-col gap-3 items-center",n)})}),j=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("flex w-full items-center",n)})}),y=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("flex flex-row gap-3",n)})}),b=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)("flex flex-col gap-3","min-w-[420px]",n)})}),N=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,...s,className:(0,a.cn)(i,l,"my-8 flex flex-col gap-8",n)})});c.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",x.displayName="ScaffoldSectionDetail",p.displayName="ScaffoldSectionContent",v.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",y.displayName="ScaffoldActionsGroup",N.displayName="ScaffoldContainerLegacy",h.displayName="ScaffoldSectionTitle",g.displayName="ScaffoldSectionDescription"},96565:(e,t,n)=>{"use strict";n.d(t,{_:()=>a});var r=n(53239),s=n(29639);let a=function(e){let t=(0,s.Y)(e);return r.useCallback(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.current(...n)},[t])}},98303:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,b:()=>d});var r=n(80263),s=n(53239),a=n(55335),i=n(16601),l=n(98883),o=n(36365),c=n(65325);let d=e=>{let{visible:t,onClose:n}=e;return(0,r.jsx)(a.A,{size:"medium",visible:t,header:"Schemas managed by Supabase",customFooter:(0,r.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,r.jsx)(i.$,{type:"default",onClick:()=>n(),children:"Understood"})}),onCancel:()=>n(),"data-sentry-element":"Modal","data-sentry-component":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,r.jsxs)(a.A.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,r.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1",children:o.i.map(e=>(0,r.jsx)("code",{className:"text-xs",children:e},e))}),(0,r.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,r.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})},u=e=>{let{schema:t,entity:n}=e,[a,o]=(0,s.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.Fc,{"data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,r.jsx)(c.A,{strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,r.jsxs)(l.XL,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:["Currently viewing ",n," from a protected schema"]}),(0,r.jsxs)(l.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,r.jsxs)("p",{className:"mb-2",children:["The ",(0,r.jsx)("code",{className:"text-xs",children:t})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,r.jsx)(i.$,{type:"default",size:"tiny",onClick:()=>o(!0),"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Learn more"})]})]}),(0,r.jsx)(d,{visible:a,onClose:()=>o(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx"})]})}},99985:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(47370).A)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2479,8058,9353,9413,3730,6110,6182,589,9257,1673,5599,7990,8508,4365,2981,7406,6554,4560,4963,408,4340,30,6616,5969,3719,9472,9088,3423,1252,7613,8601,6593,636,8792],()=>t(6358)),_N_E=e.O()}]);