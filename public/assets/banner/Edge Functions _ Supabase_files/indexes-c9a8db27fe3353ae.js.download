!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="42d9b194-4c64-43a4-b918-07b98968af38",e._sentryDebugIdIdentifier="sentry-dbid-42d9b194-4c64-43a4-b918-07b98968af38")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6106,8966],{6506:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var a=t(80263),s=t(52385),r=t(22775),l=t(67144),i=t(73900),c=t(55307),o=t(83634),d=t(29730),u=t(88601),m=t(59304),x=t(24726);let h=()=>{let e=(0,o.KT)(),n=(0,s.useRouter)().pathname.split("/")[4],{data:t}=(0,i.z)({projectRef:null==e?void 0:e.ref,connectionString:null==e?void 0:e.connectionString}),{data:d}=(0,c.Q)({projectRef:null==e?void 0:e.ref}),u=void 0!==(null!=t?t:[]).find(e=>"pg_net"===e.name),h=(null==d?void 0:d.selected_addons.find(e=>"pitr"===e.type))!==void 0,p=(0,r.p4)(),f=(0,x._)("enablePgReplicate");return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.l,{page:n,menu:(0,m.k)(e,{pgNetExtensionExists:u,pitrEnabled:h,columnLevelPrivileges:p,enablePgReplicate:f}),"data-sentry-element":"ProductMenu","data-sentry-source-file":"DatabaseLayout.tsx"})})},p=(0,d.r)(e=>{let{children:n}=e;return(0,a.jsx)(u.A,{product:"Database",productMenu:(0,a.jsx)(h,{}),isBlocking:!1,"data-sentry-element":"ProjectLayout","data-sentry-component":"DatabaseLayout","data-sentry-source-file":"DatabaseLayout.tsx",children:n})})},7298:(e,n,t)=>{"use strict";t.d(n,{k:()=>i});var a=t(34164),s=t(53239),r=t(89044);let l=e=>(0,a.ZA)("schema",a.tU.withDefault(e)),i=()=>{let{ref:e}=(0,r.g)(),n=e&&e.length>0&&window.localStorage.getItem(r.rS.LAST_SELECTED_SCHEMA(e))||"public",[t,a]=l((0,s.useMemo)(()=>n,[e]));return(0,s.useEffect)(()=>{e&&e.length>0&&window.localStorage.setItem(r.rS.LAST_SELECTED_SCHEMA(e),t)},[t,e]),{selectedSchema:t,setSelectedSchema:a}}},21292:(e,n,t)=>{"use strict";t.d(n,{A:()=>y});var a=t(80263),s=t(60045),r=t(98667),l=t(64238),i=t(97318),c=t(53239),o=t(45969),d=t(15665),u=t(65904),m=t(16601),x=t(81250),h=t(98883),p=t(10738),f=t(50854),g=t(83405);let y=e=>{let{className:n,disabled:t=!1,size:y="tiny",showError:j=!0,selectedSchemaName:v,supportSelectAll:_=!1,excludedSchemas:b=[],onSelectSchema:S,onSelectCreateSchema:N}=e,[w,C]=(0,c.useState)(!1),q=(0,u.SE)(s.aG.TENANT_SQL_ADMIN_WRITE,"schemas"),{project:A}=(0,o.Om)(),{data:E,isLoading:k,isSuccess:I,isError:R,error:T,refetch:P}=(0,d.w$)({projectRef:null==A?void 0:A.ref,connectionString:null==A?void 0:A.connectionString}),L=(E||[]).filter(e=>!b.includes(e.name)).sort((e,n)=>e.name.localeCompare(n.name));return(0,a.jsxs)("div",{className:n,"data-sentry-component":"SchemaSelector","data-sentry-source-file":"SchemaSelector.tsx",children:[k&&(0,a.jsx)(m.$,{type:"default",className:"w-full [&>span]:w-full",size:y,disabled:!0,children:(0,a.jsx)(x.E,{className:"w-full h-3 bg-foreground-muted"})},"schema-selector-skeleton"),j&&R&&(0,a.jsxs)(h.Fc,{variant:"warning",className:"!px-3 !py-3",children:[(0,a.jsx)(h.XL,{className:"text-xs text-amber-900",children:"Failed to load schemas"}),(0,a.jsxs)(h.TN,{className:"text-xs mb-2 break-words",children:["Error: ",null==T?void 0:T.message]}),(0,a.jsx)(m.$,{type:"default",size:"tiny",onClick:()=>P(),children:"Reload schemas"})]}),I&&(0,a.jsxs)(p.AM,{open:w,onOpenChange:C,modal:!1,children:[(0,a.jsx)(p.Wv,{asChild:!0,children:(0,a.jsx)(m.$,{size:y,disabled:t,type:"default","data-testid":"schema-selector",className:"w-full [&>span]:w-full !pr-1 space-x-1",iconRight:(0,a.jsx)(r.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),children:v?(0,a.jsxs)("div",{className:"w-full flex gap-1",children:[(0,a.jsx)("p",{className:"text-foreground-lighter",children:"schema"}),(0,a.jsx)("p",{className:"text-foreground",children:"*"===v?"All schemas":v})]}):(0,a.jsx)("div",{className:"w-full flex gap-1",children:(0,a.jsx)("p",{className:"text-foreground-lighter",children:"Choose a schemaâ€¦"})})})}),(0,a.jsx)(p.hl,{className:"p-0 min-w-[200px] pointer-events-auto",side:"bottom",align:"start",portal:!0,sameWidthAsTrigger:!0,children:(0,a.jsxs)(f.uB,{children:[(0,a.jsx)(f.G7,{placeholder:"Find schema..."}),(0,a.jsxs)(f.oI,{children:[(0,a.jsx)(f.xL,{children:"No schemas found"}),(0,a.jsx)(f.L$,{children:(0,a.jsxs)(g.FK,{className:(L||[]).length>7?"h-[210px]":"",children:[_&&(0,a.jsxs)(f.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S("*"),C(!1)},onClick:()=>{S("*"),C(!1)},children:[(0,a.jsx)("span",{children:"All schemas"}),"*"===v&&(0,a.jsx)(l.A,{className:"text-brand",strokeWidth:2,size:16})]},"select-all"),null==L?void 0:L.map(e=>(0,a.jsxs)(f.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{S(e.name),C(!1)},onClick:()=>{S(e.name),C(!1)},children:[(0,a.jsx)("span",{children:e.name}),v===e.name&&(0,a.jsx)(l.A,{className:"text-brand",strokeWidth:2,size:16})]},e.id))]})}),void 0!==N&&q&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.fx,{}),(0,a.jsx)(f.L$,{children:(0,a.jsxs)(f.h_,{className:"cursor-pointer flex items-center gap-x-2 w-full",onSelect:()=>{N(),C(!1)},onClick:()=>{N(),C(!1)},children:[(0,a.jsx)(i.A,{size:12}),"Create a new schema"]})})]})]})]})})]})]})}},21512:(e,n,t)=>{"use strict";t.d(n,{Lh:()=>u,T_:()=>p});var a=t(32144),s=t(80251),r=t(73969),l=t(26616),i=t.n(l),c=t(77570),o=t(22096),d=t(68324);let u="pgmq_public",m=i()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),x=i()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function h(e){let{projectRef:n,connectionString:t,enable:a}=e,{result:s}=await (0,c.E)({projectRef:n,connectionString:t,sql:a?m:x,queryKey:["toggle-queues-exposure"]});return s}let p=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,a.jE)();return(0,s.n)(e=>h(e),{async onSuccess(n,t,a){let{projectRef:s}=t;await l.invalidateQueries(o.m.exposePostgrestStatus(s)),l.invalidateQueries(d.c.schemas(s)),await (null==e?void 0:e(n,t,a))},async onError(e,t,a){void 0===n?r.oR.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):n(e,t,a)},...t})}},22096:(e,n,t)=>{"use strict";t.d(n,{m:()=>a});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,n,t)=>["projects",e,"queue-messages",n,t].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,n)=>["projects",e,"queue-metrics",n],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},28214:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/indexes",function(){return t(47408)}])},30788:(e,n,t)=>{var a=t(98198),s=t(33312);e.exports=function(e,n,t,r){return null==e?[]:(s(n)||(n=null==n?[]:[n]),s(t=r?void 0:t)||(t=null==t?[]:[t]),a(e,n,t))}},36365:(e,n,t)=>{"use strict";t.d(n,{Q:()=>s,i:()=>a});let a=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",t(21512).Lh],s=a.filter(e=>"extensions"!==e)},37253:(e,n,t)=>{var a=t(48550),s=t(92479),r=t(50084);e.exports=s(function(e,n){return r(e)?a(e,n):[]})},42190:(e,n,t)=>{"use strict";t.d(n,{A:()=>o});var a=t(80263),s=t(63320),r=t.n(s),l=t(42677),i=t(38952),c=t(16601);let o=e=>{let{name:n="",isActive:t,isExternal:s,icon:o,rightIcon:d,url:u="",target:m="_self",onClick:x,textClassName:h="",hoverText:p="",label:f}=e,g=(0,a.jsx)(l.Ay.Item,{icon:o,rounded:!0,active:t,onClick:x,children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,a.jsxs)("div",{title:p||("string"==typeof n?n:""),className:"flex items-center gap-2 truncate w-full "+h,children:[(0,a.jsxs)("span",{className:"truncate",children:[n," "]}),void 0!==f&&(0,a.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),d&&(0,a.jsx)("div",{children:d})]})});return u?s?(0,a.jsx)(c.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:o,children:(0,a.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:n})}):(0,a.jsx)(r(),{href:u,className:"block",target:m,children:g}):g}},42677:(e,n,t)=>{"use strict";t.d(n,{Ay:()=>m});var a=t(80263),s=t(53239),r=t(77690),l=t(2);function i(e){let{children:n,className:t,tag:s="div",style:r}=e;return(0,a.jsx)("".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:n})}i.Title=function(e){let{className:n,level:t=1,children:s,style:r}=e;return(0,a.jsx)("h".concat(t),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:s})},i.Text=function(e){let{className:n,children:t,style:s,type:r,disabled:l,mark:i,code:c,keyboard:o,underline:d,strikethrough:u,strong:m,small:x}=e;return c?(0,a.jsx)("code",{style:s,children:t}):i?(0,a.jsx)("mark",{style:s,children:t}):o?(0,a.jsx)("kbd",{style:s,children:t}):m?(0,a.jsx)("strong",{style:s,children:t}):(0,a.jsx)("span",{style:s,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:t})},i.Link=function(e){let{children:n,target:t="_blank",href:s,className:r,onClick:l,style:i}=e;return(0,a.jsx)("a",{onClick:l,href:s,target:t,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:n})};let c=(0,s.createContext)({type:"text"}),o=e=>{let{type:n}=e;return(0,a.jsx)(c.Provider,{value:{type:n},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},d=()=>{let e=(0,s.useContext)(c);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:n,className:t,ulClassName:s,style:r,type:l="text"}=e;return(0,a.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:t,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(o,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("ul",{className:s,children:n})})})}u.Item=function(e){let{children:n,icon:t,active:s,rounded:i,onClick:c,doNotCloseOverlay:o=!1,showActiveBar:u=!1,style:m}=e,x=(0,r.A)("menu"),{type:h}=d(),p=[x.item.base];p.push(x.item.variants[h].base),s?p.push(x.item.variants[h].active):p.push(x.item.variants[h].normal);let f=[x.item.content.base];s?f.push(x.item.content.active):f.push(x.item.content.normal);let g=[x.item.icon.base];return s?g.push(x.item.icon.active):g.push(x.item.icon.normal),(0,a.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:c,"aria-current":s?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:t}),(0,a.jsx)("span",{className:f.join(" "),children:n})]})},u.Group=function(e){let{children:n,icon:t,title:s}=e,l=(0,r.A)("menu"),{type:i}=d();return(0,a.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[t&&(0,a.jsx)("span",{className:l.group.icon,children:t}),(0,a.jsx)("span",{className:l.group.content,children:s}),n]})},u.Misc=function(e){let{children:n}=e;return(0,a.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,a.jsx)("span",{children:n})})})};let m=u},47408:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>em});var a=t(80263),s=t(66452),r=t(53667),l=t.n(r),i=t(14506),c=t.n(i),o=t(65325),d=t(65842),u=t(94328),m=t(53239),x=t(73969),h=t(89044),p=t(45969),f=t(33794),g=t(98474),y=t(70967),j=t(21292),v=t(17234),_=t(32144),b=t(80251),S=t(77570),N=t(26871);async function w(e){let{projectRef:n,connectionString:t,name:a}=e,{result:s}=await (0,S.E)({projectRef:n,connectionString:t,sql:'drop index if exists "'.concat(a,'"'),queryKey:["indexes"]});return s}let C=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,_.jE)();return(0,b.n)(e=>w(e),{async onSuccess(n,t,s){let{projectRef:r}=t;await a.invalidateQueries(N.K.list(r)),await (null==e?void 0:e(n,t,s))},async onError(e,t,a){void 0===n?x.oR.error("Failed to delete database index: ".concat(e.message)):n(e,t,a)},...t})};var q=t(56947);let A=e=>{let{schema:n}=e;return'\nSELECT schemaname as "schema",\n  tablename as "table",\n  indexname as "name",\n  indexdef as "definition"\nFROM pg_indexes\nWHERE schemaname = \''.concat(n,"';\n").trim()};async function E(e,n){let{schema:t,projectRef:a,connectionString:s}=e;if(!t)throw Error("schema is required");let r=A({schema:t}),{result:l}=await (0,S.E)({projectRef:a,connectionString:s,sql:r,queryKey:["indexes",t]},n);return l}let k=function(e){let{projectRef:n,connectionString:t,schema:a}=e,{enabled:s=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,q.I)(N.K.list(n,a),e=>{let{signal:s}=e;return E({projectRef:n,connectionString:t,schema:a},s)},{enabled:s&&void 0!==n&&void 0!==a,...r})};var I=t(15665),R=t(7298),T=t(36365),P=t(71171),L=t(16601),M=t(35091),F=t(36212),D=t(98303),$=t(98667),z=t(64238),W=t(11352),O=t(63320),G=t.n(O),B=t(67007);async function V(e){let{projectRef:n,connectionString:t,payload:a}=e,{schema:s,entity:r,type:l,columns:i}=a,c='\n  CREATE INDEX ON "'.concat(s,'"."').concat(r,'" USING ').concat(l," (").concat(i.map(e=>'"'.concat(e,'"')).join(", "),");\n  ").trim(),{result:o}=await (0,S.E)({projectRef:n,connectionString:t,sql:c,queryKey:["indexes",s]});return o}let H=function(){let{onSuccess:e,onError:n,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,_.jE)();return(0,b.n)(e=>V(e),{async onSuccess(n,t,s){let{projectRef:r}=t;await a.invalidateQueries(N.K.list(r)),await (null==e?void 0:e(n,t,s))},async onError(e,t,a){void 0===n?x.oR.error("Failed to create database index: ".concat(e.message)):n(e,t,a)},...t})};var K=t(90799),U=t(7677),Q=t(83634),X=t(10738),J=t(50854),Y=t(83405),Z=t(2),ee=t(79295),en=t(82942),et=t(75258),ea=t(27787);let es=[{name:"B-Tree",value:"btree",description:"For querying data with equality or range conditions on columns.\nThis is the default index type that Postgres uses."},{name:"Hash",value:"hash",description:"For querying exact matches on columns"},{name:"GiST",value:"gist",description:"For querying complex data types or custom-defined operators"},{name:"SP-GiST",value:"spgist",description:"Similar to GiST, but is more specialized and customizable"},{name:"GIN",value:"gin",description:"For querying multi-valued data such as arrays or full-text search scenarios"},{name:"BRIN",value:"brin",description:"For querying large tables with sorted data"}],er=e=>{var n,t;let{visible:s,onClose:r}=e,{project:l}=(0,p.Om)(),i=(0,Q.W0)(),[c,o]=(0,m.useState)("public"),[d,u]=(0,m.useState)(void 0),[h,f]=(0,m.useState)([]),[g,j]=(0,m.useState)(es[0].value),[_,b]=(0,m.useState)(!1),[S,N]=(0,m.useState)(!1),[w,C]=(0,m.useState)(""),{data:q}=(0,I.w$)({projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:A,isLoading:E}=(0,U.kD)({schemas:[c],sort:"alphabetical",search:w,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{data:k,isLoading:R,isSuccess:T}=(0,K.HJ)({schema:c,table:d,projectRef:null==l?void 0:l.ref,connectionString:null==l?void 0:l.connectionString}),{mutate:P,isLoading:F}=H({onSuccess:()=>{r(),x.oR.success("Successfully created index")}}),D=(0,m.useMemo)(()=>(null==A?void 0:A.pages.flatMap(e=>e.data.entities))||[],[null==A?void 0:A.pages]);function O(e){C(e)}let V=(null!=(t=null==k||null==(n=k[0])?void 0:n.columns)?t:[]).filter(e=>null!==e).map(e=>({id:e.attname,value:e.attname,name:e.attname,disabled:!1})),er='\nCREATE INDEX ON "'.concat(c,'"."').concat(d,'" USING ').concat(g," (").concat(h.map(e=>'"'.concat(e,'"')).join(", "),");\n").trim(),el=()=>l?d?void P({projectRef:l.ref,connectionString:l.connectionString,payload:{schema:c,entity:d,type:g,columns:h}}):console.error("Entity is required"):console.error("Project is required");(0,m.useEffect)(()=>{s&&(o("public"),u(""),f([]),j(es[0].value))},[s]),(0,m.useEffect)(()=>{u(""),f([]),j(es[0].value)},[c]),(0,m.useEffect)(()=>{f([]),j(es[0].value)},[d]);let ei=0===D.length;return(0,a.jsx)(M.Ay,{size:"large",header:"Create new index",visible:s,onCancel:r,onConfirm:()=>el(),loading:F,confirmText:"Create index","data-sentry-element":"SidePanel","data-sentry-component":"CreateIndexSidePanel","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)("div",{className:"py-6 space-y-6",children:[(0,a.jsxs)(M.Ay.Content,{className:"space-y-6","data-sentry-element":"unknown","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(ea.M,{label:"Select a schema",name:"select-schema",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(X.AM,{modal:!1,open:_,onOpenChange:b,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(L.$,{type:"default",size:"medium",className:"w-full [&>span]:w-full text-left",iconRight:(0,a.jsx)($.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==c&&""!==c?c:"Choose a schema"})}),(0,a.jsx)(X.hl,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(J.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(J.G7,{placeholder:"Find table...",value:w,onValueChange:O,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(J.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(J.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:"No schemas found"}),(0,a.jsx)(J.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(Y.FK,{className:(q||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=q?q:[]).map(e=>(0,a.jsxs)(J.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{o(e.name),b(!1)},onClick:()=>{o(e.name),b(!1)},children:[(0,a.jsx)("span",{children:e.name}),d===e.name&&(0,a.jsx)(z.A,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),(0,a.jsx)(ea.M,{label:"Select a table",name:"select-table",description:ei&&!E&&"Create a table in this schema via the Table or SQL editor first",isReactForm:!1,"data-sentry-element":"FormItemLayout","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(X.AM,{modal:!1,open:S,onOpenChange:N,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(X.Wv,{asChild:!0,disabled:ei||E,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(L.$,{type:"default",size:"medium",className:(0,Z.cn)("w-full [&>span]:w-full text-left",""===d&&"text-foreground-lighter"),iconRight:(0,a.jsx)($.A,{className:"text-foreground-muted",strokeWidth:2,size:14}),"data-sentry-element":"Button","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:void 0!==d&&""!==d?d:ei?"No tables available in schema":"Choose a table"})}),(0,a.jsx)(X.hl,{className:"p-0",side:"bottom",align:"start",sameWidthAsTrigger:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsxs)(J.uB,{shouldFilter:!1,"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(J.G7,{placeholder:"Find table...",value:w,onValueChange:O,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx"}),(0,a.jsxs)(J.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:[(0,a.jsx)(J.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:E?(0,a.jsxs)("div",{className:"flex items-center gap-2 text-center justify-center",children:[(0,a.jsx)(W.A,{size:12,className:"animate-spin"}),"Loading..."]}):"No tables found"}),(0,a.jsx)(J.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(0,a.jsx)(Y.FK,{className:(D||[]).length>7?"h-[210px]":"","data-sentry-element":"ScrollArea","data-sentry-source-file":"CreateIndexSidePanel.tsx",children:(null!=D?D:[]).map(e=>(0,a.jsxs)(J.h_,{className:"cursor-pointer flex items-center justify-between space-x-2 w-full",onSelect:()=>{u(e.name),N(!1)},onClick:()=>{u(e.name),N(!1)},children:[(0,a.jsx)("span",{children:e.name}),d===e.name&&(0,a.jsx)(z.A,{className:"text-brand",strokeWidth:2,size:16})]},e.name))})})]})]})})]})}),d&&(0,a.jsxs)(ea.M,{label:"Select up to 32 columns",isReactForm:!1,children:[R&&(0,a.jsx)(v.A,{className:"py-4"}),T&&(0,a.jsx)(et._,{options:V,placeholder:"Choose which columns to create an index on",searchPlaceholder:"Search for a column",value:h,onChange:f})]})]}),h.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Ay.Separator,{}),(0,a.jsxs)(M.Ay.Content,{className:"space-y-6",children:[(0,a.jsx)(ea.M,{label:"Select an index type",name:"selected-index-type",isReactForm:!1,children:(0,a.jsxs)(ee.l6,{disabled:i,value:g,onValueChange:j,name:"selected-index-type",children:[(0,a.jsx)(ee.bq,{size:"small",children:(0,a.jsx)(ee.yv,{className:"font-mono",children:g})}),(0,a.jsx)(ee.gC,{children:es.map((e,n)=>(0,a.jsxs)(m.Fragment,{children:[(0,a.jsx)(ee.eb,{value:e.value,children:(0,a.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,a.jsx)("span",{children:e.name}),e.description.split("\n").map((n,t)=>(0,a.jsx)("span",{className:"text-foreground-lighter group-focus:text-foreground-light group-data-[state=checked]:text-foreground-light",children:n},"".concat(e.value,"-description-").concat(t)))]})}),n<es.length-1&&(0,a.jsx)(ee.mi,{})]},e.name))})]})}),i&&(0,a.jsx)(en.Z,{type:"default",className:"!mt-2",title:"OrioleDB currently only supports the B-tree index type",description:"More index types may be supported when OrioleDB is no longer in preview",children:(0,a.jsx)(B.A,{className:"mt-2",abbrev:!1,href:"https://supabase.com/docs"})})]}),(0,a.jsx)(M.Ay.Separator,{}),(0,a.jsx)(M.Ay.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-sm",children:"Preview of SQL statement"}),(0,a.jsx)(L.$,{asChild:!0,type:"default",children:(0,a.jsx)(G(),{href:void 0!==l?"/project/".concat(l.ref,"/sql/new?content=").concat(er):"/",children:"Open in SQL Editor"})})]})}),(0,a.jsx)("div",{className:"h-[200px] !mt-2",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(y.A,{isReadOnly:!0,autofocus:!1,id:"".concat(c,"-").concat(d,"-").concat(h.join(","),"-").concat(g),language:"pgsql",defaultValue:er})})})]})]})})},el=()=>{var e,n;let{project:t}=(0,p.Om)(),{schema:s,table:r}=(0,h.g)(),[i,_]=(0,m.useState)(""),{selectedSchema:b,setSelectedSchema:S}=(0,R.k)(),[N,w]=(0,m.useState)(!1),[q,A]=(0,m.useState)(),[E,$]=(0,m.useState)(),{data:z,error:W,isLoading:O,isSuccess:G,isError:B}=k({schema:b,projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{data:V,isLoading:H,isSuccess:K,isError:U}=(0,I.w$)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString}),{mutate:Q,isLoading:X}=C({onSuccess:async()=>{$(void 0),x.oR.success("Successfully deleted index")}}),[J]=l()(null!=V?V:[],e=>{var n;return T.i.includes(null!=(n=null==e?void 0:e.name)?n:"")}),Y=null==V?void 0:V.find(e=>e.name===b),Z=J.some(e=>e.id===(null==Y?void 0:Y.id)),ee=c()(null!=z?z:[],e=>e.name.toLocaleLowerCase()),en=i.length>0?ee.filter(e=>e.name.includes(i)||e.table.includes(i)):ee,et=e=>{if(!t)return console.error("Project is required");Q({projectRef:t.ref,connectionString:t.connectionString,name:e.name})};return(0,m.useEffect)(()=>{if(void 0!==s){let e=null==V?void 0:V.find(e=>e.name===s);void 0!==e&&S(e.name)}},[s,K]),(0,m.useEffect)(()=>{void 0!==r&&_(r)},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"pb-8",children:(0,a.jsxs)("div",{className:"flex flex-col gap-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[H&&(0,a.jsx)(v.A,{className:"w-[260px]"}),U&&(0,a.jsxs)("div",{className:"w-[260px] text-foreground-light text-sm border px-3 py-1.5 rounded flex items-center space-x-2",children:[(0,a.jsx)(o.A,{strokeWidth:2,size:16}),(0,a.jsx)("p",{children:"Failed to load schemas"})]}),K&&(0,a.jsx)(j.A,{className:"w-full lg:w-[180px]",size:"tiny",showError:!1,selectedSchemaName:b,onSelectSchema:S}),(0,a.jsx)(P.A,{size:"tiny",value:i,className:"w-full lg:w-52",onChange:e=>_(e.target.value),placeholder:"Search for an index",icon:(0,a.jsx)(d.A,{size:14}),"data-sentry-element":"Input","data-sentry-source-file":"Indexes.tsx"}),!Z&&(0,a.jsx)(L.$,{className:"ml-auto flex-grow lg:flex-grow-0",type:"primary",onClick:()=>w(!0),disabled:!K,children:"Create index"})]}),Z&&(0,a.jsx)(D.A,{schema:b,entity:"indexes"}),O&&(0,a.jsx)(v.y,{}),B&&(0,a.jsx)(g.A,{error:W,subject:"Failed to retrieve database indexes"}),G&&(0,a.jsx)("div",{className:"w-full overflow-hidden overflow-x-auto",children:(0,a.jsx)(f.A,{head:[(0,a.jsx)(f.A.th,{children:"Schema"},"schema"),(0,a.jsx)(f.A.th,{children:"Table"},"table"),(0,a.jsx)(f.A.th,{children:"Name"},"name"),(0,a.jsx)(f.A.th,{},"buttons")],body:(0,a.jsxs)(a.Fragment,{children:[0===ee.length&&0===i.length&&(0,a.jsx)(f.A.tr,{children:(0,a.jsxs)(f.A.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No indexes created yet"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['There are no indexes found in the schema "',b,'"']})]})}),0===ee.length&&i.length>0&&(0,a.jsx)(f.A.tr,{children:(0,a.jsxs)(f.A.td,{colSpan:4,children:[(0,a.jsx)("p",{className:"text-sm text-foreground",children:"No results found"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:['Your search for "',i,'" did not return any results']})]})}),en.length>0&&en.map(e=>(0,a.jsxs)(f.A.tr,{children:[(0,a.jsx)(f.A.td,{children:(0,a.jsx)("p",{title:e.schema,children:e.schema})}),(0,a.jsx)(f.A.td,{children:(0,a.jsx)("p",{title:e.table,children:e.table})}),(0,a.jsx)(f.A.td,{children:(0,a.jsx)("p",{title:e.name,children:e.name})}),(0,a.jsx)(f.A.td,{children:(0,a.jsxs)("div",{className:"flex justify-end items-center space-x-2",children:[(0,a.jsx)(L.$,{type:"default",onClick:()=>A(e),children:"View definition"}),!Z&&(0,a.jsx)(L.$,{type:"text",className:"px-1",icon:(0,a.jsx)(u.A,{}),onClick:()=>$(e)})]})})]},e.name))]})})})]})}),(0,a.jsx)(M.Ay,{size:"xlarge",visible:void 0!==q,header:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Index:"}),(0,a.jsx)("code",{className:"text-sm ml-2",children:null==q?void 0:q.name})]}),onCancel:()=>A(void 0),"data-sentry-element":"SidePanel","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("div",{className:"h-full",children:(0,a.jsx)("div",{className:"relative h-full",children:(0,a.jsx)(y.A,{isReadOnly:!0,id:null!=(e=null==q?void 0:q.name)?e:"",language:"pgsql",defaultValue:null!=(n=null==q?void 0:q.definition)?n:"","data-sentry-element":"CodeEditor","data-sentry-source-file":"Indexes.tsx"})})})}),(0,a.jsx)(er,{visible:N,onClose:()=>w(!1),"data-sentry-element":"CreateIndexSidePanel","data-sentry-source-file":"Indexes.tsx"}),(0,a.jsx)(F.A,{variant:"warning",size:"medium",loading:X,visible:void 0!==E,title:(0,a.jsxs)(a.Fragment,{children:["Confirm to delete index ",(0,a.jsx)("code",{className:"text-sm",children:null==E?void 0:E.name})]}),confirmLabel:"Confirm delete",confirmLabelLoading:"Deleting...",onConfirm:()=>void 0!==E?et(E):{},onCancel:()=>$(void 0),alert:{title:"This action cannot be undone",description:"Deleting an index that is still in use will cause queries to slow down, and in some cases causing significant performance issues."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"Indexes.tsx",children:(0,a.jsx)("ul",{className:"mt-4 space-y-5",children:(0,a.jsx)("li",{className:"flex gap-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:"text-sm",children:"Before deleting this index, consider:"}),(0,a.jsxs)("ul",{className:"space-y-2 mt-2 text-sm text-foreground-light",children:[(0,a.jsx)("li",{className:"list-disc ml-6",children:"This index is no longer in use"}),(0,a.jsx)("li",{className:"list-disc ml-6",children:"The table which the index is on is not currently in use, as dropping an index requires a short exclusive access lock on the table."})]})]})})})})]})};var ei=t(6506),ec=t(95207),eo=t(93463),ed=t(6408);let eu=()=>(0,a.jsx)(ec.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"IndexesPage","data-sentry-source-file":"indexes.tsx",children:(0,a.jsxs)(ec.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(ec.Rf,{className:"gap-0","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)(eo.M,{className:"!mb-0",title:"Database Indexes",description:"Improve query performance against your database","data-sentry-element":"FormHeader","data-sentry-source-file":"indexes.tsx"})}),(0,a.jsxs)(ec.xp,{className:"flex items-center lg:justify-end gap-2 flex-wrap","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"indexes.tsx",children:[(0,a.jsx)(B.A,{className:"no-underline",href:"https://supabase.com/docs/guides/database/query-optimization","data-sentry-element":"DocsButton","data-sentry-source-file":"indexes.tsx"}),(0,a.jsx)(L.$,{asChild:!0,type:"default",icon:(0,a.jsx)(s.A,{strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"indexes.tsx",children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",className:"no-underline",href:"https://supabase.com/docs/guides/database/extensions/index_advisor",children:"Index Advisor"})})]}),(0,a.jsx)("div",{className:"col-span-12 mt-3",children:(0,a.jsx)(el,{"data-sentry-element":"Indexes","data-sentry-source-file":"indexes.tsx"})})]})});eu.getLayout=e=>(0,a.jsx)(ed.A,{children:(0,a.jsx)(ei.A,{title:"Indexes",children:e})});let em=eu},48550:(e,n,t)=>{var a=t(45558),s=t(10116),r=t(59568),l=t(71057),i=t(10876),c=t(99582);e.exports=function(e,n,t,o){var d=-1,u=s,m=!0,x=e.length,h=[],p=n.length;if(!x)return h;t&&(n=l(n,i(t))),o?(u=r,m=!1):n.length>=200&&(u=c,m=!1,n=new a(n));e:for(;++d<x;){var f=e[d],g=null==t?f:t(f);if(f=o||0!==f?f:0,m&&g==g){for(var y=p;y--;)if(n[y]===g)continue e;h.push(f)}else u(n,g,o)||h.push(f)}return h}},67144:(e,n,t)=>{"use strict";t.d(n,{l:()=>i});var a=t(80263),s=t(42677),r=t(38952),l=t(42190);let i=e=>{let{page:n,menu:t}=e;return(0,a.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,a.jsx)(s.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:t.map((e,i)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"my-6 space-y-8",children:(0,a.jsxs)("div",{className:"mx-3",children:[(0,a.jsx)(s.Ay.Group,{title:e.title?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,a.jsx)("span",{children:e.title}),e.isPreview&&(0,a.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,a.jsx)("div",{children:e.items.map(e=>{let t=e.pages?e.pages.includes(null!=n?n:""):n===e.key;return(0,a.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:t,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==t.length-1&&(0,a.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},73900:(e,n,t)=>{"use strict";t.d(n,{z:()=>o});var a=t(56947),s=t(3807),r=t(32405),l=t(83634),i=t(58897);async function c(e,n){let{projectRef:t,connectionString:a}=e;if(!t)throw Error("projectRef is required");let r=new Headers;a&&r.set("x-connection-encrypted",a);let{data:l,error:i}=await (0,s.Jt)("/platform/pg-meta/{ref}/extensions",{params:{header:{"x-connection-encrypted":a},path:{ref:t}},headers:r,signal:n});return i&&(0,s.H4)(i),l}let o=function(e){let{projectRef:n,connectionString:t}=e,{enabled:s=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,l.KT)(),u=(null==d?void 0:d.status)===i.BU.ACTIVE_HEALTHY;return(0,a.I)(r.I.list(n),e=>{let{signal:a}=e;return c({projectRef:n,connectionString:t},a)},{enabled:s&&void 0!==n&&u,...o})}},74959:(e,n,t)=>{"use strict";t.d(n,{a:()=>r,h:()=>l});var a=t(80263),s=t(23278);let r=e=>{let{name:n}=e;return(0,a.jsx)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex cursor-not-allowed items-center space-x-2 rounded bg-gray-600 py-0.5 px-2 text-sm","data-sentry-component":"BadgeDisabled","data-sentry-source-file":"Badges.tsx",children:(0,a.jsx)("span",{className:"opacity-50",children:n})})},l=e=>{let{name:n,handleRemove:t}=e;return(0,a.jsxs)("div",{className:"text-typography-body-light [[data-theme*=dark]_&]:text-typography-body-dark flex items-center space-x-2 rounded bg-surface-300 py-0.5 px-2 text-sm",onClick:e=>e.preventDefault(),"data-sentry-component":"BadgeSelected","data-sentry-source-file":"Badges.tsx",children:[(0,a.jsx)("span",{children:n}),(0,a.jsx)(s.A,{size:12,className:"cursor-pointer opacity-50 transition hover:opacity-100",onClick:e=>{e.preventDefault(),e.stopPropagation(),t()},"data-sentry-element":"X","data-sentry-source-file":"Badges.tsx"})]})}},75258:(e,n,t)=>{"use strict";t.d(n,{_:()=>f});var a=t(80263),s=t(30788),r=t.n(s),l=t(37253),i=t.n(l),c=t(68656),o=t(64238),d=t(53239),u=t(10738),m=t(2),x=t(50854),h=t(83405),p=t(74959);let f=e=>{let{options:n,value:t,placeholder:s,searchPlaceholder:l="Search for option",disabled:f=!1,onChange:g=()=>{}}=e,[y,j]=(0,d.useState)(!1),[v,_]=(0,d.useState)(t||[]),b=t||v,S=r()(n,["disabled"],["desc"]),N=e=>void 0!==(b||[]).find(n=>n===e.value),w=e=>{let t=N(e)?[...i()(b,e.value)]:[...b.concat([e.value])],a=n.filter(e=>e.disabled).map(e=>e.name),s=[...new Set(t.concat(a))];_(s),g(s)};return(0,a.jsx)("div",{className:f?"pointer-events-none opacity-50":"","data-sentry-component":"MultiSelectV2","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(u.AM,{open:y,onOpenChange:j,modal:!1,"data-sentry-element":"Popover_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(u.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)("div",{className:(0,m.cn)("relative border border-strong bg-control rounded","flex w-full flex-wrap items-start gap-1.5 p-1.5 cursor-pointer","".concat(0===b.length?"h-9":"")),onClick:()=>j(!0),children:[0===b.length&&s&&(0,a.jsx)("div",{className:"px-2 text-sm text-foreground-light h-full flex items-center",children:s}),b.map((e,n)=>{var t;let s="".concat(e,"-").concat(n),r=S.find(n=>n.value===e),l=null!=(t=null==r?void 0:r.disabled)&&t;return r?l?(0,a.jsx)(p.a,{name:r.name},s):(0,a.jsx)(p.h,{name:r.name,handleRemove:()=>w(r)},s):(0,a.jsx)(a.Fragment,{})}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pl-3 pr-2 flex space-x-1 items-center cursor-pointer ",children:(0,a.jsx)(c.A,{size:16,strokeWidth:2,className:"text-foreground-lighter","data-sentry-element":"ChevronDown","data-sentry-source-file":"MultiSelectV2.tsx"})})]})}),(0,a.jsx)(u.hl,{className:"p-0 w-96 border-strong",side:"bottom",align:"start","data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsxs)(x.uB,{"data-sentry-element":"Command_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.G7,{placeholder:l,"data-sentry-element":"CommandInput_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx"}),(0,a.jsxs)(x.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:[(0,a.jsx)(x.xL,{"data-sentry-element":"CommandEmpty_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:"No options found"}),(0,a.jsx)(x.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"MultiSelectV2.tsx",children:(0,a.jsx)(h.FK,{className:(0,m.cn)(S.length>7?"h-[210px]":""),"data-sentry-element":"ScrollArea","data-sentry-source-file":"MultiSelectV2.tsx",children:null==S?void 0:S.map(e=>{let n=!!(b&&b.find(n=>n===e.value));return(0,a.jsx)(x.h_,{value:e.value,className:"cursor-pointer w-full",onClick:()=>w(e),onSelect:()=>w(e),children:(0,a.jsxs)("div",{className:"w-full flex items-center justify-between",children:[e.name,n&&(0,a.jsx)(o.A,{size:14})]})},e.id)})})})]})]})})]})})}},90799:(e,n,t)=>{"use strict";t.d(n,{HJ:()=>c});var a=t(56947),s=t(77570),r=t(68324);let l=e=>{let{table:n,schema:t}=e,a=[];n&&a.push("tablename = '".concat(n,"'")),t&&a.push("schemaname = '".concat(t,"'"));let s=a.length>0?"WHERE ".concat(a.join(" AND ")):"";return"\n  \n  SELECT\n    tbl.schemaname,\n    tbl.tablename,\n    tbl.quoted_name,\n    tbl.is_table,\n    json_agg(a) as columns\n  FROM\n    (\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        true as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind = 'r'\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n      union all\n      SELECT\n        n.nspname as schemaname,\n        c.relname as tablename,\n        (quote_ident(n.nspname) || '.' || quote_ident(c.relname)) as quoted_name,\n        false as is_table\n      FROM\n        pg_catalog.pg_class c\n        JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\n      WHERE\n        c.relkind in ('v', 'm')\n        AND n.nspname not in ('information_schema', 'pg_catalog', 'pg_toast')\n        AND n.nspname not like 'pg_temp_%'\n        AND n.nspname not like 'pg_toast_temp_%'\n        AND has_schema_privilege(n.oid, 'USAGE') = true\n        AND has_table_privilege(quote_ident(n.nspname) || '.' || quote_ident(c.relname), 'SELECT, INSERT, UPDATE, DELETE, TRUNCATE, REFERENCES, TRIGGER') = true\n    ) as tbl\n    LEFT JOIN (\n      SELECT\n        attrelid,\n        attname,\n        format_type(atttypid, atttypmod) as data_type,\n        attnum,\n        attisdropped\n      FROM\n        pg_attribute\n    ) as a ON (\n      a.attrelid = tbl.quoted_name::regclass\n      AND a.attnum > 0\n      AND NOT a.attisdropped\n      AND has_column_privilege(tbl.quoted_name, a.attname, 'SELECT, INSERT, UPDATE, REFERENCES')\n    )\n  ".concat(s,"\n  GROUP BY schemaname, tablename, quoted_name, is_table;\n").trim()};async function i(e,n){let{projectRef:t,connectionString:a,table:r,schema:i}=e,c=l({table:r,schema:i}),{result:o}=await (0,s.E)({projectRef:t,connectionString:a,sql:c,queryKey:["table-columns",i,r]},n);return o}let c=function(e){let{projectRef:n,connectionString:t,schema:s,table:l}=e,{enabled:c=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.c.tableColumns(n,s,l),e=>{let{signal:a}=e;return i({projectRef:n,connectionString:t,schema:s,table:l},a)},{enabled:c&&void 0!==n,...o})}},93463:(e,n,t)=>{"use strict";t.d(n,{M:()=>l});var a=t(80263),s=t(2),r=t(67007);let l=e=>{let{title:n,description:t,docsUrl:l,actions:i,className:c}=e;return(0,a.jsxs)("div",{className:(0,s.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(c)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h3",{className:"text-foreground text-xl prose",children:n}),t&&(0,a.jsx)("div",{className:"prose text-sm max-w-full",children:t})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,a.jsx)(r.A,{href:l}),i]})]})}},95207:(e,n,t)=>{"use strict";t.d(n,{BS:()=>i,Dm:()=>d,HJ:()=>j,Rf:()=>g,Uw:()=>o,Vw:()=>b,Xr:()=>_,aw:()=>p,bV:()=>l,cJ:()=>x,dX:()=>u,eh:()=>c,fh:()=>v,gu:()=>m,sZ:()=>h,tn:()=>y,xp:()=>f});var a=t(80263),s=t(53239),r=t(2);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",c=(0,s.forwardRef)((e,n)=>{let{className:t,bottomPadding:s,size:l="default",...c}=e;return(0,a.jsx)("div",{ref:n,...c,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,s&&"pb-16",t)})}),o=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("header",{...s,ref:n,className:(0,r.cn)("w-full","flex-col gap-3 py-6",t)})}),d=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h1",{ref:n,...s,className:(0,r.cn)("text-2xl",t)})}),u=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:n,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),m=(0,s.forwardRef)((e,n)=>{let{className:t,isFullWidth:s,topPadding:l,...i}=e;return(0,a.jsx)("div",{ref:n,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",s?"w-full":"gap-3 lg:grid md:grid-cols-12",t)})}),x=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("w-full h-px bg-border",t)})}),h=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:n,...s,className:(0,r.cn)("text-foreground text-xl",t)})}),p=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:n,...s,className:(0,r.cn)("text-sm text-foreground-light",t)})}),f=(0,s.forwardRef)((e,n)=>{let{className:t,children:s,title:l,...i}=e;return(0,a.jsxs)("div",{ref:n,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",t),children:[l&&(0,a.jsx)("h2",{children:l}),s]})}),g=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",t)})}),y=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-col gap-3 items-center",t)})}),j=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex w-full items-center",t)})}),v=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-row gap-3",t)})}),_=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",t)})}),b=(0,s.forwardRef)((e,n)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:n,...s,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",t)})});o.displayName="ScaffoldHeader",d.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",c.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",_.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",b.displayName="ScaffoldContainerLegacy",h.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription"},98303:(e,n,t)=>{"use strict";t.d(n,{A:()=>u,b:()=>d});var a=t(80263),s=t(53239),r=t(55335),l=t(16601),i=t(98883),c=t(36365),o=t(65325);let d=e=>{let{visible:n,onClose:t}=e;return(0,a.jsx)(r.A,{size:"medium",visible:n,header:"Schemas managed by Supabase",customFooter:(0,a.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,a.jsx)(l.$,{type:"default",onClick:()=>t(),children:"Understood"})}),onCancel:()=>t(),"data-sentry-element":"Modal","data-sentry-component":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:(0,a.jsxs)(r.A.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"The following schemas are managed by Supabase and are currently protected from write access through the dashboard."}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:c.i.map(e=>(0,a.jsx)("code",{className:"text-xs",children:e},e))}),(0,a.jsx)("p",{className:"text-sm !mt-4",children:"These schemas are critical to the functionality of your Supabase project and hence we highly recommend not altering them."}),(0,a.jsx)("p",{className:"text-sm",children:"You can, however, still interact with those schemas through the SQL Editor although we advise you only do so if you know what you are doing."})]})})},u=e=>{let{schema:n,entity:t}=e,[r,c]=(0,s.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.Fc,{"data-sentry-element":"Alert_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsx)(o.A,{strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"ProtectedSchemaWarning.tsx"}),(0,a.jsxs)(i.XL,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:["Currently viewing ",t," from a protected schema"]}),(0,a.jsxs)(i.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:[(0,a.jsxs)("p",{className:"mb-2",children:["The ",(0,a.jsx)("code",{className:"text-xs",children:n})," schema is managed by Supabase and is read-only through the dashboard."]}),(0,a.jsx)(l.$,{type:"default",size:"tiny",onClick:()=>c(!0),"data-sentry-element":"Button","data-sentry-source-file":"ProtectedSchemaWarning.tsx",children:"Learn more"})]})]}),(0,a.jsx)(d,{visible:r,onClose:()=>c(!1),"data-sentry-element":"ProtectedSchemaModal","data-sentry-source-file":"ProtectedSchemaWarning.tsx"})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[89,2479,8058,9353,9413,3730,6110,6182,589,9257,1673,5599,7990,8508,4365,2981,7406,6554,4560,4963,408,4340,30,6616,5969,3719,9472,9088,3423,1252,7613,8601,6593,636,8792],()=>n(28214)),_N_E=e.O()}]);