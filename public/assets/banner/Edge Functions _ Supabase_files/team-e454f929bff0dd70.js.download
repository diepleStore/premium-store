!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ab4e7e86-bcd7-495b-8984-65fb352ddfcc",e._sentryDebugIdIdentifier="sentry-dbid-ab4e7e86-bcd7-495b-8984-65fb352ddfcc")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1562,6106],{107:(e,t,r)=>{var l=r(50117),a=r(94277),n=Object.prototype.hasOwnProperty;e.exports=a(function(e,t,r){n.call(e,r)?e[r].push(t):l(e,r,[t])})},8563:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var l=r(56947),a=r(3807),n=r(42719);async function s(e,t){let{slug:r}=e;if(!r)throw Error("slug is required");let[l,n]=await Promise.all([(0,a.Jt)("/platform/organizations/{slug}/members",{params:{path:{slug:r}},signal:t}),(0,a.Jt)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:r}},signal:t})]),{data:s,error:i}=l,{data:o,error:d}=n;return i&&(0,a.H4)(i),d&&(0,a.H4)(d),[...s,...o.invitations.map(e=>({...{invited_at:e.invited_at,invited_id:e.id,mfa_enabled:!1,username:e.invited_email.slice(0,1),primary_email:e.invited_email},role_ids:[e.role_id]}))]}let i=function(e){let{slug:t}=e,{enabled:r=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)(n.O.members(t),e=>{let{signal:r}=e;return s({slug:t},r)},{enabled:r&&void 0!==t,...a})}},8897:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});var l=r(56947),a=r(3807),n=r(77054);async function s(e,t){let{installationId:r}=e;if(!r)throw Error("installationId is required");let{data:l,error:n}=await (0,a.Jt)("/platform/vercel/redirect/{installation_id}",{params:{path:{installation_id:r}},signal:t});return n&&(0,a.H4)(n),l}let i=function(e){let{installationId:t}=e,{enabled:r=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)(n.Z.vercelRedirect(t),e=>{let{signal:r}=e;return s({installationId:t},r)},{enabled:r&&void 0!==t,...a})}},11375:(e,t,r)=>{"use strict";r.d(t,{d:()=>c});var l=r(80263),a=r(44893),n=r(79279),s=r(53239),i=r(2);let o=(0,n.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,n.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),c=s.forwardRef((e,t)=>{let{className:r,size:n,...s}=e;return(0,l.jsx)(a.bL,{className:(0,i.cn)(o({size:n}),r),...s,ref:t,children:(0,l.jsx)(a.zi,{className:(0,i.cn)(d({size:n}))})})});c.displayName=a.bL.displayName},16477:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])},17573:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var l=r(80263),a=r(22063),n=r.n(a);let s=()=>(0,l.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center","data-sentry-component":"LogoLoader","data-sentry-source-file":"LogoLoader.tsx",children:(0,l.jsx)("div",{children:(0,l.jsx)("svg",{width:"60",height:"62",viewBox:"0 0 60 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:n().loading,"data-sentry-element":"svg","data-sentry-source-file":"LogoLoader.tsx",children:(0,l.jsx)("path",{d:"M30.2571 4.12811L30.257 4.12389C30.2133 1.21067 26.5349 -0.034778 24.7224 2.24311L1.76109 31.0996C-1.21104 34.8348 1.45637 40.34 6.23131 40.34H29.4845L29.7563 58.4432C29.8 61.3564 33.4783 62.6016 35.2908 60.324L34.8996 60.0127L35.2908 60.324L58.2521 31.4674C61.2241 27.7322 58.5568 22.227 53.782 22.227H30.3762L30.2571 4.12811Z",stroke:"hsl(var(--brand-default))",strokeWidth:2,strokeLinecap:"round","data-sentry-element":"path","data-sentry-source-file":"LogoLoader.tsx"})})})})},19438:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/org/[slug]/team",function(){return r(98148)}])},22063:e=>{e.exports={loading:"loading-anim_loading__rDN7u",dash:"loading-anim_dash__HIPR0"}},22392:(e,t,r)=>{"use strict";r.d(t,{cC:()=>c,j5:()=>d});var l=r(60045),a=r(56947),n=r(3807),s=r(65904),i=r(60237);async function o(e,t){let{orgSlug:r}=e;if(!r)throw Error("orgSlug is required");let{error:l,data:a}=await (0,n.Jt)("/platform/organizations/{slug}/billing/subscription",{params:{path:{slug:r}},signal:t});return l&&(0,n.H4)(l),a}let d=function(e){let{orgSlug:t}=e,{enabled:r=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,s.SE)(l.aG.BILLING_READ,"stripe.subscriptions");return(0,a.I)(i.s.orgSubscription(t),e=>{let{signal:r}=e;return o({orgSlug:t},r)},{enabled:r&&d&&void 0!==t,staleTime:36e5,...n})},c=e=>{let{data:t}=d({orgSlug:e});return(null==t?void 0:t.plan.id)==="enterprise"||(null==t?void 0:t.plan.id)==="team"}},23104:(e,t,r)=>{"use strict";r.d(t,{O:()=>l});let l={rolesV2:e=>["organization-members",e,"roles-v2"],invitations:e=>["organization-members",e,"invitations"],invitation:(e,t)=>["organization-members",e,"invitations",t],token:(e,t)=>["organization-members",e,"token",t]}},24059:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var l=r(80263),a=r(16477),n=r(99923),s=r(66452),i=r(63320),o=r.n(i),d=r(53239),c=r(16601);let u=(0,d.forwardRef)((e,t)=>{let{icon:r,title:i,description:u,url:m,urlLabel:f="Read more",defaultVisibility:x=!1,hideCollapse:h=!1,button:p,className:g="",block:v=!1}=e,[j,y]=(0,d.useState)(x);return(0,l.jsx)("div",{ref:t,role:"alert",className:"".concat(v?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(g),children:(0,l.jsxs)("div",{className:"flex flex-col px-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[r&&(0,l.jsx)("span",{className:"text-foreground-lighter",children:r}),(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("h5",{className:"text-sm text-foreground",children:i})})]}),u&&!h?(0,l.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>y(!j),children:j?(0,l.jsx)(a.A,{size:14,strokeWidth:1.5}):(0,l.jsx)(n.A,{size:14,strokeWidth:1.5})}):null]}),(u||m||p)&&(0,l.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:500*!!j},children:[(0,l.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,l.jsx)("div",{children:(0,l.jsx)(c.$,{asChild:!0,type:"default",icon:(0,l.jsx)(s.A,{}),children:(0,l.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:f})})}),p&&(0,l.jsx)("div",{children:p})]})]})})});u.displayName="InformationBox";let m=u},27787:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var l=r(80263),a=r(53239),n=r(85669),s=r(79279),i=r(37055),o=r(2),d=r(27863),c=r(76403);let u=(0,s.F)("relative grid gap-10",{variants:{size:{tiny:"text-xs",small:"text-sm leading-4",medium:"text-sm",large:"text-base",xlarge:"text-base"},align:{left:"",right:""},responsive:{true:"",false:""},layout:{horizontal:"flex flex-col gap-2 md:grid md:grid-cols-12",vertical:"flex flex-col gap-2",flex:"flex flex-row gap-3","flex-row-reverse":"flex flex-row gap-6 flex-row-reverse justify-between"},flex:{true:"",false:""}},compoundVariants:[{layout:"flex",align:"right",className:"justify-between"},{layout:"flex-row-reverse",align:"right",className:"justify-between"}],defaultVariants:{}}),m=(0,s.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"flex flex-col gap-2 col-span-4",vertical:"flex flex-row gap-2 justify-between",flex:"flex flex-col gap-0","flex-row-reverse":"flex flex-col"},labelLayout:{horizontal:"",vertical:"","":""}},compoundVariants:[{flex:!0,align:"left",className:"order-2"},{flex:!0,align:"right",className:"order-1"},{layout:"vertical",labelLayout:void 0,flex:!1,className:"flex flex-row gap-2 justify-between"},{layout:"horizontal",className:"flex flex-col gap-2"}],defaultVariants:{}}),f=(0,s.F)("transition-all duration-500 ease-in-out",{variants:{flex:{true:"",false:""},align:{left:"order-1",right:"order-2"},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:"order-1"},{flex:!0,align:"right",className:"order-2"},{layout:"vertical",className:"col-span-12"},{layout:"horizontal",align:"left",className:"col-span-8"},{layout:"horizontal",align:"right",className:"text-right"}],defaultVariants:{}}),x=(0,s.F)("text-foreground-lighter leading-normal",{variants:{size:{...c.SK.text},layout:{vertical:"mt-2",horizontal:"mt-2",flex:"","flex-row-reverse":""}},defaultVariants:{}}),h=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),p=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),g=(0,s.F)("text-foreground-muted",{variants:{size:{...c.SK.text}},defaultVariants:{}}),v=(0,s.F)("",{variants:{flex:{true:"",false:""},align:{left:"",right:""},layout:{horizontal:"",vertical:"",flex:"","flex-row-reverse":""}},compoundVariants:[{flex:!0,align:"left",className:""},{flex:!0,align:"right",className:"order-last"},{layout:"flex-row-reverse",className:"flex flex-col justify-center items-end shrink-0"}]}),j=(0,s.F)("",{variants:{nonBoxInput:{true:"",false:""},label:{true:"",false:""},layout:{vertical:"",horizontal:"","flex-row-reverse":""}},compoundVariants:[{nonBoxInput:!0,label:!0,layout:"vertical",className:"my-3"},{nonBoxInput:!0,label:!0,layout:"horizontal",className:"my-3 md:mt-0 mb-3"}],defaultVariants:{}}),y=a.forwardRef((e,t)=>{let{align:r="left",className:a,description:s,id:c,label:y,labelOptional:b,layout:w="vertical",style:N,labelLayout:_,size:S="medium",beforeLabel:I,afterLabel:k,nonBoxInput:R=!y,hideMessage:C=!1,isReactForm:A,...z}=e,L="flex"===w||"flex-row-reverse"===w,M=!!(y||I||k),E=A&&!C&&(0,l.jsx)(i.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:"easeInOut"},className:(0,o.cn)("flex-row-reverse"===w?"mt-0":"mt-2"),children:(0,l.jsx)(n.C5,{className:(0,o.cn)("mt-2 transition-opacity duration-300 ease-in-out","flex-row-reverse"===w&&"mt-0"),"data-formlayout-id":"message"})}),F=s&&A?(0,l.jsx)(n.Rr,{className:(0,o.cn)(x({size:S,layout:w})),"data-formlayout-id":"description",id:c+"-description",children:s}):s?(0,l.jsx)("p",{className:(0,o.cn)(x({size:S,layout:w}),"text-sm text-foreground-light"),"data-formlayout-id":"description",children:s}):null,O=()=>(0,l.jsxs)(l.Fragment,{children:[I&&(0,l.jsx)("span",{className:(0,o.cn)(h({size:S})),id:c+"-before","data-formlayout-id":"beforeLabel",children:(0,l.jsx)("span",{children:I})}),(0,l.jsx)("span",{children:y}),k&&(0,l.jsx)("span",{className:(0,o.cn)(p({size:S})),id:c+"-after","data-formlayout-id":"afterLabel",children:k})]});return(0,l.jsxs)("div",{ref:t,...z,className:(0,o.cn)(u({size:S,flex:L,align:r,layout:w}),a),children:[L&&(0,l.jsxs)("div",{className:(0,o.cn)(v({flex:L,align:r,layout:w})),children:[z.children,"flex-row-reverse"===w&&E]}),M||b||"horizontal"===w?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:(0,o.cn)(m({align:r,labelLayout:_,flex:L,layout:w})),"data-formlayout-id":"labelContainer",children:[M&&A?(0,l.jsx)(n.lR,{className:"text-foreground flex gap-2 items-center break-all","data-formlayout-id":"formLabel",htmlFor:z.name||c,children:(0,l.jsx)(O,{})}):(0,l.jsx)(d.J,{className:"text-foreground flex gap-2 items-center break-all leading-normal","data-formlayout-id":"label",htmlFor:z.name||c,children:(0,l.jsx)(O,{})}),b&&(0,l.jsx)("span",{className:(0,o.cn)(g({size:S})),id:c+"-optional","data-formlayout-id":"labelOptional",children:b}),L&&(0,l.jsxs)(l.Fragment,{children:[F,"flex-row-reverse"!==w&&E]})]})}):null,!L&&(0,l.jsx)("div",{className:(0,o.cn)(f({align:r,layout:w})),style:N,"data-formlayout-id":"dataContainer",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:(0,o.cn)(j({nonBoxInput:R,label:y,layout:w})),"data-formlayout-id":"nonBoxInputContainer",children:z.children}),E,F]})})]})}),b=(0,a.forwardRef)((e,t)=>{let{...r}=e;return(0,l.jsx)(n.eI,{children:(0,l.jsx)(y,{ref:t,isReactForm:!0,...r,children:r.children})})});b.displayName="FormItemLayout"},28718:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var l=r(80263),a=r(66452),n=r(90743),s=r(75859),i=r(8897),o=r(25718),d=r(29730),c=r(2),u=r(98883),m=r(16601);let f=e=>{let{children:t}=e,r=(0,o.a)(),{data:d,isSuccess:f}=(0,i.X)({installationId:null==r?void 0:r.partner_id});return(0,l.jsxs)("div",{className:(0,c.cn)("w-full flex flex-col overflow-hidden"),"data-sentry-component":"OrganizationLayoutContent","data-sentry-source-file":"OrganizationLayout.tsx",children:[r&&(null==r?void 0:r.managed_by)!=="supabase"&&(0,l.jsxs)(u.Fc,{variant:"default",className:"flex items-center gap-4 border-t-0 border-x-0 rounded-none",children:[(0,l.jsx)(n.A,{organization:r,showTooltip:!1,size:"medium"}),(0,l.jsxs)(u.XL,{className:"flex-1",children:["This organization is managed by ",s.N[r.managed_by],"."]}),(0,l.jsx)(m.$,{asChild:!0,type:"default",iconRight:(0,l.jsx)(a.A,{}),disabled:!f,children:(0,l.jsx)("a",{href:null==d?void 0:d.url,target:"_blank",rel:"noopener noreferrer",children:"Manage"})})]}),(0,l.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})},x=(0,d.r)(e=>{let{children:t}=e;return(0,l.jsx)(f,{"data-sentry-element":"OrganizationLayoutContent","data-sentry-component":"OrganizationLayout","data-sentry-source-file":"OrganizationLayout.tsx",children:t})})},33794:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var l=r(80263);function a(e){let{body:t,head:r,className:a,containerClassName:n,borderless:s,headTrClasses:i,bodyClassName:o,style:d}=e,c=["table-container"];n&&c.push(n),s&&c.push("table-container--borderless");let u=["table"];return a&&u.push(a),(0,l.jsx)("div",{className:c.join(" "),"data-sentry-component":"Table","data-sentry-source-file":"Table.tsx",children:(0,l.jsxs)("table",{className:u.join(" "),style:d,children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{className:i,children:r})}),(0,l.jsx)("tbody",{className:o,children:t})]})})}a.th=e=>{let{children:t,className:r,style:a}=e,n=["p-3 px-4 text-left"];return r&&n.push(r),(0,l.jsx)("th",{className:n.join(" "),style:a,"data-sentry-component":"Th","data-sentry-source-file":"Table.tsx",children:t})},a.td=e=>{let{children:t,colSpan:r,className:a,style:n,...s}=e;return(0,l.jsx)("td",{className:a,colSpan:r,style:n,...s,"data-sentry-component":"Td","data-sentry-source-file":"Table.tsx",children:t})},a.tr=e=>{let{children:t,className:r,onClick:a,style:n,hoverable:s}=e,i=[r];return(a||s)&&i.push("tr--link"),(0,l.jsx)("tr",{className:i.join(" "),onClick:a,style:n,"data-sentry-component":"Tr","data-sentry-source-file":"Table.tsx",children:t})};let n=a},36212:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var l=r(80263),a=r(53239),n=r(34587),s=r(2),i=r(16601),o=r(82942);let d=(0,a.forwardRef)((e,t)=>{let{title:r,description:d,size:c="small",visible:u,onCancel:m,onConfirm:f,loading:x,cancelLabel:h="Cancel",confirmLabel:p="Submit",confirmLabelLoading:g,alert:v,children:j,variant:y="default",disabled:b,...w}=e,[N,_]=(0,a.useState)(void 0!==x&&x);return(0,a.useEffect)(()=>{u&&void 0===x&&_(!1)},[u]),(0,a.useEffect)(()=>{void 0!==x&&_(x)},[x]),(0,l.jsx)(n.lG,{open:u,...w,onOpenChange:()=>{u&&m()},children:(0,l.jsxs)(n.Cf,{ref:t,className:"p-0 gap-0 pb-5 !block",size:c,children:[(0,l.jsxs)(n.c7,{className:(0,s.cn)("border-b"),padding:"small",children:[(0,l.jsx)(n.L3,{children:r}),d&&(0,l.jsx)(n.rr,{children:d})]}),v&&(0,l.jsx)(o.Z,{type:y,label:v.title,description:v.description,className:"border-r-0 border-l-0 rounded-none -mt-px [&_svg]:ml-0.5 mb-0",...null==v?void 0:v.base}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.OO,{padding:"small",children:j}),(0,l.jsx)(n.pf,{})]}),(0,l.jsxs)("div",{className:"flex gap-2 px-5 pt-5",children:[(0,l.jsx)(i.$,{size:"medium",block:!0,type:"default",disabled:N,onClick:()=>m(),children:h}),(0,l.jsx)(i.$,{block:!0,size:"medium",type:"destructive"===y?"danger":"warning"===y?"warning":"primary",htmlType:"submit",loading:N,disabled:N||b,onClick:e=>{e.preventDefault(),e.stopPropagation(),f(),void 0===N&&_(!0)},className:"truncate",children:p})]})]})})});d.displayName="ConfirmationModal";let c=d},38230:(e,t,r)=>{var l=r(92855);e.exports=function(){try{var e=l(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},44893:(e,t,r)=>{"use strict";r.d(t,{bL:()=>b,zi:()=>w});var l=r(54993),a=r(53239),n=r(91968),s=r(63774),i=r(68436),o=r(87990),d=r(15630),c=r(89422),u=r(70297);let m="Switch",[f,x]=(0,i.A)(m),[h,p]=f(m),g=(0,a.forwardRef)((e,t)=>{let{__scopeSwitch:r,name:i,checked:d,defaultChecked:c,required:m,disabled:f,value:x="on",onCheckedChange:p,...g}=e,[v,b]=(0,a.useState)(null),w=(0,s.s)(t,e=>b(e)),N=(0,a.useRef)(!1),_=!v||!!v.closest("form"),[S=!1,I]=(0,o.i)({prop:d,defaultProp:c,onChange:p});return(0,a.createElement)(h,{scope:r,checked:S,disabled:f},(0,a.createElement)(u.sG.button,(0,l.A)({type:"button",role:"switch","aria-checked":S,"aria-required":m,"data-state":y(S),"data-disabled":f?"":void 0,disabled:f,value:x},g,{ref:w,onClick:(0,n.m)(e.onClick,e=>{I(e=>!e),_&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),_&&(0,a.createElement)(j,{control:v,bubbles:!N.current,name:i,value:x,checked:S,required:m,disabled:f,style:{transform:"translateX(-100%)"}}))}),v=(0,a.forwardRef)((e,t)=>{let{__scopeSwitch:r,...n}=e,s=p("SwitchThumb",r);return(0,a.createElement)(u.sG.span,(0,l.A)({"data-state":y(s.checked),"data-disabled":s.disabled?"":void 0},n,{ref:t}))}),j=e=>{let{control:t,checked:r,bubbles:n=!0,...s}=e,i=(0,a.useRef)(null),o=(0,d.Z)(r),u=(0,c.X)(t);return(0,a.useEffect)(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let l=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(l)}},[o,r,n]),(0,a.createElement)("input",(0,l.A)({type:"checkbox","aria-hidden":!0,defaultChecked:r},s,{tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function y(e){return e?"checked":"unchecked"}let b=g,w=v},50117:(e,t,r)=>{var l=r(38230);e.exports=function(e,t,r){"__proto__"==t&&l?l(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},57464:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var l=r(80263),a=r(63320),n=r.n(a),s=r(89044),i=r(52385);let o=()=>{let e=(0,i.useRouter)();return e.isReady?e.asPath.split("?")[0]:""};var d=r(24726),c=r(99673),u=r(95207);let m=function(e){let{children:t}=e,{slug:r}=(0,s.g)(),[a]=o().split("#"),i=(0,d._)("showOrganizationSecuritySettings");return a==="/org/".concat(r,"/team")||a==="/org/".concat(r,"/integrations")||a==="/org/".concat(r,"/usage")||a==="/org/".concat(r,"/billing")?t:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u.Vw,{className:"mb-0","data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[(0,l.jsx)(u.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:"Organization Settings"}),(0,l.jsx)(c.h,{className:"overflow-x-auto","aria-label":"Organization menu navigation","data-sentry-element":"NavMenu","data-sentry-source-file":"OrganizationSettingsLayout.tsx",children:[{label:"General",href:"/org/".concat(r,"/general")},i&&{label:"Security",href:"/org/".concat(r,"/security")},{label:"OAuth Apps",href:"/org/".concat(r,"/apps")},{label:"Audit Logs",href:"/org/".concat(r,"/audit")},{label:"Legal Documents",href:"/org/".concat(r,"/documents")}].filter(Boolean).map(e=>(0,l.jsx)(c.O,{active:a===e.href,children:(0,l.jsx)(n(),{href:e.href,children:e.label})},e.label))})]}),(0,l.jsx)("main",{className:"h-full w-full overflow-y-auto",children:t})]})}},59168:(e,t,r)=>{"use strict";r.d(t,{p:()=>u});var l=r(80263),a=r(87467),n=r(53239),s=r(2),i=r(49189),o=r(16601),d=r(77690);function c(e){let{icon:t,className:r}=e;return(0,l.jsx)("div",{className:(0,s.cn)("absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-foreground-light",r),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}let u=(0,n.forwardRef)((e,t)=>{let{copy:r,showCopyOnHover:u=!1,icon:m,reveal:f=!1,actions:x,onCopy:h,iconContainerClassName:p,containerClassName:g,...v}=e,[j,y]=(0,n.useState)("Copy"),[b,w]=(0,n.useState)(!0),N=(0,d.A)("input"),_=[];return m&&_.push(N.with_icon),(0,l.jsxs)("div",{className:(0,s.cn)("relative group",g),children:[(0,l.jsx)(i.p,{ref:t,...v,onCopy:h,value:f&&b?"**** **** **** ****":v.value,className:(0,s.cn)(..._,v.className)}),m&&(0,l.jsx)(c,{icon:m,className:p}),r||x?(0,l.jsxs)("div",{className:N.actions_container,children:[r&&!(f&&b)?(0,l.jsx)(o.$,{size:"tiny",type:"default",className:(0,s.cn)(u&&"opacity-0 group-hover:opacity-100 transition"),icon:(0,l.jsx)(a.A,{size:16,className:"text-foreground-muted"}),onClick:()=>(function(e){var t;null==(t=navigator.clipboard.writeText(e))||t.then(function(){y("Copied"),setTimeout(function(){y("Copy")},3e3),null==h||h()},function(){y("Failed to copy")})})(v.value),children:j}):null,f&&b?(0,l.jsx)(o.$,{size:"tiny",type:"default",onClick:function(){w(!1)},children:"Reveal"}):null,x&&x]}):null]})})},62719:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,y:()=>s});var l=r(80263),a=r(2);let n=e=>{let{className:t,delayIndex:r=0,animationDelay:n=150}=e;return(0,l.jsx)("div",{className:(0,a.cn)("shimmering-loader rounded py-3",t),style:{animationFillMode:"backwards",animationDelay:"".concat(r*n,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})},s=e=>{let{className:t}=e;return(0,l.jsxs)("div",{className:(0,a.cn)(t,"space-y-2"),"data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"index.tsx",children:[(0,l.jsx)(n,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,l.jsx)(n,{className:"w-3/4","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"}),(0,l.jsx)(n,{className:"w-1/2","data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"index.tsx"})]})},i=n},73892:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},75809:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},75859:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,N:()=>d});var l=r(80263),a=r(66452),n=r(8897),s=r(98883),i=r(16601),o=r(90743);let d={"vercel-marketplace":"Vercel Marketplace","aws-marketplace":"AWS Marketplace"},c=function(e){var t,r;let{partner:c,resource:u,cta:m}=e,f=void 0!==m,{data:x,isLoading:h,isError:p}=(0,n.X)({installationId:null==m?void 0:m.installationId},{enabled:f}),g=(null!=(t=null==x?void 0:x.url)?t:"")+(null!=(r=null==m?void 0:m.path)?r:"");return(0,l.jsxs)(s.Fc,{className:"flex flex-col items-center gap-y-2 border-0 rounded-none","data-sentry-element":"Alert_Shadcn_","data-sentry-component":"PartnerManagedResource","data-sentry-source-file":"PartnerManagedResource.tsx",children:[(0,l.jsx)(o.A,{organization:{managed_by:c},showTooltip:!1,size:"large","data-sentry-element":"PartnerIcon","data-sentry-source-file":"PartnerManagedResource.tsx"}),(0,l.jsxs)(s.XL,{className:"text-sm","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"PartnerManagedResource.tsx",children:[u," are managed by ",d[c],"."]}),f&&(0,l.jsx)(i.$,{asChild:!0,type:"default",iconRight:(0,l.jsx)(a.A,{}),disabled:h||p,children:(0,l.jsx)("a",{href:g,target:"_blank",rel:"noopener noreferrer",children:m.message||"View ".concat(u," on ").concat(d[c])})})]})}},77054:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});let l={integrationsListWithOrg:e=>["organizations",e,"integrations"],integrationsList:()=>["organizations","integrations"],vercelProjectList:e=>["organizations",e,"vercel-projects"],vercelConnectionsList:e=>["organizations",e,"vercel-connections"],githubBranch:(e,t,r,l)=>["organizations",e,"branches",t,r,l],githubAuthorization:()=>["github-authorization"],githubRepositoriesList:()=>["github-repositories"],githubBranchesList:e=>["github-branches",e],githubConnectionsList:e=>["organizations",e,"github-connections"],vercelRedirect:e=>["vercel-redirect",e]}},78086:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},82842:(e,t,r)=>{"use strict";r.d(t,{KQ:()=>o});var l=r(56947),a=r(3807),n=r(23104);let s=["Owner","Administrator","Developer","Read-only"];async function i(e,t){let{slug:r}=e;if(!r)throw Error("slug is required");let{data:l,error:n}=await (0,a.Jt)("/platform/organizations/{slug}/roles",{params:{path:{slug:r}},signal:t});return n&&(0,a.H4)(n),l}let o=function(e){let{slug:t}=e,{enabled:r=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.I)(n.O.rolesV2(t),e=>{let{signal:r}=e;return i({slug:t},r)},{enabled:r&&void 0!==t,select:e=>({...e,org_scoped_roles:e.org_scoped_roles.sort((e,t)=>s.indexOf(e.name)-s.indexOf(t.name))}),...a})}},85669:(e,t,r)=>{"use strict";r.d(t,{C5:()=>y,MJ:()=>v,Rr:()=>j,eI:()=>p,lR:()=>g,lV:()=>u,zB:()=>f});var l=r(80263),a=r(38694),n=r(53239),s=r(87494),i=r(2),o=r(27863),d=r(88712),c=r(37055);let u=s.Op,m=n.createContext({}),f=e=>{let{...t}=e;return(0,l.jsx)(m.Provider,{value:{name:t.name},"data-sentry-element":"unknown","data-sentry-component":"FormField","data-sentry-source-file":"form.tsx",children:(0,l.jsx)(s.xI,{...t,"data-sentry-element":"Controller","data-sentry-source-file":"form.tsx"})})},x=()=>{let e=n.useContext(m),t=n.useContext(h),{getFieldState:r,formState:l}=(0,s.xW)(),a=r(e.name,l);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},h=n.createContext({}),p=n.forwardRef((e,t)=>{let{asChild:r,...s}=e,i=n.useId(),o=r?a.DX:"div";return(0,l.jsx)(h.Provider,{value:{id:i},children:(0,l.jsx)(o,{ref:t,...s})})});p.displayName="FormItem";let g=n.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:s}=x();return(0,l.jsx)(o.J,{ref:t,className:(0,i.cn)("text-foreground-light","transition-colors",n&&"!text-destructive",r,"leading-normal"),htmlFor:s,...a})});g.displayName="FormLabel";let v=n.forwardRef((e,t)=>{let{...r}=e,{error:n,formItemId:s,formDescriptionId:i,formMessageId:o}=x();return(0,l.jsx)(a.DX,{ref:t,id:s,"aria-describedby":n?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!n,...r})});v.displayName="FormControl";let j=n.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=x();return(0,l.jsx)("div",{ref:t,id:n,className:(0,i.cn)("text-sm text-foreground-light",r),...a})});j.displayName="FormDescription";let y=n.forwardRef((e,t)=>{let{className:r,children:a,...n}=e,{error:s,formMessageId:o}=x(),u=s?String(null==s?void 0:s.message):a;return(0,l.jsx)(d.N,{initial:!1,children:u?(0,l.jsx)(c.P.div,{initial:{opacity:0,y:-5,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-5,height:0},transition:{duration:.15,ease:"easeInOut"},children:(0,l.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm text-destructive",r),...n,children:u})},o):null})});y.displayName="FormMessage"},87598:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},94328:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]])},95207:(e,t,r)=>{"use strict";r.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>j,Rf:()=>g,Uw:()=>d,Vw:()=>w,Xr:()=>b,aw:()=>h,bV:()=>s,cJ:()=>f,dX:()=>u,eh:()=>o,fh:()=>y,gu:()=>m,sZ:()=>x,tn:()=>v,xp:()=>p});var l=r(80263),a=r(53239),n=r(2);let s="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,a.forwardRef)((e,t)=>{let{className:r,bottomPadding:a,size:s="default",...o}=e;return(0,l.jsx)("div",{ref:t,...o,className:(0,n.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[s],i,a&&"pb-16",r)})}),d=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("header",{...a,ref:t,className:(0,n.cn)("w-full","flex-col gap-3 py-6",r)})}),c=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("h1",{ref:t,...a,className:(0,n.cn)("text-2xl",r)})}),u=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("p",{ref:t,...a,className:(0,n.cn)("text-sm text-foreground-light",r)})}),m=(0,a.forwardRef)((e,t)=>{let{className:r,isFullWidth:a,topPadding:s,...i}=e;return(0,l.jsx)("div",{ref:t,...i,className:(0,n.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 lg:grid md:grid-cols-12",r)})}),f=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("w-full h-px bg-border",r)})}),x=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("h3",{ref:t,...a,className:(0,n.cn)("text-foreground text-xl",r)})}),h=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("p",{ref:t,...a,className:(0,n.cn)("text-sm text-foreground-light",r)})}),p=(0,a.forwardRef)((e,t)=>{let{className:r,children:a,title:s,...i}=e;return(0,l.jsxs)("div",{ref:t,...i,className:(0,n.cn)("col-span-4 xl:col-span-5 prose text-sm",r),children:[s&&(0,l.jsx)("h2",{children:s}),a]})}),g=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",r)})}),v=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("flex flex-col gap-3 items-center",r)})}),j=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("flex w-full items-center",r)})}),y=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("flex flex-row gap-3",r)})}),b=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)("flex flex-col gap-3","min-w-[420px]",r)})}),w=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,l.jsx)("div",{ref:t,...a,className:(0,n.cn)(s,i,"my-8 flex flex-col gap-8",r)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",f.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",p.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",v.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",y.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",x.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},98148:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>e1});var l=r(80263),a=r(65842),n=r(52385),s=r(53239),i=r(73969),o=r(89044),d=r(95207),c=r(79319),u=r(82842),m=r(32144),f=r(80251),x=r(3807),h=r(42719);async function p(e){let{slug:t,gotrueId:r}=e,{data:l,error:a}=await (0,x.yH)("/platform/organizations/{slug}/members/{gotrue_id}",{params:{path:{slug:t,gotrue_id:r}}});return a&&(0,x.H4)(a),l}let g=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>p(e),{async onSuccess(t,r,a){let{slug:n}=r;await Promise.all([l.invalidateQueries(h.O.members(n)),l.invalidateQueries(h.O.roles(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to remove member: ".concat(e.message)):t(e,r,l)},...r})};var v=r(8563),j=r(33240),y=r(79448),b=r(45479),w=r(89756),N=r(25718),_=r(11649),S=r(59168),I=r(36212),k=r(32981),R=r(60045),C=r(98667),A=r(64238),z=r(63320),L=r.n(z),M=r(87494),E=r(39353),F=r(24059),O=r(23104);async function T(e){let{slug:t,email:r,roleId:l,projects:a}=e,n={email:r,role_id:l};void 0!==a&&(n.role_scoped_projects=a);let{data:s,error:i}=await (0,x.bE)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:t}},body:n});return i&&(0,x.H4)(i),s}let B=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>T(e),{async onSuccess(t,r,a){let{slug:n}=r;await Promise.all([l.invalidateQueries(O.O.rolesV2(n)),l.invalidateQueries(h.O.members(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};var D=r(34262),V=r(22392),P=r(65904),q=r(34587),Q=r(3732),U=r(16601),G=r(85669),H=r(11375),$=r(79295),X=r(10738),J=r(50854),W=r(83405),K=r(2),Y=r(49189),Z=r(27787);let ee=(e,t,r)=>{let{permissions:l,organizationSlug:a}=(0,P.GU)(r,e,void 0!==r&&void 0!==e),n=[],s=[];return t&&e&&t.forEach(e=>{(0,P.IT)(l,R.aG.CREATE,"auth.subject_roles",{resource:{role_id:e.id}},a)&&n.push(e.id),(0,P.IT)(l,R.aG.DELETE,"auth.subject_roles",{resource:{role_id:e.id}},a)&&s.push(e.id)}),{rolesAddable:n,rolesRemovable:s}},et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(e=>{var r;let[l]=null!=(r=e.role_ids)?r:[],a=t.find(e=>e.id===l);return(null==a?void 0:a.name)==="Owner"&&!e.invited_at}).length>1},er=()=>{var e,t;let{slug:r}=(0,o.g)(),{profile:a}=(0,_.xc)(),n=(0,N.a)(),{permissions:d}=(0,P.GU)(),[c,m]=(0,s.useState)(!1),[f,x]=(0,s.useState)(!1),{data:h}=(0,D.el)(),{data:p}=(0,v.Q)({slug:r}),{data:g,isSuccess:j}=(0,u.KQ)({slug:r}),y=null!=(e=null==g?void 0:g.org_scoped_roles)?e:[],b=(null!=h?h:[]).filter(e=>e.organization_id===(null==n?void 0:n.id)).sort((e,t)=>e.name.localeCompare(t.name));(0,P.SE)(R.aG.BILLING_READ,"stripe.subscriptions");let w=null==n?void 0:n.plan,S=(0,V.cC)(r),I=null==p?void 0:p.find(e=>e.gotrue_id===(null==a?void 0:a.gotrue_id)),z=1===(null!=(t=null==I?void 0:I.role_ids)?t:[]).length&&y.some(e=>e.id===(null==I?void 0:I.role_ids[0])),{rolesAddable:O}=ee(null==n?void 0:n.slug,y,null!=d?d:[]),T=z&&y.some(e=>{let{id:t}=e;return(0,P.IT)(d,R.aG.CREATE,"user_invites",{resource:{role_id:t}},null==n?void 0:n.slug)}),{mutate:et,isLoading:er}=B(),el=E.Ik({email:E.Yj().email("Must be a valid email address").min(1,"Email is required"),role:E.Yj().min(1,"Role is required"),applyToOrg:E.zM(),projectRef:E.Yj()}),ea=(0,M.mN)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,k.u)(el),defaultValues:{email:"",role:"",applyToOrg:!0,projectRef:""}}),{applyToOrg:en}=ea.watch(),es=async e=>{if(!r)return console.error("Slug is required");if((null==a?void 0:a.id)===void 0)return console.error("Profile ID required");let t=y.find(e=>"Developer"===e.name),l=(null!=p?p:[]).find(t=>t.primary_email===e.email.toLowerCase());if(void 0!==l)if(l.invited_id)return(0,i.oR)("User has already been invited to this organization");else return(0,i.oR)("User is already in this organization");et({slug:r,email:e.email.toLowerCase(),roleId:Number(e.role),...!e.applyToOrg&&e.projectRef?{projects:[e.projectRef]}:{}},{onSuccess:()=>{var e;i.oR.success("Successfully sent invitation to new member"),m(!c),ea.reset({email:"",role:null!=(e=null==t?void 0:t.id.toString())?e:"",applyToOrg:!0,projectRef:""})}})};return(0,s.useEffect)(()=>{if(j&&c){let e=y.find(e=>"Developer"===e.name);void 0!==e&&ea.setValue("role",e.id.toString())}},[j,c]),(0,s.useEffect)(()=>{if(en)ea.setValue("projectRef","");else{let e=null==b?void 0:b[0];void 0!==e&&ea.setValue("projectRef",e.ref)}},[en]),(0,l.jsxs)(q.lG,{open:c,onOpenChange:m,"data-sentry-element":"Dialog","data-sentry-component":"InviteMemberButton","data-sentry-source-file":"InviteMemberButton.tsx",children:[(0,l.jsx)(q.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsxs)(Q.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"InviteMemberButton.tsx",children:[(0,l.jsx)(Q.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(U.$,{disabled:!T,className:"pointer-events-auto flex-grow md:flex-grow-0",onClick:()=>m(!0),"data-sentry-element":"Button","data-sentry-source-file":"InviteMemberButton.tsx",children:"Invite"})}),!T&&(0,l.jsx)(Q.ZI,{side:"bottom",children:"You need additional permissions to invite a member to this organization"})]})}),(0,l.jsxs)(q.Cf,{size:"medium","data-sentry-element":"DialogContent","data-sentry-source-file":"InviteMemberButton.tsx",children:[(0,l.jsx)(q.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(q.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"InviteMemberButton.tsx",children:"Invite a member to this organization"})}),(0,l.jsx)(q.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(G.lV,{...ea,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsxs)("form",{id:"organization-invitation",className:"flex flex-col gap-y-4",onSubmit:ea.handleSubmit(es),children:[(0,l.jsxs)(q.OO,{className:"flex flex-col gap-y-4 pb-2","data-sentry-element":"DialogSection","data-sentry-source-file":"InviteMemberButton.tsx",children:[S&&(0,l.jsx)(G.zB,{name:"applyToOrg",control:ea.control,render:e=>{let{field:t}=e;return(0,l.jsx)(Z.M,{layout:"flex",label:"Apply role to all projects in the organization",children:(0,l.jsx)(G.MJ,{children:(0,l.jsx)(H.d,{checked:t.value,onCheckedChange:e=>ea.setValue("applyToOrg",e)})})})}}),(0,l.jsx)(G.zB,{name:"role",control:ea.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsx)(Z.M,{label:"Member role",children:(0,l.jsx)(G.MJ,{children:(0,l.jsxs)($.l6,{value:a.value,onValueChange:e=>ea.setValue("role",e),children:[(0,l.jsx)($.bq,{className:"text-sm capitalize",children:null!=(r=null==(t=y.find(e=>e.id===Number(a.value)))?void 0:t.name)?r:"Unknown"}),(0,l.jsx)($.gC,{children:(0,l.jsx)($.s3,{children:y.map(e=>{let t=O.includes(e.id);return(0,l.jsxs)($.eb,{value:e.id.toString(),className:"text-sm [&>span:nth-child(2)]:w-full [&>span:nth-child(2)]:flex [&>span:nth-child(2)]:items-center [&>span:nth-child(2)]:justify-between",disabled:!t,children:[(0,l.jsx)("span",{children:e.name}),!t&&(0,l.jsx)("span",{children:"Additional permissions required to assign role"})]},e.id)})})})]})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx"}),!en&&(0,l.jsx)(G.zB,{name:"projectRef",control:ea.control,render:e=>{var t,r;let{field:a}=e;return(0,l.jsx)(Z.M,{label:"Select a project",description:"You can assign roles to multiple projects once the invite is accepted",children:(0,l.jsx)(G.MJ,{children:(0,l.jsxs)(X.AM,{open:f,onOpenChange:x,children:[(0,l.jsx)(X.Wv,{asChild:!0,children:(0,l.jsx)(U.$,{block:!0,type:"default",role:"combobox",size:"small",className:"justify-between max-w-[470px]",iconRight:(0,l.jsx)(C.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),children:null!=(r=null==(t=b.find(e=>e.ref===a.value))?void 0:t.name)?r:"Unknown"})}),(0,l.jsx)(X.hl,{sameWidthAsTrigger:!0,className:"p-0",children:(0,l.jsxs)(J.uB,{filter:(e,t)=>{let r=b.find(t=>t.ref===e),l=null==r?void 0:r.name.toLowerCase();return void 0!==l&&l.includes(t.toLowerCase())?1:+!!e.includes(t)},children:[(0,l.jsx)(J.G7,{placeholder:"Search project..."}),(0,l.jsxs)(J.oI,{children:[(0,l.jsx)(J.xL,{children:"No projects found..."}),(0,l.jsx)(J.L$,{children:(0,l.jsx)(W.FK,{className:(0,K.cn)((b||[]).length>7&&"max-h-[210px] overflow-y-auto"),children:b.map(e=>(0,l.jsxs)(J.h_,{value:e.ref,onSelect:e=>{ea.setValue("projectRef",e),x(!1)},children:[(0,l.jsx)(A.A,{className:(0,K.cn)("mr-2 h-4 w-4",a.value===e.ref?"opacity-100":"opacity-0")}),e.name]},e.ref))})})]})]})})]})})})}}),(0,l.jsx)(G.zB,{name:"email",control:ea.control,render:e=>{let{field:t}=e;return(0,l.jsx)(Z.M,{label:"Email address",children:(0,l.jsx)(G.MJ,{children:(0,l.jsx)(Y.p,{autoFocus:!0,...t,autoComplete:"off",disabled:er,placeholder:"Enter email address"})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(F.A,{defaultVisibility:!1,title:"Single Sign-on (SSO) login option available",hideCollapse:!1,description:(0,l.jsxs)("div",{className:"space-y-4 mb-1",children:[(0,l.jsx)("p",{children:"Supabase offers single sign-on (SSO) as a login option to provide additional account security for your team. This allows company administrators to enforce the use of an identity provider when logging into Supabase."}),(0,l.jsx)("p",{children:"This is only available for organizations on Team Plan or above."}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(U.$,{asChild:!0,type:"default",children:(0,l.jsx)(L(),{href:"https://supabase.com/docs/guides/platform/sso",target:"_blank",rel:"noreferrer",children:"Learn more"})}),((null==w?void 0:w.id)==="free"||(null==w?void 0:w.id)==="pro")&&(0,l.jsx)(U.$,{asChild:!0,type:"default",children:(0,l.jsx)(L(),{href:"/org/".concat(r,"/billing?panel=subscriptionPlan&source=inviteMemberSSO"),children:"Upgrade to Team"})})]})]}),"data-sentry-element":"InformationBox","data-sentry-source-file":"InviteMemberButton.tsx"})]}),(0,l.jsx)(q.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"InviteMemberButton.tsx"}),(0,l.jsx)(q.OO,{className:"pt-0","data-sentry-element":"DialogSection","data-sentry-source-file":"InviteMemberButton.tsx",children:(0,l.jsx)(U.$,{block:!0,htmlType:"submit",loading:er,"data-sentry-element":"Button","data-sentry-source-file":"InviteMemberButton.tsx",children:"Send invitation"})})]})})]})]})};var el=r(9678),ea=r(65325),en=r(33794),es=r(98474),ei=r(17234),eo=r(58135),ed=r(82942),ec=r(75809),eu=r(23278),em=r(87598),ef=r(73892),ex=r(90743),eh=r(54860),ep=r(49446),eg=r(38952),ev=r(90558),ej=r(62719);function ey(e){let t=new Date(e);return!((new Date().valueOf()-t.valueOf())/1e3/60/60<24)}let eb=e=>{if(!e)return"";let{username:t,primary_email:r,invited_id:l}=e||{};return void 0!==l?r:t||""};var ew=r(78086),eN=r(94328);async function e_(e){let{slug:t,id:r}=e,{error:l}=await (0,x.yH)("/platform/organizations/{slug}/members/invitations/{id}",{params:{path:{slug:t,id:r}}});return l&&(0,x.H4)(l),!0}let eS=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>e_(e),{async onSuccess(t,r,a){let{slug:n,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries(O.O.rolesV2(n)),l.invalidateQueries(h.O.members(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to delete invitation: ".concat(e.message)):t(e,r,l)},...r})};var eI=r(33656),ek=r(84305),eR=r.n(ek),eC=r(67007),eA=r(76828),ez=r(98883),eL=r(55739);async function eM(e){let{slug:t,gotrueId:r,roleId:l,projects:a}=e,n={role_id:l};void 0!==a&&(n.role_scoped_projects=a);let{data:s,error:i}=await (0,x.F6)("/platform/organizations/{slug}/members/{gotrue_id}",{params:{path:{slug:t,gotrue_id:r}},body:n,headers:{Version:"2"}});return i&&(0,x.H4)(i),s}let eE=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>eM(e),{async onSuccess(t,r,a){let{slug:n,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries(O.O.rolesV2(n)),l.invalidateQueries(h.O.members(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};async function eF(e){let{slug:t,gotrueId:r,roleId:l}=e,{data:a,error:n}=await (0,x.yH)("/platform/organizations/{slug}/members/{gotrue_id}/roles/{role_id}",{params:{path:{slug:t,gotrue_id:r,role_id:l}}});return n&&(0,x.H4)(n),a}let eO=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>eF(e),{async onSuccess(t,r,a){let{slug:n,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries(O.O.rolesV2(n)),l.invalidateQueries(h.O.members(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to unassign member role: ".concat(e.message)):t(e,r,l)},...r})};async function eT(e){let{slug:t,gotrueId:r,roleId:l,roleName:a,projects:n}=e,{data:s,error:i}=await (0,x.yJ)("/platform/organizations/{slug}/members/{gotrue_id}/roles/{role_id}",{params:{path:{slug:t,gotrue_id:r,role_id:l}},body:{name:a,role_scoped_projects:n}});return i&&(0,x.H4)(i),s}let eB=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,m.jE)();return(0,f.n)(e=>eT(e),{async onSuccess(t,r,a){let{slug:n,skipInvalidation:s}=r;s||await Promise.all([l.invalidateQueries(O.O.rolesV2(n)),l.invalidateQueries(h.O.members(n))]),await (null==e?void 0:e(t,r,a))},async onError(e,r,l){void 0===t?i.oR.error("Failed to update member role: ".concat(e.message)):t(e,r,l)},...r})};var eD=r(107),eV=r.n(eD);let eP=(e,t,r)=>{let{org_scoped_roles:l,project_scoped_roles:a}=t;return e.role_ids.map(e=>{let t=l.find(t=>t.id===e);if(void 0!==t)return{ref:void 0,roleId:t.id};let n=a.find(t=>t.id===e);if(void 0!==n){var s;return(null!=(s=null==n?void 0:n.project_ids)?s:[]).map(e=>r.find(t=>t.id===e)).map(e=>({ref:null==e?void 0:e.ref,projectId:null==e?void 0:e.id,roleId:n.id,baseRoleId:n.base_role_id}))}}).filter(Boolean).flat()},eq=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,l=[],a=[],n=[];return e.forEach(e=>{let r=t.find(t=>e.ref===t.ref);void 0===r?l.push(e):r.roleId!==e.roleId&&n.push({ref:r.ref,originalRole:e.roleId,originalBaseRole:e.baseRoleId,updatedRole:r.roleId})}),t.forEach(t=>{void 0===e.find(e=>t.ref===e.ref)&&a.push(t)}),{removed:l.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}}),added:a.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}}),updated:n.map(e=>{var t;return{...e,projectId:null==(t=r.find(t=>t.ref===e.ref))?void 0:t.id}})}},eQ=(e,t)=>{let{removed:r,added:l,updated:a}=t,n=[],s=[],i=[],o=eV()(l,"roleId"),d=eV()(r,"roleId"),c=eV()(a,"originalRole"),u=eV()(a,"updatedRole"),m=e.filter(e=>{var t;return(null!=(t=null==e?void 0:e.project_ids)?t:[]).length>0}).map(e=>e.base_role_id);return e.forEach(e=>{var t,s,m,f,x,h,p,g;let v=e.project_ids;if(null===v)return n.push(e.id);let j=v.every(e=>{let t=r.map(e=>e.projectId).some(t=>t===e),l=a.map(e=>e.projectId).some(t=>t===e);return t||l}),y=l.some(t=>t.roleId===e.base_role_id),b=a.some(t=>t.updatedRole===e.base_role_id);if(j&&!y&&!b)return n.push(e.id);let w=null!=(x=null==(t=o[e.base_role_id])?void 0:t.map(e=>e.projectId))?x:[],N=null!=(h=null==(s=d[e.id])?void 0:s.map(e=>e.projectId))?h:[],_=null!=(p=null==(m=c[e.id])?void 0:m.map(e=>e.projectId))?p:[],S=null!=(g=null==(f=u[e.base_role_id])?void 0:f.map(e=>e.projectId))?g:[],I=v.filter(e=>!N.includes(e)).filter(e=>!_.includes(e)).concat(w).concat(S);eR()(v,I)||i.push({roleId:e.id,projectIds:I.sort((e,t)=>e-t)})}),Object.keys(o).forEach(e=>{m.includes(Number(e))||s.push({roleId:Number(e),projectIds:o[e].map(e=>e.projectId).sort((e,t)=>e-t)})}),Object.keys(u).forEach(e=>{m.includes(Number(e))||s.push({roleId:Number(e),projectIds:u[e].map(e=>e.projectId).sort((e,t)=>e-t)})}),{toRemove:n.sort((e,t)=>e-t),toAssign:s,toUpdate:i}},eU=e=>{var t;let{visible:r,member:a,projectsRoleConfiguration:n,onClose:d}=e,{slug:c}=(0,o.g)(),f=(0,m.jE)(),x=(0,N.a)(),{data:p}=(0,D.el)(),{data:g}=(0,u.KQ)({slug:null==x?void 0:x.slug}),[v,j]=(0,s.useState)(!1),{mutateAsync:y}=eE(),{mutateAsync:b}=eO({onError:()=>{}}),{mutateAsync:w}=eB(),_=null!=(t=null==g?void 0:g.org_scoped_roles)?t:[],{org_scoped_roles:S,project_scoped_roles:k}=null!=g?g:{org_scoped_roles:[],project_scoped_roles:[]},R=(null!=p?p:[]).filter(e=>e.organization_id===(null==x?void 0:x.id)),C=eq(void 0!==g?eP(a,g,null!=p?p:[]):[],n,null!=p?p:[]),A=async()=>{if(void 0===c)return console.error("Slug is required");j(!0);let e=a.gotrue_id,t=a.role_ids.map(e=>[...S,...k].find(t=>t.id===e)).filter(Boolean);if(1===n.length&&void 0===n[0].ref)try{await y({slug:c,gotrueId:e,roleId:n[0].roleId}),i.oR.success("Successfully updated role for ".concat(a.username)),d(!0);return}catch(e){return j(!1),i.oR.error("Failed to update role: ".concat(e.message))}let{toRemove:r,toAssign:l,toUpdate:s}=eQ(t,C);try{for(let{roleId:t,projectIds:r}of l)await y({slug:c,gotrueId:e,roleId:t,projects:r.map(e=>{var t;return null==p||null==(t=p.find(t=>t.id===e))?void 0:t.ref}),skipInvalidation:!0});for(let t of r)await b({slug:c,gotrueId:e,roleId:t,skipInvalidation:!0});for(let{roleId:t,projectIds:r}of s){var o;await w({slug:c,gotrueId:e,roleId:t,roleName:null==(o=k.find(e=>e.id===t))?void 0:o.name,projects:r.map(e=>{var t;return null==p||null==(t=p.find(t=>t.id===e))?void 0:t.ref}),skipInvalidation:!0})}await Promise.all([f.invalidateQueries(O.O.rolesV2(c)),f.invalidateQueries(h.O.members(c))]),i.oR.success("Successfully updated role for ".concat(a.username)),d(!0)}catch(e){return j(!1),i.oR.error("Failed to update role: ".concat(e.message))}};return(0,l.jsx)(I.A,{size:"medium",visible:r,loading:v,title:"Confirm to change roles of member",confirmLabel:"Update roles",confirmLabelLoading:"Updating",onCancel:()=>d(),onConfirm:A,"data-sentry-element":"ConfirmationModal","data-sentry-component":"UpdateRolesConfirmationModal","data-sentry-source-file":"UpdateRolesConfirmationModal.tsx",children:(0,l.jsxs)("div",{className:"flex flex-col gap-y-3",children:[(0,l.jsxs)("p",{className:"text-sm text-foreground-light",children:["You are making the following changes to the role of"," ",(0,l.jsx)("span",{className:"text-foreground",children:a.username})," in the organization"," ",(0,l.jsx)("span",{className:"text-foreground",children:null==x?void 0:x.name}),":"]}),(0,l.jsxs)("div",{className:"flex flex-col gap-y-2",children:[0!==C.removed.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Removing ",C.removed.length," role",C.removed.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:C.removed.map((e,t)=>{var r,a,n;let s=null!=(r=S.find(t=>t.id===e.roleId))?r:k.find(t=>t.id===e.roleId),i=R.find(t=>t.ref===e.ref),o=(null!=(a=null==s?void 0:s.name)?a:"Unknown").split("_")[0];return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:[(0,l.jsx)("span",{className:"text-foreground",children:o})," on"," ",(0,l.jsx)("span",{className:void 0!==i?"text-foreground":"",children:null!=(n=null==i?void 0:i.name)?n:"organization"})]},"update-".concat(t))})})]}),0!==C.added.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Adding ",C.added.length," role",C.added.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:C.added.map((e,t)=>{var r;let a=_.find(t=>t.id===e.roleId),n=R.find(t=>t.ref===e.ref);return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:[(0,l.jsx)("span",{className:"text-foreground",children:null==a?void 0:a.name})," on"," ",(0,l.jsx)("span",{className:void 0!==n?"text-foreground":"",children:null!=(r=null==n?void 0:n.name)?r:"organization"})]},"update-".concat(t))})})]}),0!==C.updated.length&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"text-sm",children:["Updating ",C.updated.length," role",C.updated.length>1?"s":""," for user:"]}),(0,l.jsx)("ul",{className:"list-disc pl-6",children:C.updated.map((e,t)=>{var r,a,n,s;let i=null!=(r=S.find(t=>t.id===e.originalRole))?r:k.find(t=>t.id===e.originalRole),o=S.find(t=>t.id===e.updatedRole),d=R.find(t=>t.ref===e.ref),c=(null!=(a=null==i?void 0:i.name)?a:"Unknown").split("_")[0];return(0,l.jsxs)("li",{className:"text-sm text-foreground-light",children:["From ",(0,l.jsx)("span",{className:"text-foreground",children:c})," to"," ",(0,l.jsx)("span",{className:"text-foreground",children:null!=(n=null==o?void 0:o.name)?n:"Unknown"})," on"," ",(0,l.jsx)("span",{className:void 0!==d?"text-foreground":"",children:null!=(s=null==d?void 0:d.name)?s:"organization"})]},"update-".concat(t))})})]})]}),(0,l.jsx)("p",{className:"text-sm text-foreground",children:"By changing the role of this member their permissions will change."})]})})},eG=e=>{var t,r,a,n;let{visible:i,member:d,onClose:m}=e,{slug:f}=(0,o.g)(),x=(0,N.a)(),h=(0,V.cC)(f),{data:p}=(0,D.el)(),{data:g}=(0,y.m)(),{data:v,isSuccess:j}=(0,u.KQ)({slug:f}),b=null!=(a=null==v?void 0:v.org_scoped_roles)?a:[],w=null!=(n=null==v?void 0:v.project_scoped_roles)?n:[],{rolesAddable:_,rolesRemovable:S}=ee(null==x?void 0:x.slug,b.concat(w),null!=g?g:[]),I=b.every(e=>!_.includes(e.id)),[k,R]=(0,s.useState)(!1),[C,A]=(0,s.useState)(!1),[z,L]=(0,s.useState)([]),M=void 0!==v?eP(d,v,null!=p?p:[]):[],E=1===M.length&&b.find(e=>e.id===M[0].roleId)?"org-scope":"project-scope",F=(null!=p?p:[]).filter(e=>e.organization_id===(null==x?void 0:x.id)),O=1===z.length&&(null==(t=z[0])?void 0:t.ref)===void 0,T=z.length>0,B=null==(r=b.find(e=>"Developer"===e.name))?void 0:r.id,P=F.filter(e=>!z.some(t=>t.ref===e.ref)),q=F.length-P.length,G=M.length!==P.length,Y=eR()(z,M),Z=e=>{L(z.concat({ref:e,roleId:null!=B?B:b[0].id})),A(!1)},et=e=>{void 0!==e&&L(z.filter(t=>t.ref!==e))},er=(e,t)=>{void 0!==t.ref?L(z.map(r=>r.ref===t.ref?{ref:r.ref,projectId:r.projectId,roleId:Number(e)}:r)):L([{ref:void 0,roleId:Number(e)}])};return(0,s.useEffect)(()=>{i&&j&&L(eP(d,v,null!=p?p:[]))},[i,j]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eA.cj,{open:i,onOpenChange:()=>m(),"data-sentry-element":"Sheet","data-sentry-source-file":"UpdateRolesPanel.tsx",children:(0,l.jsx)(eA.h,{showClose:!1,size:"default",className:(0,K.cn)("bg-surface-200 p-0 flex flex-row gap-0 !min-w-[400px]"),"data-sentry-element":"SheetContent","data-sentry-source-file":"UpdateRolesPanel.tsx",children:(0,l.jsxs)("div",{className:(0,K.cn)("flex flex-col grow w-full"),children:[(0,l.jsxs)(eA.Fm,{className:(0,K.cn)("py-3 flex flex-row justify-between gap-x-4 items-center border-b"),"data-sentry-element":"SheetHeader","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[(0,l.jsxs)("p",{className:"truncate",title:"Manage access for ".concat(d.username),children:["Manage access for ",d.username]}),(0,l.jsx)(eC.A,{href:"https://supabase.com/docs/guides/platform/access-control","data-sentry-element":"DocsButton","data-sentry-source-file":"UpdateRolesPanel.tsx"})]}),(0,l.jsxs)(eA.Xc,{className:"h-full overflow-auto flex flex-col gap-y-4","data-sentry-element":"SheetSection","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[h&&(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(H.d,{disabled:I,checked:O,onCheckedChange:e=>{let t=null!=B?B:b[0].id;e?"org-scope"===E?L(M):L([{ref:void 0,roleId:t}]):"project-scope"===E?L(M):L(F.map(e=>({ref:e.ref,projectId:e.id,roleId:t})))}}),(0,l.jsx)("p",{className:"text-sm",children:"Apply roles to all projects in the organization"})]}),0===z.length&&(0,l.jsxs)(ez.Fc,{children:[(0,l.jsx)(eL.id,{}),(0,l.jsx)(ez.XL,{children:"Team members need to be assigned at least one role"}),(0,l.jsx)(ez.TN,{children:"You may not remove all roles from a team member"})]}),!O&&z.length>0&&z.length!==F.length&&(0,l.jsxs)(ez.Fc,{children:[(0,l.jsx)(ez.XL,{children:G?"This member will only have access to ".concat(q," project").concat(q>1?"s":""):"This member only has access to ".concat(q," project").concat(q>1?"s":"")}),(0,l.jsxs)(ez.TN,{children:[d.username," ",G?"will":"does"," not have access to the following ",P.length," project",P.length>1?"s":"",":",(0,l.jsx)("ul",{className:"list-disc pl-6",children:P.map(e=>(0,l.jsx)("li",{children:e.name},e.id))})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-y-2",children:z.sort((e,t)=>{var r,l;return(null!=(r=null==e?void 0:e.projectId)?r:0)-(null!=(l=null==t?void 0:t.projectId)?l:0)}).map(e=>{var t,r,a,n,s;let i=void 0===e.ref?"All projects":null==p||null==(t=p.find(t=>t.ref===e.ref))?void 0:t.name,o=b.find(t=>void 0!==e.baseRoleId?t.id===e.baseRoleId:t.id===e.roleId),d=S.includes(null!=(r=null==o?void 0:o.id)?r:0);return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("p",{className:"text-sm",children:i}),(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[I?(0,l.jsxs)(Q.m_,{children:[(0,l.jsx)(Q.k$,{asChild:!0,children:(0,l.jsx)("div",{className:"flex items-center justify-between rounded-md border border-button bg-button px-3 py-2 text-sm h-10 w-56 text-foreground-light",children:null!=(a=null==o?void 0:o.name)?a:"Unknown"})}),(0,l.jsx)(Q.ZI,{side:"bottom",children:"Additional permissions required to update role"})]}):(0,l.jsxs)($.l6,{value:(null!=(n=null==e?void 0:e.baseRoleId)?n:e.roleId).toString(),onValueChange:t=>er(t,e),children:[(0,l.jsx)($.bq,{className:(0,K.cn)("text-sm h-10 w-56",(null==o?void 0:o.name)===void 0&&"text-foreground-light"),children:null!=(s=null==o?void 0:o.name)?s:"Please select a role"}),(0,l.jsx)($.gC,{children:(0,l.jsx)($.s3,{children:(null!=b?b:[]).map(e=>{let t=_.includes(e.id);return(0,l.jsx)($.eb,{value:e.id.toString(),className:"text-sm hover:bg-selection cursor-pointer",disabled:!t,children:e.name},e.id)})})})]}),!O&&(0,l.jsx)(c.G,{type:"text",disabled:!d,className:"px-1",icon:(0,l.jsx)(eu.A,{}),onClick:()=>et(null==e?void 0:e.ref),tooltip:{content:{side:"bottom",text:d?"Remove access to project":"Additional permission required to remove role from member"}}})]})]},"".concat(e.ref,"-").concat(e.roleId))})}),!O&&(0,l.jsxs)(X.AM,{open:C,onOpenChange:A,modal:!1,children:[(0,l.jsx)(X.Wv,{asChild:!0,children:(0,l.jsx)(U.$,{type:"default",className:"w-min",children:"Add project"})}),(0,l.jsx)(X.hl,{className:"p-0",side:"bottom",align:"start",children:(0,l.jsxs)(J.uB,{children:[(0,l.jsx)(J.G7,{placeholder:"Find project..."}),(0,l.jsxs)(J.oI,{children:[(0,l.jsx)(J.xL,{children:"No projects found"}),(0,l.jsx)(J.L$,{children:(0,l.jsx)(W.FK,{className:(p||[]).length>7?"h-[210px]":"",children:F.map(e=>{let t=z.some(t=>t.ref===e.ref);return(0,l.jsxs)(J.h_,{disabled:t,className:"cursor-pointer w-full justify-between",onSelect:()=>Z(e.ref),onClick:()=>Z(e.ref),children:[(0,l.jsx)("p",{className:"truncate",children:e.name}),t&&(0,l.jsx)("p",{className:"w-[45%] text-right",children:"Already assigned"})]},e.ref)})})})]})]})})]})]}),(0,l.jsxs)(eA.XW,{className:"flex items-center !justify-end px-5 py-4 w-full border-t","data-sentry-element":"SheetFooter","data-sentry-source-file":"UpdateRolesPanel.tsx",children:[(0,l.jsx)(U.$,{type:"default",disabled:!1,onClick:()=>m(),"data-sentry-element":"Button","data-sentry-source-file":"UpdateRolesPanel.tsx",children:"Cancel"}),(0,l.jsx)(U.$,{loading:!1,disabled:!T||Y,onClick:()=>{R(!0)},"data-sentry-element":"Button","data-sentry-source-file":"UpdateRolesPanel.tsx",children:"Save roles"})]})]})})}),(0,l.jsx)(eU,{visible:k,member:d,projectsRoleConfiguration:z,onClose:e=>{R(!1),e&&m()},"data-sentry-element":"UpdateRolesConfirmationModal","data-sentry-source-file":"UpdateRolesPanel.tsx"})]})},eH=e=>{var t,r,a,n,d;let{member:m}=e,{slug:f}=(0,o.g)(),{profile:x}=(0,_.xc)(),[h,p]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),S=(0,b.x)("organization_members:delete"),k=(0,N.a)(),{data:C}=(0,y.m)(),{data:A}=(0,D.el)(),{data:z}=(0,v.Q)({slug:f}),{data:L}=(0,u.KQ)({slug:f});(0,V.cC)(f);let M=null!=(r=null==L?void 0:L.org_scoped_roles)?r:[],E=null!=(a=null==L?void 0:L.project_scoped_roles)?a:[],F=!!m.invited_id,O=null==z?void 0:z.find(e=>e.gotrue_id===(null==x?void 0:x.gotrue_id)),T=1===(null!=(n=null==O?void 0:O.role_ids)?n:[]).length&&M.some(e=>e.id===(null==O?void 0:O.role_ids[0])),{rolesRemovable:q}=ee(null==k?void 0:k.slug,M.concat(E),null!=C?C:[]),Q=null!=(d=null==(t=m.role_ids)?void 0:t[0])?d:-1,G=m.role_ids.every(e=>q.includes(e)),H=(0,P.SE)(R.aG.CREATE,"user_invites",{resource:{role_id:Q}})&&T,$=(0,P.SE)(R.aG.DELETE,"user_invites",{resource:{role_id:Q}})&&T,{mutate:X,isLoading:J}=g({onSuccess:()=>{i.oR.success("Successfully removed ".concat(m.primary_email)),w(!1)}}),{mutate:W,isLoading:K}=B({onSuccess:()=>{i.oR.success("Resent the invitation.")},onError:e=>{i.oR.error("Failed to resend invitation: ".concat(e.message))}}),{mutate:Y,isLoading:Z}=eS(),et=J||Z||K,er=()=>f?m.gotrue_id?void X({slug:f,gotrueId:m.gotrue_id}):console.error("gotrue_id is required"):console.error("slug is required"),el=e=>{var t;let r=(null!=(t=null==e?void 0:e.role_ids)?t:[])[0],l=e.invited_id;return f?l?void Y({slug:f,id:l,skipInvalidation:!0},{onSuccess:()=>{if(!e.primary_email)return i.oR.error("Email is required");let t=E.find(e=>e.id===r);if(void 0!==t){var l;let r=(null!=(l=null==t?void 0:t.project_ids)?l:[]).map(e=>{var t;return null==A||null==(t=A.find(t=>t.id===e))?void 0:t.ref}).filter(Boolean);W({slug:f,email:e.primary_email,roleId:t.base_role_id,projects:r})}else W({slug:f,email:e.primary_email,roleId:r})}}):console.error("Member invited ID is required"):console.error("Slug is required")},ea=e=>{let t=e.invited_id;return f?t?void Y({slug:f,id:t},{onSuccess:()=>i.oR.success("Successfully revoked the invitation.")}):console.error("Member invited ID is required"):console.error("Slug is required")};return G&&(!F||H||$)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-end gap-x-2",children:[(0,l.jsx)(c.G,{type:"default",disabled:F||!G,onClick:()=>p(!0),tooltip:{content:{side:"bottom",text:F?"Role can only be changed after the user has accepted the invite":G?void 0:"You need additional permissions to manage this team member"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"MemberActions.tsx",children:"Manage access"}),(0,l.jsxs)(eI.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"MemberActions.tsx",children:[(0,l.jsx)(eI.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsx)(U.$,{type:"text",className:"px-1.5",disabled:et,loading:et,icon:(0,l.jsx)(ew.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"MemberActions.tsx"})}),(0,l.jsx)(eI.SQ,{side:"bottom",align:"end",className:"w-52","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsx)(l.Fragment,{children:F?(0,l.jsxs)(l.Fragment,{children:[$&&(0,l.jsx)(eI._2,{onClick:()=>ea(m),children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"Cancel invitation"}),(0,l.jsx)("p",{className:"text-foreground-lighter",children:"Revoke this invitation."})]})}),H&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eI.mB,{}),(0,l.jsx)(eI._2,{onClick:()=>el(m),children:(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"Resend invitation"}),(0,l.jsx)("p",{className:"text-foreground-lighter",children:"Invites expire after 24hrs."})]})})]})]}):S&&(0,l.jsxs)(eI._2,{className:"space-x-2 items-start",disabled:!G,onClick:()=>{w(!0)},children:[(0,l.jsx)(eN.A,{size:16}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{children:"Remove member"}),!G&&(0,l.jsx)("p",{className:"text-foreground-lighter",children:"Additional permissions required"})]})]})})})]})]}),(0,l.jsx)(I.A,{size:"large",visible:j,loading:J,title:"Confirm to remove member",confirmLabel:"Remove",variant:"warning",alert:{title:"All user content from this member will be permanently removed.",description:(0,l.jsxs)("div",{children:["Removing a member will delete all of the user's saved content in all projects of this organization, which includes:",(0,l.jsxs)("ul",{className:"list-disc pl-4 my-2",children:[(0,l.jsxs)("li",{children:["SQL snippets"," ",(0,l.jsxs)("span",{className:"text-foreground",children:["(both ",(0,l.jsx)("span",{className:"underline",children:"private"})," and"," ",(0,l.jsx)("span",{className:"underline",children:"shared"})," snippets)"]})]}),(0,l.jsx)("li",{children:"Custom reports"}),(0,l.jsx)("li",{children:"Log Explorer queries"})]}),(0,l.jsx)("p",{className:"mt-4 text-foreground-lighter",children:"If you'd like to retain the member's shared SQL snippets, right click on them and \"Duplicate query\" in the SQL Editor before removing this member."})]})},onCancel:()=>w(!1),onConfirm:()=>{er()},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"MemberActions.tsx",children:(0,l.jsxs)("p",{className:"text-sm text-foreground-light",children:["Are you sure you want to remove"," ",(0,l.jsx)("span",{className:"text-foreground",children:m.primary_email})," from"," ",(0,l.jsx)("span",{className:"text-foreground",children:null==k?void 0:k.name}),"?"]})}),(0,l.jsx)(eG,{visible:h,member:m,onClose:()=>p(!1),"data-sentry-element":"UpdateRolesPanel","data-sentry-source-file":"MemberActions.tsx"})]}):(0,l.jsx)("div",{className:"flex items-center justify-end",children:(0,l.jsx)(c.G,{disabled:!0,type:"text",className:"px-1.5",icon:(0,l.jsx)(ew.A,{size:18}),tooltip:{content:{side:"bottom",text:"You need additional permissions to manage this team member"}}})})},e$={vercel:"vercel-marketplace"},eX=e=>{var t,r,a,n;let{member:s}=e,{profile:i}=(0,_.xc)(),o=(0,N.a)(),{data:d}=(0,D.el)(),{data:c,isLoading:m}=(0,u.KQ)({slug:null==o?void 0:o.slug}),f=null==d?void 0:d.filter(e=>e.organization_id===(null==o?void 0:o.id)),x=(null!=(a=null==c?void 0:c.project_scoped_roles)?a:[]).length>0,h=s.gotrue_id==(null==i?void 0:i.gotrue_id),p=!!s.invited_id,g=s.username===s.primary_email,v=!!(null==(t=s.primary_email)?void 0:t.endsWith("customer.fly.io")),j=p||g||v?void 0:(0,ep.By)(s.username),y=s.role_ids.filter(e=>{var t,r,l;let a=[...null!=(t=null==c?void 0:c.org_scoped_roles)?t:[],...null!=(r=null==c?void 0:c.project_scoped_roles)?r:[]].find(t=>t.id===e);return(null==a?void 0:a.project_ids)!==null&&0===(null!=(l=null==a?void 0:a.project_ids)?l:[]).map(e=>{var t,r;return null!=(r=null==d||null==(t=d.find(t=>t.id===e))?void 0:t.name)?r:""}).filter(e=>e.length>0).length}).length>0;return(0,l.jsxs)(en.A.tr,{"data-sentry-element":"unknown","data-sentry-component":"MemberRow","data-sentry-source-file":"MemberRow.tsx",children:[(0,l.jsx)(en.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"MemberRow.tsx",children:(0,l.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,l.jsx)(eh.p,{alt:s.username,src:j,className:"border rounded-full w-[32px] h-[32px] md:w-[40px] md:h-[40px]",placeholder:(0,l.jsx)("div",{className:(0,K.cn)("w-[32px] h-[32px] md:w-[40px] md:h-[40px]","bg-surface-100 border border-overlay rounded-full text-foreground-lighter flex items-center justify-center"),children:(0,l.jsx)(ec.A,{size:20,strokeWidth:1.5})}),"data-sentry-element":"ProfileImage","data-sentry-source-file":"MemberRow.tsx"}),(0,l.jsxs)("div",{className:"flex item-center gap-x-2",children:[void 0===p?(0,l.jsx)("p",{className:"text-foreground-light truncate",children:s.primary_email}):(0,l.jsx)("p",{className:"text-foreground truncate",children:eb(s)}),s.primary_email===(null==i?void 0:i.primary_email)&&(0,l.jsx)(eg.E,{color:"scale",children:"You"})]}),(null==(r=s.metadata)?void 0:r.origin)&&(0,l.jsx)(ex.A,{organization:{managed_by:null!=(n=e$[s.metadata.origin])?n:"supabase"},tooltipText:"This user is managed by Vercel Marketplace."})]})}),(0,l.jsxs)(en.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"MemberRow.tsx",children:[p&&s.invited_at&&(0,l.jsx)(eg.E,{variant:ey(s.invited_at)?"destructive":"warning",children:ey(s.invited_at)?"Expired":"Invited"}),s.is_sso_user&&(0,l.jsx)(eg.E,{variant:"default",children:"SSO"})]}),(0,l.jsx)(en.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"MemberRow.tsx",children:(0,l.jsx)("div",{className:"flex items-center justify-center",children:s.mfa_enabled?(0,l.jsx)(A.A,{className:"text-brand",strokeWidth:2,size:20}):(0,l.jsx)(eu.A,{className:"text-foreground-light",strokeWidth:1.5,size:20})})}),(0,l.jsx)(en.A.td,{className:"max-w-64","data-sentry-element":"unknown","data-sentry-source-file":"MemberRow.tsx",children:m?(0,l.jsx)(ej.A,{className:"w-32"}):y?(0,l.jsx)(em.A,{strokeWidth:1.5,size:20}):s.role_ids.map(e=>{var t,r,a,n,s;let i=(null!=(t=null==c?void 0:c.org_scoped_roles)?t:[]).find(t=>t.id===e),o=(null!=(r=null==c?void 0:c.project_scoped_roles)?r:[]).find(t=>t.id===e),d=i||o,u=(null!=(a=null==d?void 0:d.name)?a:"").split("_")[0],m=(null==d?void 0:d.project_ids)===null?null!=(n=null==f?void 0:f.map(e=>e.name))?n:[]:(null!=(s=null==d?void 0:d.project_ids)?s:[]).map(e=>{var t,r;return null!=(r=null==f||null==(t=f.find(t=>t.id===e))?void 0:t.name)?r:""}).filter(e=>e.length>0);return(0,l.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,l.jsx)("p",{children:u}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:""}),1===m.length?(0,l.jsx)("span",{className:"text-foreground truncate",title:m[0],children:m[0]}):(0,l.jsxs)(ev.jc,{openDelay:200,children:[(0,l.jsx)(ev.d0,{asChild:!0,children:(0,l.jsx)("span",{className:"text-foreground",children:(null==d?void 0:d.project_ids)===null?"Organization":"".concat(m.length," project").concat(m.length>1?"s":"")})}),(0,l.jsxs)(ev.Et,{className:"p-0",children:[(0,l.jsxs)("p",{className:"p-2 text-xs",children:[u," role applies to ",m.length," project",m.length>1?"s":""]}),(0,l.jsx)("div",{className:"border-t flex flex-col py-1",children:(0,l.jsx)(W.FK,{className:(0,K.cn)(m.length>5?"h-[130px]":""),children:m.map(e=>{var t;let r=null==f||null==(t=f.find(t=>t.name===e))?void 0:t.ref;return(0,l.jsxs)(L(),{href:"/project/".concat(r),className:"px-2 py-1 group hover:bg-surface-300 hover:text-foreground transition flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-xs truncate max-w-[60%]",children:e}),(0,l.jsxs)("span",{className:"text-xs text-foreground flex items-center gap-x-1 opacity-0 group-hover:opacity-100 transition",children:["Go to project",(0,l.jsx)(ef.A,{size:14})]})]},e)})})})]})]})]})]},"role-".concat(e))})}),(0,l.jsx)(en.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"MemberRow.tsx",children:!h&&(0,l.jsx)(eH,{member:s})})]})},eJ=e=>{var t,r,a;let{searchString:n}=e,{slug:s}=(0,o.g)(),{profile:i}=(0,_.xc)(),{data:d,error:c,isLoading:m,isError:f,isSuccess:x}=(0,v.Q)({slug:s}),{data:h,error:p,isSuccess:g,isError:j}=(0,u.KQ)({slug:s}),y=null!=d?d:[],b=(!n?y:y.filter(e=>{var t,r;return e.invited_at?null==(t=e.primary_email)?void 0:t.includes(n):e.gotrue_id?e.username.includes(n)||(null==(r=e.primary_email)?void 0:r.includes(n)):void 0})).slice().sort((e,t)=>e.primary_email===(null==i?void 0:i.primary_email)?-1:e.username.localeCompare(t.username)),w=y.find(e=>e.primary_email===(null==i?void 0:i.primary_email)),N=(null!=(r=null==h?void 0:h.org_scoped_roles)?r:[]).map(e=>e.id).includes(null!=(a=null==w||null==(t=w.role_ids)?void 0:t[0])?a:-1);return(0,l.jsxs)(l.Fragment,{children:[m&&(0,l.jsx)(ei.y,{}),f&&(0,l.jsx)(es.A,{error:c,subject:"Failed to retrieve organization members"}),j&&(0,l.jsx)(es.A,{error:p,subject:"Failed to retrieve organization roles"}),x&&(0,l.jsx)("div",{className:"rounded w-full overflow-hidden overflow-x-scroll",children:(0,l.jsx)(eo.A,{active:!b,children:(0,l.jsx)(en.A,{head:[(0,l.jsx)(en.A.th,{children:"User"},"header-user"),(0,l.jsx)(en.A.th,{className:"w-24"},"header-status"),(0,l.jsx)(en.A.th,{className:"text-center w-32",children:"Enabled MFA"},"header-mfa"),(0,l.jsxs)(en.A.th,{className:"flex items-center space-x-1",children:[(0,l.jsx)("span",{children:"Role"}),(0,l.jsxs)(Q.m_,{children:[(0,l.jsx)(Q.k$,{asChild:!0,children:(0,l.jsx)(U.$,{asChild:!0,type:"text",className:"px-1",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/access-control",children:(0,l.jsx)(el.A,{size:14,className:"text-foreground-light"})})})}),(0,l.jsx)(Q.ZI,{side:"bottom",children:"How to configure access control?"})]})]},"header-role"),(0,l.jsx)(en.A.th,{},"header-action")],body:[...g&&x&&!N?[(0,l.jsx)(en.A.tr,{children:(0,l.jsx)(en.A.td,{colSpan:12,className:"!p-0",children:(0,l.jsx)(ed.Z,{type:"note",title:"You are currently assigned with project scoped roles in this organization",description:"All the members within the organization will not be visible to you",className:"m-0 bg-alternative border-0 rounded-none"})})},"project-scope-notice")]:[],...b.map(e=>(0,l.jsx)(eX,{member:e},e.gotrue_id)),...n.length>0&&0===b.length?[(0,l.jsx)(en.A.tr,{className:"bg-panel-secondary-light",children:(0,l.jsx)(en.A.td,{colSpan:12,children:(0,l.jsxs)("div",{className:"flex items-center space-x-3 opacity-75",children:[(0,l.jsx)(ea.A,{size:16,strokeWidth:2}),(0,l.jsxs)("p",{className:"text-foreground-light",children:['No users matched the search query "',n,'"']})]})})},"no-results")]:[],(0,l.jsx)(en.A.tr,{className:"bg-panel-secondary-light",children:(0,l.jsx)(en.A.td,{colSpan:12,children:(0,l.jsxs)("p",{className:"text-foreground-light",children:[n?"".concat(b.length," of "):"",y.length||"0"," ",1==y.length?"user":"users"]})})},"footer")]})})})]})},eW=()=>{var e;let[t,r]=(0,w.U)(o.rS.LAST_VISITED_ORGANIZATION,""),{organizationMembersCreate:m,organizationMembersDelete:f}=(0,b.x)(["organization_members:create","organization_members:delete"]),{slug:x}=(0,o.g)(),h=(0,n.useRouter)(),{profile:p}=(0,_.xc)(),k=(0,N.a)(),R=null==k?void 0:k.is_owner,{data:C}=(0,y.m)(),{refetch:A}=(0,j.Ad)(),{data:z}=(0,u.KQ)({slug:x}),{data:L}=(0,v.Q)({slug:x}),M=null!=(e=null==z?void 0:z.org_scoped_roles)?e:[],{rolesAddable:E}=ee(null==k?void 0:k.slug,M,null!=C?C:[]),[F,O]=(0,s.useState)(!1),[T,B]=(0,s.useState)(""),D=E.length>0,V=!R||R&&et(L,M),{mutate:P}=g({onSuccess:async()=>{O(!1),Q(!1),await A(),i.oR.success("Successfully left ".concat(null==k?void 0:k.name)),r(""),h.push("/organizations")},onError:e=>{O(!1),i.oR.error("Failed to leave organization: ".concat(null==e?void 0:e.message))}}),[q,Q]=(0,s.useState)(!1),U=async()=>{if(!x)return console.error("Org slug is required");O(!0),P({slug:x,gotrueId:p.gotrue_id})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(d.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsx)(d.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"TeamSettings.tsx",children:"Team"}),(0,l.jsxs)(d.tn,{"data-sentry-element":"ScaffoldFilterAndContent","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsxs)(d.HJ,{className:"w-full flex-col md:flex-row gap-2 justify-between","data-sentry-element":"ScaffoldActionsContainer","data-sentry-source-file":"TeamSettings.tsx",children:[(0,l.jsx)(S.p,{size:"tiny",autoComplete:"off",icon:(0,l.jsx)(a.A,{size:12}),value:T,onChange:e=>B(e.target.value),name:"email",id:"email",placeholder:"Filter members","data-sentry-element":"Input","data-sentry-source-file":"TeamSettings.tsx"}),(0,l.jsxs)(d.fh,{className:"w-full md:w-auto","data-sentry-element":"ScaffoldActionsGroup","data-sentry-source-file":"TeamSettings.tsx",children:[m&&D&&void 0!==p&&void 0!==k&&(0,l.jsx)(er,{}),f&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(c.G,{type:"default",loading:F,disabled:!V,tooltip:{content:{side:"bottom",text:V?void 0:"An organization requires at least 1 owner"}},onClick:()=>Q(!0),children:"Leave team"})})]})]}),(0,l.jsx)(d.Rf,{className:"w-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"TeamSettings.tsx",children:(0,l.jsx)(eJ,{searchString:T,"data-sentry-element":"MembersView","data-sentry-source-file":"TeamSettings.tsx"})})]})]}),(0,l.jsx)(I.A,{size:"medium",visible:q,title:"Confirm to leave organization",confirmLabel:"Leave",variant:"warning",alert:{title:"All of your user content will be permanently removed.",description:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"Leaving the organization will delete all of your saved content in the projects of the organization, which includes:"}),(0,l.jsxs)("ul",{className:"list-disc pl-4",children:[(0,l.jsxs)("li",{children:["SQL snippets ",(0,l.jsx)("span",{className:"text-foreground",children:"(both private and shared)"})]}),(0,l.jsx)("li",{children:"Custom reports"}),(0,l.jsx)("li",{children:"Log Explorer queries"})]})]})},onCancel:()=>Q(!1),onConfirm:()=>U(),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"TeamSettings.tsx",children:(0,l.jsx)("p",{className:"text-sm text-foreground-light",children:"Are you sure you want to leave this organization? This is permanent."})})]})};var eK=r(6408),eY=r(28718),eZ=r(57464),e0=r(17573);let e2=()=>{let{isLoading:e}=(0,y.m)();return void 0===(0,N.a)()&&e?(0,l.jsx)(e0.A,{"data-sentry-element":"Loading","data-sentry-component":"OrgTeamSettings","data-sentry-source-file":"team.tsx"}):(0,l.jsx)(eW,{"data-sentry-element":"TeamSettings","data-sentry-component":"OrgTeamSettings","data-sentry-source-file":"team.tsx"})};e2.getLayout=e=>(0,l.jsx)(eK.A,{children:(0,l.jsx)(eY.A,{children:(0,l.jsx)(eZ.A,{children:e})})});let e1=e2},99673:(e,t,r)=>{"use strict";r.d(t,{O:()=>i,h:()=>s});var l=r(80263),a=r(53239),n=r(2);let s=(0,a.forwardRef)((e,t)=>(0,l.jsx)("nav",{ref:t,dir:"ltr",...e,className:(0,n.cn)("border-b",e.className),children:(0,l.jsx)("ul",{role:"menu",className:"flex gap-5",children:e.children})})),i=(0,a.forwardRef)((e,t)=>{let{children:r,className:a,active:s,...i}=e;return(0,l.jsx)("li",{ref:t,"aria-selected":s?"true":"false","data-state":s?"active":"inactive",className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap text-sm ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:text-foreground text-foreground-lighter hover:text-foreground data-[state=active]:border-foreground border-b-2 border-transparent *:py-1.5",a),...i,children:r})})},99923:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});let l=(0,r(47370).A)("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2479,8058,9353,9413,3730,6110,6182,589,9257,1673,5599,7990,8508,4365,2981,5969,3719,9472,9088,3423,6593,636,8792],()=>t(19438)),_N_E=e.O()}]);