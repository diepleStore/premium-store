!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="cf9cacab-ea6d-4632-9c3b-f712b776bf2d",e._sentryDebugIdIdentifier="sentry-dbid-cf9cacab-ea6d-4632-9c3b-f712b776bf2d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3345,6106],{2081:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(80263),a=r(64238),n=r(81372),i=r(53239),l=r(90206),o=r(16601),d=r(2);let c=e=>{var t;let{text:r,asyncText:c,iconOnly:u=!1,children:m,onClick:x,copyLabel:f="Copy",copiedLabel:p="Copied",...h}=e,[g,y]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(!g)return;let e=setTimeout(()=>y(!1),2e3);return()=>clearTimeout(e)},[g]),(0,s.jsx)(o.$,{onClick:async e=>{let t=c?await c():r;y(!0),await (0,l.lW)(t),null==x||x(e)},...h,className:(0,d.cn)({"px-1":u},h.className),icon:g?(0,s.jsx)(a.A,{strokeWidth:2,className:"text-brand"}):null!=(t=h.icon)?t:(0,s.jsx)(n.A,{}),"data-sentry-element":"Button","data-sentry-component":"CopyButton","data-sentry-source-file":"CopyButton.tsx",children:!u&&(0,s.jsx)(s.Fragment,{children:null!=m?m:g?p:f})})}},13351:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/functions/[functionSlug]",function(){return r(20741)}])},20741:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var s=r(80263),a=r(60045),n=r(89044),i=r(53434),l=r.n(i),o=r(79291),d=r.n(o),c=r(27503),u=r.n(c),m=r(52385),x=r(53239),f=r(49018),p=r(6408),h=r(40459),g=r(72225),y=r(57830),j=r(93274),v=r(56947),w=r(3807),b=r(55319);async function N(e,t){let{projectRef:r,functionId:s,interval:a}=e;if(!r)throw Error("projectRef is required");if(!s)throw Error("functionId is required");if(!a)throw Error("interval is required");let{data:n,error:i}=await (0,w.Jt)("/platform/projects/{ref}/analytics/endpoints/functions.req-stats",{params:{path:{ref:r},query:{function_id:s,interval:a}},signal:t});return i&&(0,w.H4)(i),n}let _=function(e){let{projectRef:t,functionId:r,interval:s}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,v.I)(b.P.functionsReqStats(t,{functionId:r,interval:s}),e=>{let{signal:a}=e;return N({projectRef:t,functionId:r,interval:s},a)},{enabled:a&&void 0!==t&&void 0!==r&&void 0!==s,...n})};async function S(e,t){let{projectRef:r,functionId:s,interval:a}=e;if(!r)throw Error("projectRef is required");if(!s)throw Error("functionId is required");if(!a)throw Error("interval is required");let{data:n,error:i}=await (0,w.Jt)("/platform/projects/{ref}/analytics/endpoints/functions.resource-usage",{params:{path:{ref:r},query:{function_id:s,interval:a}},signal:t});return i&&(0,w.H4)(i),n}let A=function(e){let{projectRef:t,functionId:r,interval:s}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,v.I)(b.P.functionsResourceUsage(t,{functionId:r,interval:s}),e=>{let{signal:a}=e;return S({projectRef:t,functionId:r,interval:s},a)},{enabled:a&&void 0!==t&&void 0!==r&&void 0!==s,...n})};var C=r(9113),k=r(81028),M=r(65904),O=r(16601),I=r(98883),E=r(55739);let L=[{key:"5min",label:"5 min",startValue:5,startUnit:"minute",format:"MMM D, h:mm:ssa"},{key:"15min",label:"15 min",startValue:15,startUnit:"minute",format:"MMM D, h:mma"},{key:"1hr",label:"1 hour",startValue:1,startUnit:"hour",format:"MMM D, h:mma"},{key:"1day",label:"1 day",startValue:1,startUnit:"hour",format:"MMM D, h:mma"},{key:"7day",label:"7 days",startValue:7,startUnit:"day",format:"MMM D"}],T=()=>{let e=(0,m.useRouter)(),{ref:t,functionSlug:r}=(0,n.g)(),[i,o]=(0,x.useState)("15min"),c=L.find(e=>e.key===i)||L[1],{data:p}=(0,C.F)({projectRef:t,slug:r}),h=null==p?void 0:p.id,v=_({projectRef:t,functionId:h,interval:c.key}),w=A({projectRef:t,functionId:h,interval:c.key}),b=(0,x.useMemo)(()=>{var e;return(null==(e=v.data)?void 0:e.result)||[]},[v.data]),N=(0,x.useMemo)(()=>{var e;return(null==(e=w.data)?void 0:e.result)||[]},[w.data]),[S,T]=(0,x.useMemo)(()=>[l()().subtract(c.startValue,c.startUnit).startOf(c.startUnit),l()().startOf(c.startUnit)],[c]),{data:D,error:R,isError:q}=(0,k.m)(b,"timestamp",["avg_execution_time"],0,S.toISOString(),T.toISOString()),{data:F,error:K,isError:P}=(0,k.m)(b,"timestamp",["count","success_count","redirect_count","client_err_count","server_err_count"],0,S.toISOString(),T.toISOString()),{data:B,error:U,isError:H}=(0,k.m)(N,"timestamp",["avg_cpu_time_used","avg_memory_used"],0,S.toISOString(),T.toISOString());return(0,M.SE)(a.aG.FUNCTIONS_READ,r)?(0,s.jsx)("div",{className:"px-6 w-full pt-6","data-sentry-component":"PageLayout","data-sentry-source-file":"index.tsx",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsx)("div",{className:"flex items-center",children:L.map((e,t)=>{let r=[];return 0===t?r.push("rounded-tr-none rounded-br-none"):t===L.length-1?r.push("rounded-tl-none rounded-bl-none"):r.push("rounded-none"),(0,s.jsx)(O.$,{type:i===e.key?"secondary":"default",onClick:()=>o(e.key),className:r.join(" "),children:e.label},"function-filter-".concat(t))})}),(0,s.jsxs)("span",{className:"text-xs text-foreground-light",children:["Statistics for past ",c.label]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:gap-4 lg:grid-cols-2 lg:gap-8",children:[(0,s.jsx)(f.A,{title:"Execution time",tooltip:"Average execution time of function invocations",data:D,isLoading:v.isLoading,renderer:e=>q?(0,s.jsxs)(I.Fc,{variant:"warning",children:[(0,s.jsx)(E.id,{}),(0,s.jsx)(I.XL,{children:"Failed to reterieve execution time"}),(0,s.jsx)(I.TN,{children:R.message})]}):(0,s.jsx)(g.A,{className:"w-full",xAxisKey:"timestamp",customDateFormat:c.format,yAxisKey:"avg_execution_time",data:e.data,format:"ms",highlightedValue:d()(e.data,"avg_execution_time")}),"data-sentry-element":"ReportWidget","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(f.A,{title:"Invocations",data:F,isLoading:v.isLoading,renderer:a=>{if(P)return(0,s.jsxs)(I.Fc,{variant:"warning",children:[(0,s.jsx)(E.id,{}),(0,s.jsx)(I.XL,{children:"Failed to reterieve invocations"}),(0,s.jsx)(I.TN,{children:K.message})]});{let n=a.data.map(e=>[{status:"2xx",count:e.success_count,timestamp:e.timestamp},{status:"3xx",count:e.redirect_count,timestamp:e.timestamp},{status:"4xx",count:e.client_err_count,timestamp:e.timestamp},{status:"5xx",count:e.server_err_count,timestamp:e.timestamp}]).flat();return(0,s.jsx)(y.A,{className:"w-full",xAxisKey:"timestamp",yAxisKey:"count",stackKey:"status",data:n,highlightedValue:u()(n,"count"),customDateFormat:c.format,stackColors:["brand","slate","yellow","red"],onBarClick:()=>{e.push("/project/".concat(t,"/functions/").concat(r,"/invocations?its=").concat(S.toISOString()))}})}},"data-sentry-element":"ReportWidget","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(f.A,{title:"CPU time",tooltip:"Average CPU time usage for the function",data:B,isLoading:w.isLoading,renderer:e=>H?(0,s.jsxs)(I.Fc,{variant:"warning",children:[(0,s.jsx)(E.id,{}),(0,s.jsx)(I.XL,{children:"Failed to retrieve CPU time"}),(0,s.jsx)(I.TN,{children:U.message})]}):(0,s.jsx)(g.A,{className:"w-full",xAxisKey:"timestamp",customDateFormat:c.format,yAxisKey:"avg_cpu_time_used",data:e.data,format:"ms",highlightedValue:d()(e.data,"avg_cpu_time_used")}),"data-sentry-element":"ReportWidget","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(f.A,{title:"Memory",tooltip:"Average memory usage for the function",data:B,isLoading:w.isLoading,renderer:e=>H?(0,s.jsxs)(I.Fc,{variant:"warning",children:[(0,s.jsx)(E.id,{}),(0,s.jsx)(I.XL,{children:"Failed to retrieve memory usage"}),(0,s.jsx)(I.TN,{children:U.message})]}):(0,s.jsx)(g.A,{className:"w-full",xAxisKey:"timestamp",customDateFormat:c.format,yAxisKey:"avg_memory_used",data:e.data,format:"MB",highlightedValue:d()(e.data,"avg_memory_used")}),"data-sentry-element":"ReportWidget","data-sentry-source-file":"index.tsx"})]})})]})}):(0,s.jsx)(j.A,{isFullPage:!0,resourceText:"access this edge function"})};T.getLayout=e=>(0,s.jsx)(p.A,{children:(0,s.jsx)(h.A,{children:e})});let D=T},21355:(e,t,r)=>{"use strict";r.d(t,{A:()=>f});var s=r(17702),a=r(56947),n=r(53434),i=r.n(n),l=r(53239),o=r(66933),d=r(92589),c=r(3807),u=r(66001),m=r(81028);let x=(e,t)=>(0,l.useMemo)(()=>0!==e.length&&(0,d.l8)(e[0][t])?null==e?void 0:e.map(e=>(e[t]=(0,d.RT)(e[t]),e)):e,[JSON.stringify(e)]),f=function(e){var t,r,n,f,p;let{projectRef:h,table:g,filterOverride:y,limit:j}=e,v=(0,o.Et)(o.Z8),[w,b]=(0,l.useState)(new Date().toISOString()),{timestampStart:N,timestampEnd:_,filters:S,search:A}=(0,u.B)(),C=(0,l.useMemo)(()=>N||v.calcFrom(),[N,v]),k=(0,l.useMemo)(()=>_||v.calcTo(),[_,v]),M=(0,l.useMemo)(()=>({...S,...y,...A?{search_query:A}:{}}),[JSON.stringify(S),JSON.stringify(y),A]),O=(0,l.useMemo)(()=>({project:h,iso_timestamp_start:C,iso_timestamp_end:k,sql:(0,d.qr)(g,M,j)}),[h,C,k,g,M,j]),I=(0,l.useMemo)(()=>["projects",h,"logs",O],[h,O]),{data:E,isSuccess:L,isLoading:T,isRefetching:D,error:R,fetchNextPage:q,isFetchingNextPage:F,refetch:K}=(0,s.q)(I,async e=>{let{signal:t,pageParam:r}=e,{data:s,error:a}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:h},query:{...O,iso_timestamp_end:r||O.iso_timestamp_end}},signal:t});if(a)throw a;return s},{refetchOnWindowFocus:!1,getNextPageParam(e){var t,r;if((null!=(r=null==(t=e.result)?void 0:t.length)?r:0)===0)return;let s=e.result.length,{timestamp:a}=e.result[s-1];return i().utc(Number(a/1e3)).toISOString()}}),{logData:P,error:B,oldestTimestamp:U}=(0,l.useMemo)(()=>{var e,t;let r=[],s=R?R.message:null;null==E||null==(e=E.pages)||e.forEach(e=>{(null==e?void 0:e.result)&&(r=[...r,...e.result]),!s&&(null==e?void 0:e.error)&&(s=e.error)});let a=r.length>0?null==(t=r[r.length-1])?void 0:t.timestamp:void 0;return{logData:r,error:s,oldestTimestamp:a}},[null==E?void 0:E.pages]),H=(0,l.useMemo)(()=>(0,d.oZ)(g,M),[g,M]),W=(0,l.useMemo)(()=>["projects",h,"logs-count",{projectRef:h,sql:H,iso_timestamp_start:w,iso_timestamp_end:k,table:g,mergedFilters:M}],[h,H,w,k,g,M]),{data:z}=(0,a.I)(W,async e=>{let{signal:t}=e,{data:r,error:s}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:h},query:{project:h,sql:H,iso_timestamp_start:w,iso_timestamp_end:k}},signal:t});if(s)throw s;return r},{refetchOnWindowFocus:!1,refetchInterval:6e4,enabled:!B&&!!E&&(null==E||null==(t=E.pages)?void 0:t.length)>0}),J=null!=(f=null==z||null==(n=z.result)||null==(r=n[0])?void 0:r.count)?f:0,V=(0,l.useMemo)(()=>(0,d.tS)(g,O,M),[g,O,M]),X=(0,l.useMemo)(()=>["projects",h,"logs-chart",{projectRef:h,sql:V,iso_timestamp_start:C,iso_timestamp_end:k}],[h,V,C,k]),{data:Z,refetch:$}=(0,a.I)(X,async e=>{let{signal:t}=e,{data:r,error:s}=await (0,c.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:h},query:{iso_timestamp_start:C,iso_timestamp_end:k,project:h,sql:V}},signal:t});if(s)throw s;return r},{refetchOnWindowFocus:!1}),G=(0,l.useCallback)(async()=>{b(new Date().toISOString()),$(),K()},[K,$]),Q=x(null!=(p=null==Z?void 0:Z.result)?p:[],"timestamp"),{data:Y,error:ee}=(0,m.m)(Q,"timestamp","count",0,C,k||new Date().toISOString());return{newCount:J,logData:P,isSuccess:L,isLoading:T||D,isLoadingOlder:F,error:B||ee,filters:M,params:O,oldestTimestamp:U?String(U):void 0,eventChartData:Y,refresh:G,loadOlder:()=>q()}}},45168:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(80263),a=r(31277),n=r(2),i=r(83455),l=r(84430);let o=e=>{let{attribute:t,message:r="No data to show",description:o,format:d,className:c="",size:u}=e,{minHeight:m}=(0,l.dQ)(u);return(0,s.jsxs)("div",{"data-sentry-component":"NoDataPlaceholder","data-sentry-source-file":"NoDataPlaceholder.tsx",children:[void 0!==t&&(0,s.jsx)(i.A,{title:t,format:d,highlightedValue:0}),(0,s.jsxs)("div",{className:(0,n.cn)("border-control flex flex-grow w-full flex-col items-center justify-center space-y-2 border border-dashed text-center",c),style:{minHeight:m+20},children:[(0,s.jsx)(a.A,{size:20,className:"text-border-stronger","data-sentry-element":"BarChart2","data-sentry-source-file":"NoDataPlaceholder.tsx"}),(0,s.jsxs)("div",{className:"px-1",children:[(0,s.jsx)("p",{className:"text-foreground-light text-xs",children:r}),o&&(0,s.jsx)("p",{className:"text-foreground-lighter text-xs",children:o})]})]})]})}},47781:(e,t,r)=>{"use strict";r.d(t,{K:()=>p,T:()=>y});var s=r(80263),a=r(53239),n=r(3732),i=r(2),l=r(53434),o=r.n(l),d=r(27344),c=r.n(d),u=r(37361),m=r.n(u);o().extend(c()),o().extend(m());let x=e=>o().unix(Number(e)/1e3/1e3).toISOString(),f=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},p=e=>{let{utcTimestamp:t,format:r}=e,s=f(t)?x(t):t;return o().utc(s).local().format(r)},h=e=>{let{utcTimestamp:t,format:r}=e,s=f(t)?x(t):t;return o().utc(s).format(r)},g=e=>{let{utcTimestamp:t}=e,r=f(t)?x(t):t;return o().utc(r).fromNow()},y=e=>{let{utcTimestamp:t,className:r,displayAs:l="local",format:o="DD MMM  HH:mm:ss",labelFormat:d="DD MMM HH:mm:ss"}=e,c=p({utcTimestamp:t,format:o}),u=h({utcTimestamp:t,format:o}),m=g({utcTimestamp:t}),[x,f]=(0,a.useState)("start"),y=(0,a.useRef)(null),j=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,a.useEffect)(()=>{let e=()=>{if(y.current){let e=y.current.getBoundingClientRect(),t=window.innerHeight;f(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let v=e=>{let{label:t,value:r}=e,[n,l]=(0,a.useState)(!1);return(0,s.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),navigator.clipboard.writeText(r),l(!0),setTimeout(()=>{l(!1)},1e3)},className:(0,i.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":n}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,s.jsx)("p",{children:t}),(0,s.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,s.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,s.jsx)("div",{className:"border-t w-full border-dashed z-10"}),n&&(0,s.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,s.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:r})]})]})};return(0,s.jsxs)(n.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,s.jsx)(n.k$,{asChild:!0,ref:y,className:"text-xs ".concat(r," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,s.jsx)("span",{children:"local"===l?p({utcTimestamp:t,format:d}):h({utcTimestamp:t,format:d})})}),(0,s.jsxs)(n.ZI,{align:x,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,s.jsx)(v,{label:"UTC",value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(v,{label:j,value:c,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(v,{label:"Relative",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,s.jsx)(v,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}},49018:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var s=r(80263),a=r(9678),n=r(66452),i=r(52385),l=r(89044),o=r(41960),d=r(2),c=r(3732),u=r(16601),m=r(58135);let x=e=>{let t=(0,i.useRouter)(),{ref:r}=(0,l.g)();return(0,s.jsxs)(o.A,{noMargin:!0,noHideOverflow:!0,className:(0,d.cn)("pb-0",e.className),wrapWithLoading:!1,"data-sentry-element":"Panel","data-sentry-component":"ReportWidget","data-sentry-source-file":"ReportWidget.tsx",children:[(0,s.jsxs)(o.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"ReportWidget.tsx",children:[(0,s.jsxs)("div",{className:"flex flex-row items-start justify-between",children:[(0,s.jsxs)("div",{className:"gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsx)("h3",{className:"w-full h-6",children:e.title})," ",(null==e?void 0:e.tooltip)&&(0,s.jsxs)(c.m_,{children:[(0,s.jsx)(c.k$,{children:(0,s.jsx)(a.A,{className:"text-foreground-light",size:14,strokeWidth:1.5})}),(0,s.jsx)(c.ZI,{side:"bottom",children:e.tooltip})]})]}),(0,s.jsx)("p",{className:"text-sm text-foreground-light",children:e.description})]}),e.params&&(0,s.jsxs)(c.m_,{children:[(0,s.jsx)(c.k$,{asChild:!0,children:(0,s.jsx)(u.$,{type:"default",icon:(0,s.jsx)(n.A,{}),className:"px-1",onClick:()=>{let s="db"===e.queryType,a=s?"/project/".concat(r,"/sql/new"):"/project/".concat(r,"/logs/explorer"),n={};if(s)n.content=e.resolvedSql;else{var i;n.q=null==(i=e.params)?void 0:i.sql,n.its=e.params.iso_timestamp_start,n.ite=e.params.iso_timestamp_end}t.push({pathname:a,query:n})}})}),(0,s.jsx)(c.ZI,{side:"left",children:"db"===e.queryType?"Open in SQL Editor":"Open in Logs Explorer"})]})]}),(0,s.jsx)(m.A,{active:e.isLoading,"data-sentry-element":"Loading","data-sentry-source-file":"ReportWidget.tsx",children:void 0===e.data?null:e.renderer({...e,router:t,projectRef:r})})]}),e.append&&(0,s.jsx)(s.Fragment,{children:e.append({...e,...e.appendProps||{},router:t,projectRef:r})})]})}},55319:(e,t,r)=>{"use strict";r.d(t,{P:()=>s});let s={warehouseQuery:(e,t)=>["projects",e,"warehouse","query",t],warehouseTenant:e=>["projects",e,"warehouse","tenant"],warehouseCollections:e=>["projects",e,"warehouse","collections"],warehouseCollectionsCreate:e=>["projects",e,"warehouse","collections","create"],warehouseEndpoints:e=>["projects",e,"warehouse","endpoints"],warehouseBackends:e=>["projects",e,"warehouse","backends"],warehouseAccessTokens:e=>["projects",e,"warehouse","access-tokens"],functionsInvStats:(e,t)=>{let{interval:r,functionId:s}=t;return["projects",e,"functions-inv-stats",{interval:r,functionId:s}]},functionsReqStats:(e,t)=>{let{interval:r,functionId:s}=t;return["projects",e,"functions-req-stats",{interval:r,functionId:s}]},functionsResourceUsage:(e,t)=>{let{interval:r,functionId:s}=t;return["projects",e,"functions-resource-usage",{interval:r,functionId:s}]},orgDailyComputeStats:(e,t)=>{let{startDate:r,endDate:s,projectRef:n}=t;return["organizations",e,"daily-stats-compute",{startDate:a(r),endDate:a(s),projectRef:n}]},orgDailyStats:(e,t)=>{let{metric:r,startDate:s,endDate:n,interval:i,projectRef:l}=t;return["organizations",e,"daily-stats",{metric:r,startDate:a(s),endDate:a(n),interval:i,projectRef:l}]},infraMonitoring:(e,t)=>{let{attribute:r,startDate:s,endDate:a,interval:n,databaseIdentifier:i}=t;return["projects",e,"infra-monitoring",{attribute:r,startDate:s,endDate:a,interval:n,databaseIdentifier:i}]},usageApiCounts:(e,t)=>["projects",e,"usage.api-counts",t],usageApiRequestsCount:e=>["projects",e,"usage.api-requests-count"]};function a(e){return e?e.split("T")[0]:e}},57830:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var s=r(80263),a=r(53239),n=r(99212),i=r(13862),l=r(53190),o=r(67435),d=r(15618),c=r(37475),u=r(53434),m=r.n(u),x=r(37361),f=r.n(x),p=r(83455),h=r(9603),g=r(84430),y=r(45168);m().extend(f());let j=e=>{var t;let{size:r,data:u,xAxisKey:x,stackKey:f,yAxisKey:j,customDateFormat:v=h.C_.FULL,title:w,highlightedValue:b,highlightedLabel:N,format:_,minimalHeader:S=!1,valuePrecision:A,onBarClick:C,variant:k,xAxisFormatAsDate:M=!0,displayDateInUtc:O,hideLegend:I=!1,hideHeader:E=!1,stackColors:L=h.ql}=e,{Container:T}=(0,g.dQ)(r),{dataKeys:D,stackedData:R,percentagesStackedData:q}=(0,g.BY)({data:u,xAxisKey:x,stackKey:f,yAxisKey:j,variant:k}),[F,K]=(0,a.useState)(null),P=null!==F&&u&&void 0!==u[F]&&(e=>O?m()(e).utc():m()(e))(u[F][x]).format(v)||N,B=null!==F?null==(t=u[F])?void 0:t[j]:b;if(!u||0===u.length)return(0,s.jsx)(y.A,{size:r});let U=(0,h.HH)(L);return(0,s.jsxs)("div",{className:"w-full","data-sentry-component":"StackedBarChart","data-sentry-source-file":"StackedBarChart.tsx",children:[!E&&(0,s.jsx)(p.A,{title:w,format:_,customDateFormat:v,minimalHeader:S,highlightedValue:"number"==typeof B?(0,g.Eg)(B,A):B,highlightedLabel:P}),(0,s.jsx)(T,{"data-sentry-element":"Container","data-sentry-source-file":"StackedBarChart.tsx",children:(0,s.jsxs)(n.E,{data:"percentages"===k?q:R,margin:{top:20,right:20,left:20,bottom:5},className:"cursor-pointer overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==F&&K(e.activeTooltipIndex)},onMouseLeave:()=>K(null),"data-sentry-element":"BarChart","data-sentry-source-file":"StackedBarChart.tsx",children:[!I&&(0,s.jsx)(i.s,{wrapperStyle:{top:-6,fontSize:"0.8rem"},iconSize:8,iconType:"circle",verticalAlign:"top"}),(0,s.jsx)(l.W,{dataKey:x,interval:u.length-2,angle:0,tick:!1,axisLine:{stroke:h.OK.AXIS},tickLine:{stroke:h.OK.AXIS},"data-sentry-element":"XAxis","data-sentry-source-file":"StackedBarChart.tsx"}),D.map((e,t)=>(0,s.jsx)(o.y,{dataKey:e,type:"monotone",legendType:"circle",fill:U[t].base,stackId:1,animationDuration:300,maxBarSize:48,className:C?"cursor-pointer":"",children:null==R?void 0:R.map((e,t)=>(0,s.jsx)(d.f,{className:"transition-all duration-300",opacity:F===t?.85:1},"cell-".concat(t)))},t)),(0,s.jsx)(c.m,{labelFormatter:M?e=>(0,g.bk)(e,v,O):void 0,formatter:(e,t,r)=>{let s=_||"";if("percentages"===k&&q){let a=R[q.findIndex(e=>e===r.payload)][t],n=(0,g.XO)(100*Number(e),1)+"%";return"".concat(n," (").concat(a).concat(s,")")}return String(e)+s},cursor:!1,labelClassName:"text-white",contentStyle:{backgroundColor:"#444444",borderColor:"#444444",fontSize:"12px"},wrapperClassName:"bg-gray-600 rounded min-w-md","data-sentry-element":"Tooltip","data-sentry-source-file":"StackedBarChart.tsx"})]})}),R&&R[0]&&(0,s.jsxs)("div",{className:"text-foreground-lighter -mt-5 flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{children:(0,g.bk)(R[0][x],v,O)}),(0,s.jsx)("span",{children:(0,g.bk)(R[(null==R?void 0:R.length)-1][x],v,O)})]})]})}},66001:(e,t,r)=>{"use strict";r.d(t,{B:()=>l});var s=r(34164);let a={search:"",timestampStart:"",timestampEnd:"",filters:{}},n=e=>(0,s.Cp)({parse:t=>null!=t?t:e,serialize:e=>e||""}),i=e=>(0,s.Cp)({parse:t=>{if(!t)return e;try{return JSON.parse(t)}catch(t){return e}},serialize:e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}}});function l(){let[e,t]=(0,s.ZA)("s",n(a.search)),[r,l]=(0,s.ZA)("its",n(a.timestampStart)),[o,d]=(0,s.ZA)("ite",n(a.timestampEnd)),[c,u]=(0,s.ZA)("log",n("")),[m,x]=(0,s.ZA)("f",i(a.filters)),f=e||a.search,p=r||a.timestampStart,h=o||a.timestampEnd,g=m||a.filters,y=e=>{t(e||a.search)},j=e=>{x(e||a.filters)};return{search:f,timestampStart:p,timestampEnd:h,selectedLogId:c||null,filters:g,setSearch:y,setTimeRange:(e,t)=>{l(e||a.timestampStart),d(t||a.timestampEnd)},setSelectedLogId:e=>{u(e||"")},setFilters:j,updateFilter:(e,t)=>{j({...g,[e]:t})},reset:()=>{y(a.search),l(a.timestampStart),d(a.timestampEnd),u(""),x(a.filters)}}}},72225:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var s=r(80263),a=r(53434),n=r.n(a),i=r(53239),l=r(8594),o=r(53190),d=r(37475),c=r(98140),u=r(9603),m=r(83455),x=r(84430),f=r(45168);let p=e=>{var t,r;let{data:a,yAxisKey:p,xAxisKey:h,format:g,customDateFormat:y=u.C_.FULL,title:j,highlightedValue:v,highlightedLabel:w,displayDateInUtc:b,minimalHeader:N,className:_="",valuePrecision:S,size:A="normal"}=e,{Container:C}=(0,x.dQ)(A),[k,M]=(0,i.useState)(null),O=null!==k&&a&&void 0!==a[k]&&(e=>b?n()(e).utc():n()(e))(a[k][h]).format(y)||w,I=null!==k?null==(t=a[k])?void 0:t[p]:v;return 0===a.length?(0,s.jsx)(f.A,{description:"It may take up to 24 hours for data to refresh",size:A,className:_,attribute:j,format:g}):(0,s.jsxs)("div",{className:["flex flex-col gap-3",_].join(" "),"data-sentry-component":"AreaChart","data-sentry-source-file":"AreaChart.tsx",children:[(0,s.jsx)(m.A,{title:j,format:g,customDateFormat:y,highlightedValue:"number"==typeof I?(0,x.Eg)(I,S):I,highlightedLabel:O,minimalHeader:N,"data-sentry-element":"ChartHeader","data-sentry-source-file":"AreaChart.tsx"}),(0,s.jsx)(C,{"data-sentry-element":"Container","data-sentry-source-file":"AreaChart.tsx",children:(0,s.jsxs)(l.Q,{data:a,margin:{top:0,right:0,left:0,bottom:0},className:"overflow-visible",onMouseMove:e=>{e.activeTooltipIndex!==k&&M(e.activeTooltipIndex)},onMouseLeave:()=>M(null),"data-sentry-element":"RechartAreaChart","data-sentry-source-file":"AreaChart.tsx",children:[(0,s.jsx)("defs",{"data-sentry-element":"defs","data-sentry-source-file":"AreaChart.tsx",children:(0,s.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1","data-sentry-element":"linearGradient","data-sentry-source-file":"AreaChart.tsx",children:[(0,s.jsx)("stop",{offset:"5%",stopColor:u.OK.GREEN_1,stopOpacity:.8,"data-sentry-element":"stop","data-sentry-source-file":"AreaChart.tsx"}),(0,s.jsx)("stop",{offset:"95%",stopColor:u.OK.GREEN_1,stopOpacity:0,"data-sentry-element":"stop","data-sentry-source-file":"AreaChart.tsx"})]})}),(0,s.jsx)(o.W,{dataKey:h,interval:a.length-2,angle:0,tick:!1,axisLine:{stroke:u.OK.AXIS},tickLine:{stroke:u.OK.AXIS},"data-sentry-element":"XAxis","data-sentry-source-file":"AreaChart.tsx"}),(0,s.jsx)(d.m,{content:()=>null,"data-sentry-element":"Tooltip","data-sentry-source-file":"AreaChart.tsx"}),(0,s.jsx)(c.G,{type:"monotone",dataKey:p,stroke:u.OK.GREEN_1,fillOpacity:1,fill:"url(#colorUv)","data-sentry-element":"Area","data-sentry-source-file":"AreaChart.tsx"})]})}),a&&(0,s.jsxs)("div",{className:"text-foreground-lighter -mt-8 flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{children:n()(a[0][h]).format(y)}),(0,s.jsx)("span",{children:n()(null==(r=a[(null==a?void 0:a.length)-1])?void 0:r[h]).format(y)})]})]})}},81028:(e,t,r)=>{"use strict";r.d(t,{m:()=>n});var s=r(92589),a=r(53239);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.useMemo)(()=>{var e;let[r,a]=t;if(!(null==(e=r[0])?void 0:e[a]))return{data:r,error:void 0,isError:!1};try{return{data:(0,s.mu)(...t).sort((e,r)=>new Date(e[t[1]])-new Date(r[t[1]])),error:void 0,isError:!1}}catch(e){return{data:[],error:e,isError:!0}}},[JSON.stringify(t[0]),...t])}},83455:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var s=r(80263),a=r(3732),n=r(16601),i=r(90235),l=r(2743),o=r(37427);let d=e=>{let{format:t,highlightedValue:r,highlightedLabel:d,title:c,minimalHeader:u=!1,hideChartType:m=!1,chartStyle:x="bar",onChartStyleChange:f,showMaxValue:p=!1,setShowMaxValue:h}=e,g=(0,s.jsx)("h3",{className:"text-foreground-lighter "+(u?"text-xs":"text-sm"),children:c}),y=(0,s.jsxs)("h4",{className:"text-foreground text-xl font-normal ".concat(u?"text-base":"text-2xl"),children:[void 0!==r&&r,"seconds"===t?" ":"",(0,s.jsx)("span",{className:"text-lg",children:"function"==typeof t?t(r):t})]}),j=(0,s.jsx)("h4",{className:"text-foreground-lighter text-xs",children:d});return u?(0,s.jsxs)("div",{className:"flex flex-row items-center gap-x-4",style:{minHeight:"1.8rem"},children:[c&&g,(0,s.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[void 0!==r&&y,j]})]}):(0,s.jsxs)("div",{className:"flex-grow flex justify-between items-start min-h-16","data-sentry-component":"ChartHeader","data-sentry-source-file":"ChartHeader.tsx",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[c&&g,void 0!==r&&y,j]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!m&&f&&(0,s.jsxs)(a.m_,{children:[(0,s.jsx)(a.k$,{asChild:!0,children:(0,s.jsx)(n.$,{type:"default",className:"px-1.5",icon:"bar"===x?(0,s.jsx)(i.A,{}):(0,s.jsx)(l.A,{}),onClick:()=>f("bar"===x?"line":"bar")})}),(0,s.jsxs)(a.ZI,{side:"left",align:"center",children:["View as ","bar"===x?"line chart":"bar chart"]})]}),h&&(0,s.jsxs)(a.m_,{children:[(0,s.jsx)(a.k$,{asChild:!0,children:(0,s.jsx)(n.$,{type:p?"default":"dashed",className:"px-1.5",icon:(0,s.jsx)(o.A,{className:p?"text-foreground":"text-foreground-lighter"}),onClick:()=>h(!p)})}),(0,s.jsxs)(a.ZI,{side:"left",align:"center",children:[p?"Hide":"Show"," limit"]})]})]})]})}},84430:(e,t,r)=>{"use strict";r.d(t,{BY:()=>h,Eg:()=>u,XO:()=>x,bk:()=>f,dQ:()=>p});var s=r(80263),a=r(53434),n=r.n(a),i=r(37361),l=r.n(i),o=r(53239),d=r(62099),c=r(9603);n().extend(l());let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return m(e)?x(e,t):e.toLocaleString()},m=e=>String(e).includes("."),x=(e,t)=>{if(!m(e))return e.toLocaleString()+"."+"0".repeat(t);{let[r,s]=String(e).split(".");return Number(r).toLocaleString()+"."+s.slice(0,t)}},f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.C_.FULL,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?n().utc(e).format(t):n()(e).format(t)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{tiny:76,small:96,normal:160,large:280},r=t[e];return{Container:(0,o.useMemo)(()=>e=>{let{className:t,children:a}=e;return(0,s.jsx)(d.u,{className:t,height:r,minHeight:r,width:"100%",children:a})},[e]),minHeight:r}},h=e=>{let{data:t,xAxisKey:r,yAxisKey:s,stackKey:a,variant:n="values"}=e,i=(0,o.useMemo)(()=>t?Object.entries(t.reduce((e,t)=>{let n=t[r],i=t[s],l=t[a];return e[n]||(e[n]={}),e[n][l]=i,e},{})).map(e=>{let[t,s]=e;return{...s,[r]:Number.isNaN(Number(t))?t:Number(t)}}):[],[JSON.stringify(t)]),l=(0,o.useMemo)(()=>Object.keys(i[0]||{}).filter(e=>e!==r&&e!==s).sort(),[JSON.stringify(i[0]||{})]),d=(0,o.useMemo)(()=>{if("percentages"===n)return i.map(e=>{let t=Object.entries(e),r=t.filter(e=>{let[t,r]=e;return l.includes(t)}).reduce((e,t)=>{let[r,s]=t;return e+s},0);return t.reduce((e,t)=>{let[s,a]=t;return l.includes(s)?{...e,[s]:0!==a?a/r:0}:{...e,[s]:a}},{})})},[JSON.stringify(i)]);return{dataKeys:l,stackedData:i,percentagesStackedData:d}}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2479,8058,9353,9413,3730,6110,6182,589,9257,1673,5599,7990,8508,4365,2981,7406,6554,4560,4963,408,4340,30,2809,6692,9571,5969,3719,9472,9088,3423,1252,7613,8601,8554,3131,9440,459,6593,636,8792],()=>t(13351)),_N_E=e.O()}]);