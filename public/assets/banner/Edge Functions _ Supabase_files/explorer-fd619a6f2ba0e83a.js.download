!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="291582bc-6189-4a06-95ed-9a1ad220f88d",e._sentryDebugIdIdentifier="sentry-dbid-291582bc-6189-4a06-95ed-9a1ad220f88d")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6106,6377],{8132:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(80263),a=s(63320),r=s.n(a),l=s(25718),o=s(55335),i=s(16601),c=s(66933);let d=e=>{let{show:t,setShowUpgradePrompt:s}=e,a=(0,l.a)();return(0,n.jsxs)(o.A,{hideFooter:!0,visible:t,size:"medium",header:"Log retention",onCancel:()=>s(!1),"data-sentry-element":"Modal","data-sentry-component":"UpgradePrompt","data-sentry-source-file":"UpgradePrompt.tsx",children:[(0,n.jsx)(o.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"UpgradePrompt.tsx",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm",children:"Logs can be retained up to a duration of 3 months depending on the plan that your project is on."}),(0,n.jsxs)("div",{className:"border-control bg-surface-300 rounded border",children:[(0,n.jsxs)("div",{className:"flex items-center px-4 pt-2 pb-1",children:[(0,n.jsx)("p",{className:"text-foreground-light w-[40%] text-sm",children:"Plan"}),(0,n.jsx)("p",{className:"text-foreground-light w-[60%] text-sm",children:"Retention duration"})]}),(0,n.jsxs)("div",{className:"py-1",children:[(0,n.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,n.jsx)("p",{className:"w-[40%] text-sm",children:"Free"}),(0,n.jsx)("p",{className:"w-[60%] text-sm",children:c.rU.FREE.text})]}),(0,n.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,n.jsx)("p",{className:"w-[40%] text-sm",children:"Pro"}),(0,n.jsx)("p",{className:"w-[60%] text-sm",children:c.rU.PRO.text})]}),(0,n.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,n.jsx)("p",{className:"w-[40%] text-sm",children:"Team"}),(0,n.jsx)("p",{className:"w-[60%] text-sm",children:c.rU.TEAM.text})]}),(0,n.jsxs)("div",{className:"flex items-center px-4 py-1",children:[(0,n.jsx)("p",{className:"w-[40%] text-sm",children:"Enterprise"}),(0,n.jsx)("p",{className:"w-[60%] text-sm",children:c.rU.ENTERPRISE.text})]})]})]})]})}),(0,n.jsx)(o.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"UpgradePrompt.tsx"}),(0,n.jsxs)(o.A.Content,{className:"flex justify-end gap-3","data-sentry-element":"unknown","data-sentry-source-file":"UpgradePrompt.tsx",children:[(0,n.jsx)(i.$,{type:"default",onClick:()=>s(!1),"data-sentry-element":"Button","data-sentry-source-file":"UpgradePrompt.tsx",children:"Close"}),(0,n.jsx)(i.$,{asChild:!0,size:"tiny","data-sentry-element":"Button","data-sentry-source-file":"UpgradePrompt.tsx",children:(0,n.jsx)(r(),{href:"/org/".concat(null==a?void 0:a.slug,"/billing?panel=subscriptionPlan&source=logsRetentionUpgradePrompt"),"data-sentry-element":"Link","data-sentry-source-file":"UpgradePrompt.tsx",children:"Upgrade"})})]})]})}},11558:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(56947),a=s(53239),r=s(89044),l=s(66933),o=s(92589),i=s(3807);let c=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=!(arguments.length>2)||void 0===arguments[2]||arguments[2],d=(0,l.Et)(l.Po),[u,m]=(0,a.useState)({sql:(null==s?void 0:s.sql)||"",project:e,iso_timestamp_start:s.iso_timestamp_start?s.iso_timestamp_start:d.calcFrom(),iso_timestamp_end:s.iso_timestamp_end?s.iso_timestamp_end:d.calcTo()}),p=c&&void 0!==e&&!!u.sql,x=(0,o.Fx)(u.sql||""),h=(0,o.n4)(u.sql||""),{data:f,error:g,isLoading:y,isRefetching:j,refetch:v}=(0,n.I)(["projects",e,"logs",u],async t=>{let{signal:s}=t,{data:n,error:a}=await (0,i.Jt)("/platform/projects/{ref}/analytics/endpoints/logs.all",{params:{path:{ref:e},query:u},signal:s});if(a)throw a;return n},{enabled:p,refetchOnWindowFocus:!1}),b=g?g.message:null;return!b&&(null==f?void 0:f.error)&&(b=null==f?void 0:f.error),r.pe&&(x&&(b={message:"The parser does not yet support WITH and subquery statements.",docs:"https://supabase.com/docs/guides/platform/advanced-log-filtering#the-with-keyword-and-subqueries-are-not-supported"}),h&&(b={message:"BigQuery does not support ILIKE. Use REGEXP_CONTAINS instead.",docs:"https://supabase.com/docs/guides/platform/advanced-log-filtering#the-ilike-and-similar-to-keywords-are-not-supported"})),{params:u,isLoading:p&&y||j,logData:null!=(t=null==f?void 0:f.result)?t:[],error:b,changeQuery:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";m(t=>({...t,sql:e}))},runQuery:()=>v(),setParams:m}}},22804:(e,t,s)=>{"use strict";s.r(t),s.d(t,{LogsExplorerPage:()=>er,default:()=>el});var n=s(80263),a=s(14360),r=s(56404),l=s(53434),o=s.n(l),i=s(52385),c=s(53239),d=s(73969),u=s(89044),m=s(66933),p=s(92589),x=s(63320),h=s.n(x),f=s(10738),g=s(33794),y=s(45479),j=s(24726),v=s(90206),b=s(68656),w=s(23278),_=s(91846),N=s(66452),S=s(64238),A=s(81372),C=s(42004),E=s(33656),P=s(16601),q=s(38952),k=s(35091),R=s(75125),T=s(3732),L=s(38784);function I(e){let{name:t,desc:s}=e;return(0,n.jsxs)("div",{className:"grid gap-1","data-sentry-component":"DropdownMenuItemContent","data-sentry-source-file":"LogsQueryPanel.tsx",children:[(0,n.jsx)("div",{className:"font-mono font-bold",children:t}),s&&(0,n.jsx)("div",{className:"text-foreground-light",children:s})]})}let M=e=>{let{field:t}=e,[s,a]=(0,c.useState)(!1);return(0,n.jsxs)(g.A.tr,{"data-sentry-element":"unknown","data-sentry-component":"Field","data-sentry-source-file":"LogsQueryPanel.tsx",children:[(0,n.jsxs)(g.A.td,{className:"font-mono text-xs !p-2 cursor-pointer hover:text-foreground transition flex items-center space-x-2",onClick:()=>(0,v.lW)(t.path,()=>{a(!0),setTimeout(()=>a(!1),3e3)}),"data-sentry-element":"unknown","data-sentry-source-file":"LogsQueryPanel.tsx",children:[(0,n.jsx)("span",{children:t.path}),s?(0,n.jsxs)(T.m_,{children:[(0,n.jsx)(T.k$,{children:(0,n.jsx)(S.A,{size:14,strokeWidth:3,className:"text-brand"})}),(0,n.jsx)(T.ZI,{side:"bottom",children:"Copied"})]}):(0,n.jsxs)(T.m_,{children:[(0,n.jsx)(T.k$,{children:(0,n.jsx)(A.A,{size:14,strokeWidth:1.5})}),(0,n.jsx)(T.ZI,{side:"bottom",children:"Copy value"})]})]}),(0,n.jsx)(g.A.td,{className:"font-mono text-xs !p-2","data-sentry-element":"unknown","data-sentry-source-file":"LogsQueryPanel.tsx",children:t.type})]})},U=e=>{let{templates:t=[],warehouseTemplates:s=[],defaultFrom:a,defaultTo:r,warnings:l,warehouseCollections:i,dataSource:d,onSelectTemplate:p,onSelectWarehouseTemplate:x,onSelectSource:v,onDateChange:S,onDataSourceChange:A}=e,[T,U]=(0,c.useState)(!1),{projectAuthAll:Q,projectStorageAll:F,projectEdgeFunctionAll:O}=(0,y.x)(["project_auth:all","project_storage:all","project_edge_function:all"]),z=(0,j._)("warehouse"),D=Object.entries(m.le).filter(e=>{let[t]=e;return"AUTH"===t?Q:"STORAGE"===t?F:"FN_EDGE"===t?O:"PG_CRON"!==t&&"WAREHOUSE"!==t}).map(e=>{let[,t]=e;return t}),[H,W]=(0,c.useState)(a&&r?{to:r,from:a,text:"".concat(o()(a).format("DD MMM, HH:mm")," - ").concat(o()(r).format("DD MMM, HH:mm")),isHelper:!1}:{to:m.Po[0].calcTo(),from:m.Po[0].calcFrom(),text:m.Po[0].text,isHelper:!0});return(0,n.jsx)("div",{className:"border-b bg-surface-100","data-sentry-component":"LogsQueryPanel","data-sentry-source-file":"LogsQueryPanel.tsx",children:(0,n.jsx)("div",{className:"flex w-full items-center justify-between px-4 md:px-5 py-2 overflow-x-scroll no-scrollbar",children:(0,n.jsxs)("div",{className:"flex w-full flex-row items-center justify-between gap-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[z&&(0,n.jsxs)(E.rI,{children:[(0,n.jsx)(E.ty,{asChild:!0,children:(0,n.jsxs)(P.$,{type:"default",iconRight:(0,n.jsx)(b.A,{}),children:["Data source"," ",(0,n.jsx)("span",{className:"ml-2 font-mono opacity-50",children:"warehouse"===d?"collections":"logs"})]})}),(0,n.jsxs)(E.SQ,{side:"bottom",align:"start",children:[(0,n.jsx)(E._2,{onClick:()=>A("logs"),children:(0,n.jsx)(I,{name:"Logs",desc:"Logs for all Supabase products"})}),(0,n.jsx)(E._2,{onClick:()=>A("warehouse"),children:(0,n.jsx)(I,{name:(0,n.jsxs)("span",{children:["Collections ",(0,n.jsx)(q.E,{variant:"warning",children:"NEW"})]}),desc:"Query your collections"})})]})]}),"warehouse"===d&&(0,n.jsxs)(E.rI,{children:[(0,n.jsx)(E.ty,{asChild:!0,children:(0,n.jsx)(P.$,{type:"default",iconRight:(0,n.jsx)(b.A,{}),children:"Templates"})}),(0,n.jsxs)(E.SQ,{className:"max-h-96 overflow-auto",side:"bottom",align:"start",children:[s.map(e=>(0,n.jsx)(E._2,{onClick:()=>x(e),children:(0,n.jsx)(I,{name:e.name,desc:e.description})},e.name)),0===i.length&&(0,n.jsx)(E._2,{className:"hover:bg-transparent cursor-default",children:(0,n.jsx)(I,{name:"No collections found",desc:"You can create collections in the left sidebar."})})]})]}),"logs"===d&&(0,n.jsxs)(E.rI,{children:[(0,n.jsx)(E.ty,{asChild:!0,children:(0,n.jsx)(P.$,{type:"default",iconRight:(0,n.jsx)(b.A,{}),children:"Insert source"})}),(0,n.jsx)(E.SQ,{side:"bottom",align:"start",className:"max-h-[70vh] overflow-auto",children:"logs"===d&&D.sort((e,t)=>e.localeCompare(t)).map(e=>(0,n.jsx)(E._2,{onClick:()=>v(e),children:(0,n.jsx)(I,{name:e,desc:m.fy[e]})},e))})]}),"logs"===d&&u.pe&&(0,n.jsxs)(E.rI,{children:[(0,n.jsx)(E.ty,{asChild:!0,children:(0,n.jsx)(P.$,{type:"default",iconRight:(0,n.jsx)(b.A,{}),children:"Templates"})}),(0,n.jsx)(E.SQ,{side:"bottom",align:"start",children:t.sort((e,t)=>e.label.localeCompare(t.label)).map(e=>(0,n.jsx)(E._2,{onClick:()=>p(e),children:(0,n.jsx)("p",{children:e.label})},e.label))})]}),"logs"===d&&(0,n.jsx)(L.O,{value:H,onSubmit:e=>{W(e),S(e)},helpers:m.Po}),(0,n.jsx)("div",{className:"overflow-hidden",children:(0,n.jsx)("div",{"data-testid":"log-explorer-warnings",className:" transition-all duration-300 ".concat(l.length>0?"opacity-100":"invisible h-0 w-0 opacity-0"),children:(0,n.jsx)(f.AM,{"data-sentry-element":"Popover","data-sentry-source-file":"LogsQueryPanel.tsx",children:(0,n.jsxs)(f.Wv,{"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"LogsQueryPanel.tsx",children:[(0,n.jsxs)(q.E,{variant:"warning","data-sentry-element":"Badge","data-sentry-source-file":"LogsQueryPanel.tsx",children:[l.length," ",l.length>1?"warnings":"warning"]}),(0,n.jsx)(f.hl,{className:"p-0 divide-y","data-sentry-element":"PopoverContent","data-sentry-source-file":"LogsQueryPanel.tsx",children:l.map((e,t)=>(0,n.jsxs)("p",{className:"p-3 text-xs text-foreground-light text-left",children:[e.text," ",e.link&&(0,n.jsx)(h(),{href:e.link,children:e.linkText||"View"})]},t))})]})})})})]}),"logs"===d&&(0,n.jsxs)(k.Ay,{size:"large",header:(0,n.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,n.jsx)("h3",{children:"Field Reference"}),(0,n.jsx)(P.$,{type:"text",className:"px-1",onClick:()=>U(!1),icon:(0,n.jsx)(w.A,{})})]}),visible:T,cancelText:"Close",onCancel:()=>U(!1),hideFooter:!0,triggerElement:(0,n.jsx)(P.$,{asChild:!0,type:"text",onClick:()=>U(!0),icon:(0,n.jsx)(_.A,{}),className:"px-2",children:(0,n.jsx)("span",{children:"Field Reference"})}),children:[(0,n.jsx)(k.Ay.Content,{children:(0,n.jsx)("div",{className:"pt-4 pb-2 space-y-1",children:(0,n.jsxs)("p",{className:"text-sm",children:["The following table shows all the available paths that can be queried from each respective source. Do note that to access nested keys, you would need to perform the necessary"," ",(0,n.jsxs)(h(),{href:"https://supabase.com/docs/guides/platform/logs#unnesting-arrays",target:"_blank",rel:"noreferrer",className:"text-brand",children:["unnesting joins",(0,n.jsx)(N.A,{size:"14",className:"ml-1 inline -translate-y-[2px]",strokeWidth:1.5})]})]})})}),(0,n.jsx)(k.Ay.Separator,{}),(0,n.jsx)(R.A,{scrollable:!0,size:"small",type:"underlined",defaultActiveId:"edge_logs",listClassNames:"px-2",children:C.go.schemas.map(e=>(0,n.jsx)(R.A.Panel,{id:e.reference,label:e.name,className:"px-4 pb-4",children:(0,n.jsx)(g.A,{head:[(0,n.jsx)(g.A.th,{className:"text-xs !p-2",children:"Path"},"path"),(0,n.jsx)(g.A.th,{className:"text-xs !p-2",children:"Type"},"type")],body:e.fields.sort((e,t)=>e.path-t.path).map(e=>(0,n.jsx)(M,{field:e},e.path))})},e.reference))})]})]})})})};var Q=s(50447),F=s(8132),O=s(6408),z=s(55813),D=s(70967),H=s(62761),W=s(17457),$=s(25679),V=s(26691),Z=s(78512),B=s(83041),G=s(11558),J=s(66001),X=s(25718),K=s(67833),Y=s(11649),ee=s(79210),et=s(55335),es=s(80109),en=s(71171);let ea=u.pe?"select\n  cast(timestamp as datetime) as timestamp,\n  event_message, metadata \nfrom edge_logs \nlimit 5":"select\n  timestamp, event_message, metadata\n  from edge_logs limit 5",er=()=>{(0,p.PJ)();let e=(0,a.useMonaco)(),t=(0,i.useRouter)(),{profile:s}=(0,Y.xc)(),{ref:l,q:x,queryId:h,source:f}=(0,u.g)(),g=(0,X.a)(),y=(0,c.useRef)(),[j]=(0,c.useState)((0,v.gZ)()),{timestampStart:b,timestampEnd:w,setTimeRange:_}=(0,J.B)(),[N,S]=(0,c.useState)(ea),[A,C]=(0,c.useState)((0,v.gZ)()),[E,q]=(0,c.useState)("-- Fetch the last 10 logs in the last 7 days \nselect id, timestamp, event_message from `COLLECTION_NAME` \nwhere timestamp > timestamp_sub(current_timestamp(), interval 7 day) \norder by timestamp desc limit 10"),[k,R]=(0,c.useState)(!1),[T,L]=(0,c.useState)([]),[I,M]=(0,c.useState)(f||"logs"),[O,z]=(0,c.useState)(null),[er,el]=(0,r.Mj)("project-content-".concat(l,"-recent-log-sql"),[]),{data:eo}=(0,Z.D)({projectRef:l,type:"log_sql"}),ei=null==eo?void 0:eo.content.find(e=>e.id===h),{params:ec,logData:ed,error:eu,isLoading:em,changeQuery:ep,runQuery:ex}=(0,G.A)(l,{iso_timestamp_start:b,iso_timestamp_end:w},"logs"===I),{refetch:eh,data:ef,isFetching:eg,error:ey}=(0,V.r)({ref:l,sql:E},{enabled:!1}),ej="warehouse"===I?null==ef?void 0:ef.result:ed,ev=em||eg,{data:eb}=(0,$.u)({projectRef:l}),{mutate:ew,isLoading:e_}=(0,B.v)({onError:e=>{console.error(e),R(!1),h?d.oR.error("Failed to update query: ".concat(e.message)):d.oR.error("Failed to save query: ".concat(e.message))},onSuccess:(e,t)=>{R(!1),h?d.oR.success('Updated "'.concat(t.payload.name,'" log query')):d.oR.success('Saved "'.concat(t.payload.name,'" log query'))}}),eN=e=>{el([...er,{schema_version:"1",favorite:!1,sql:"",content_id:"",...e}])},{showUpgradePrompt:eS,setShowUpgradePrompt:eA}=(0,K.g)(ec.iso_timestamp_start),eC=e=>{let s="string"==typeof e&&e||N;if("warehouse"===I){if(!(null==eb?void 0:eb.length))return void d.oR.error("You do not have any collections yet.");let e=null==eb?void 0:eb.map(e=>e.name);return(null==e?void 0:e.find(e=>E.includes(e)))?Object.values(m.eV).find(e=>E.includes(e))?d.oR.error("Cannot query logs tables from current query."):(eh(),t.push({pathname:t.pathname,query:{...t.query,q:s}})):void d.oR.error("Please specify a collection name in the query")}ep(s),ex(),t.push({pathname:t.pathname,query:{...t.query,q:s}}),eN({sql:s})},eE=async(e,n)=>{let{setSubmitting:a}=n;if(!l)return console.error("Project ref is required");if(!s)return console.error("Profile is required");a(!0);let r=(0,v.gZ)();ew({projectRef:l,payload:{id:r,name:e.name,description:e.description||"",type:"log_sql",content:{content_id:j,sql:N,schema_version:"1",favorite:!1},owner_id:s.id,visibility:"user"}},{onSuccess:()=>t.push("/project/".concat(l,"/logs/explorer?queryId=").concat(r))})};return(0,c.useEffect)(()=>{ey&&d.oR.error(ey.message)},[ey]),(0,c.useEffect)(()=>{x&&(S(x),q(x))},[x]),(0,c.useEffect)(()=>{let e=[],t=b?o()(b):o()(),s=w?o()(w):o()();Math.abs(t.diff(s,"days"))>=m.VM&&e.push({text:"Querying large date ranges can be slow. Consider selecting a smaller date range."}),N&&!N.includes("limit")&&e.push({text:"When querying large date ranges, include a LIMIT clause."}),L(e)},[N,b,w]),(0,c.useEffect)(()=>{if(b){var e;(0,p.eu)(b,null==g||null==(e=g.plan)?void 0:e.id)&&eA(!eS)}},[b,g]),(0,n.jsxs)("div",{className:"w-full h-full mx-auto","data-sentry-component":"LogsExplorerPage","data-sentry-source-file":"index.tsx",children:[(0,n.jsxs)(ee.HK,{className:"w-full h-full max-h-screen",direction:"vertical",autoSaveId:u.rS.LOG_EXPLORER_SPLIT_SIZE,"data-sentry-element":"ResizablePanelGroup","data-sentry-source-file":"index.tsx",children:[(0,n.jsxs)(ee.wV,{collapsible:!0,minSize:5,"data-sentry-element":"ResizablePanel","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(U,{defaultFrom:b||"",defaultTo:w||"",onDateChange:e=>{var t;let{to:s,from:n}=e;(0,p.eu)(n,null==g||null==(t=g.plan)?void 0:t.id)?eA(!eS):_(n||"",s||"")},onSelectSource:t=>{if("warehouse"===I)return C((0,v.gZ)());if(y.current&&e){var s,n;let a=null==(s=y.current)?void 0:s.getModel(),r=y.current.getValue(),l=r.indexOf("from"),o=l<0?"".concat(r).concat(t):"".concat(r.substring(0,l+4)," ").concat(t," ").concat(r.substring(l+5));y.current.pushUndoStop(),y.current.executeEdits("insert-identifier",[{text:o,range:null!=(n=null==a?void 0:a.getFullModelRange())?n:new e.Range(1,1,1,1)}]),y.current.pushUndoStop(),y.current.focus()}},templates:m.QT.filter(e=>"custom"===e.mode),warehouseCollections:eb||[],onSelectTemplate:t=>{if(y.current&&e){var s,n;let a=null==(s=y.current)?void 0:s.getModel();y.current.pushUndoStop(),y.current.executeEdits("insert-identifier",[{text:t.searchString,range:null!=(n=null==a?void 0:a.getFullModelRange())?n:new e.Range(1,1,1,1)}]),y.current.pushUndoStop(),y.current.focus()}eN({sql:t.searchString})},warehouseTemplates:(eb||[]).flatMap(e=>[{query:"select count(*) as event_count from `".concat(e.name,"`\nwhere timestamp > timestamp_sub(current_timestamp(), interval 1 day)"),name:"".concat(e.name," - Daily Event Count"),description:"Count events in the last 24 hours from ".concat(e.name," collection")},{query:"select id, timestamp, event_message from `".concat(e.name,"`\n        where timestamp > timestamp_sub(current_timestamp(), interval 1 day) \n        and event_message like '%YOUR_TEXT_HERE%'\n        order by timestamp desc limit 10"),name:"".concat(e.name," - Filter by text"),description:"Select last 10 events from ".concat(e.name," collection")}]),onSelectWarehouseTemplate:e=>{q(e.query),C((0,v.gZ)())},warnings:T,dataSource:I,onDataSourceChange:e=>{M(e),t.push({pathname:t.pathname,query:{...t.query,source:e}})},"data-sentry-element":"LogsQueryPanel","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(W.A,{active:ev,"data-sentry-element":"ShimmerLine","data-sentry-source-file":"index.tsx"}),"warehouse"===I?(0,n.jsx)(D.A,{id:A,language:"pgsql",defaultValue:E,onInputChange:e=>q(e||""),actions:{runQuery:{enabled:!0,callback:eC}}}):(0,n.jsx)(D.A,{id:j,editorRef:y,language:"pgsql",defaultValue:N,onInputChange:e=>S(e||""),actions:{runQuery:{enabled:!0,callback:eC}}})]}),(0,n.jsx)(ee.WM,{withHandle:!0,"data-sentry-element":"ResizableHandle","data-sentry-source-file":"index.tsx"}),(0,n.jsx)(ee.wV,{collapsible:!0,minSize:5,className:"overflow-auto","data-sentry-element":"ResizablePanel","data-sentry-source-file":"index.tsx",children:(0,n.jsxs)(H.A,{active:ev,"data-sentry-element":"LoadingOpacity","data-sentry-source-file":"index.tsx",children:[(0,n.jsx)(Q.A,{isSaving:e_,showHistogramToggle:!1,onRun:eC,onSave:function(){return l?h&&ei?void ew({projectRef:l,payload:{...ei,content:{...ei.content,sql:N}}}):void R(!k):console.error("Project ref is required")},hasEditorValue:!!N,data:ej,error:eu,projectRef:l,onSelectedLogChange:z,selectedLog:O,"data-sentry-element":"LogTable","data-sentry-source-file":"index.tsx"}),(0,n.jsx)("div",{className:"flex flex-row justify-end mt-2",children:(0,n.jsx)(F.A,{show:eS,setShowUpgradePrompt:eA,"data-sentry-element":"UpgradePrompt","data-sentry-source-file":"index.tsx"})})]})})]}),(0,n.jsx)(et.A,{size:"medium",onCancel:()=>R(!k),header:"Save log query",visible:k,hideFooter:!0,"data-sentry-element":"Modal","data-sentry-source-file":"index.tsx",children:(0,n.jsx)(es.A,{initialValues:{name:"",desdcription:""},onSubmit:eE,"data-sentry-element":"Form","data-sentry-source-file":"index.tsx",children:()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(et.A.Content,{className:"space-y-6",children:[(0,n.jsx)(en.A,{layout:"horizontal",label:"Name",id:"name"}),(0,n.jsx)("div",{className:"text-area-text-sm",children:(0,n.jsx)(en.A.TextArea,{layout:"horizontal",labelOptional:"Optional",label:"Description",id:"description",rows:2})})]}),(0,n.jsx)(et.A.Separator,{}),(0,n.jsxs)(et.A.Content,{className:"flex items-center justify-end gap-2",children:[(0,n.jsx)(P.$,{size:"tiny",type:"default",onClick:()=>R(!k),children:"Cancel"}),(0,n.jsx)(P.$,{size:"tiny",loading:e_,disabled:e_,htmlType:"submit",children:"Save"})]})]})})})]})};er.getLayout=e=>(0,n.jsx)(O.A,{children:(0,n.jsx)(z.A,{children:e})});let el=er},23975:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/logs/explorer",function(){return s(22804)}])},26691:(e,t,s)=>{"use strict";s.d(t,{r:()=>o});var n=s(56947),a=s(3807),r=s(55319);async function l(e,t){let{ref:s,sql:n}=e;if(!n)throw Error("SQL must be provided");let{data:r,error:l}=await (0,a.Jt)("/platform/projects/{ref}/analytics/warehouse/query",{params:{path:{ref:s},query:{bq_sql:n}},signal:t});return l&&(0,a.H4)(l),r}let o=function(e){let{ref:t,sql:s}=e,{enabled:a,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.P.warehouseQuery(t,s),e=>{let{signal:n}=e;return l({ref:t,sql:s},n)},{enabled:a,staleTime:1/0,cacheTime:9e5,refetchOnMount:!1,refetchInterval:!1,...o})}},56404:(e,t,s)=>{"use strict";s.d(t,{Mj:()=>m,d7:()=>r});var n=s(53239);function a(e,t){window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:t}))}function r(e,t){let[s,a]=n.useState(e);return n.useEffect(()=>{let s=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(s)}},[e,t]),s}let l={past:[],present:null,future:[]},o=(e,t)=>{let s=JSON.stringify(t);window.localStorage.setItem(e,s),a(e,s)},i=e=>{window.localStorage.removeItem(e),a(e,null)},c=e=>window.localStorage.getItem(e),d=e=>(window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)),u=()=>{throw Error("useLocalStorage is a client-only hook")};function m(e,t){let s=n.useSyncExternalStore(d,()=>c(e),u),a=n.useCallback(t=>{try{let n="function"==typeof t?t(JSON.parse(s)):t;null==n?i(e):o(e,n)}catch(e){console.warn(e)}},[e,s]);return n.useEffect(()=>{null===c(e)&&void 0!==t&&o(e,t)},[e,t]),[s?JSON.parse(s):t,a]}let p=()=>navigator?.connection||navigator?.mozConnection||navigator?.webkitConnection},67833:(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var n=s(92589),a=s(53239),r=s(25718);let l=e=>{var t;let s=(0,r.a)(),[l,o]=(0,a.useState)(!1),i=(0,n.eu)(e,null==s||null==(t=s.plan)?void 0:t.id);return(0,a.useEffect)(()=>{i&&o(!0)},[e]),{showUpgradePrompt:l,setShowUpgradePrompt:o,shouldShowUpgradePrompt:i}}},75125:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var n=s(80263),a=s(46115),r=s(53239),l=s(77690);let o=e=>{var t,s,o;let{defaultActiveId:i,activeId:c,type:d="pills",size:u="tiny",block:m,onChange:p,onClick:x,scrollable:h,wrappable:f,addOnBefore:g,addOnAfter:y,listClassNames:j,baseClassNames:v,refs:b,children:w}=e,_=r.Children.toArray(w),[N,S]=(0,r.useState)(null!=(o=null!=c?c:i)?o:null==_||null==(s=_[0])||null==(t=s.props)?void 0:t.id);(0,r.useMemo)(()=>{c&&c!==N&&S(c)},[c]);let A=(0,l.A)("tabs");function C(e){null==x||x(e),e!==N&&(null==p||p(e),S(e))}let E=[A[d].list];return h&&E.push(A.scrollable),f&&E.push(A.wrappable),j&&E.push(j),(0,n.jsxs)(a.bL,{value:N,className:[A.base,v].join(" "),ref:null==b?void 0:b.base,"data-sentry-element":"unknown","data-sentry-component":"Tabs","data-sentry-source-file":"Tabs.tsx",children:[(0,n.jsxs)(a.B8,{className:E.join(" "),ref:null==b?void 0:b.list,"data-sentry-element":"unknown","data-sentry-source-file":"Tabs.tsx",children:[g,_.map(e=>{let t=N===e.props.id,s=[A[d].base,A.size[u]];return t?s.push(A[d].active):s.push(A[d].inactive),m&&s.push(A.block),(0,n.jsxs)(a.l9,{onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),C(e.props.id))},onClick:()=>C(e.props.id),value:e.props.id,className:s.join(" "),children:[e.props.icon,(0,n.jsx)("span",{children:e.props.label}),e.props.iconRight]},"".concat(e.props.id,"-tab-button"))}),y]}),_]})};o.Panel=e=>{let{children:t,id:s,className:r}=e,o=(0,l.A)("tabs");return(0,n.jsx)(a.UC,{value:s,className:[o.content,r].join(" "),"data-sentry-element":"unknown","data-sentry-component":"Panel","data-sentry-source-file":"Tabs.tsx",children:t})};let i=o}},e=>{var t=t=>e(e.s=t);e.O(0,[89,2479,8058,9353,9413,3730,6110,6182,589,9257,1673,5599,7990,8508,4365,2981,7406,6554,4560,4963,408,4340,30,2809,2802,5969,3719,9472,9088,3423,1252,7613,8601,5813,8996,6593,636,8792],()=>t(23975)),_N_E=e.O()}]);